import{r as a,u as L,j as e}from"./app-De-pmVM3.js";import{E as G}from"./event-calendar-D93KTxTg.js";function se(){const[N,y]=a.useState(!1),[j,E]=a.useState(null),[T,k]=a.useState(null),[u,h]=a.useState(!1),[_,m]=a.useState({clients:[],services:[],locations:[],serviceUsers:[],calendars:[]}),[D,R]=a.useState(null),[A,g]=a.useState(!1),[q,p]=a.useState({name:"",email:"",phone:""}),[v,b]=a.useState([]),[c,S]=a.useState(!1),[O,f]=a.useState([]),[P,F]=a.useState(""),{data:i,setData:o,post:H,put:W,delete:Z,processing:I,reset:x}=L({service_date:"",start_time:"",end_time:"",booking_client_id:"",service_id:"",booking_location_id:"",service_user_id:"",booking_calendar_id:"",status:"booked",total_price:"",notes:"",service_note:""});a.useEffect(()=>{(async()=>{try{const l=await(await fetch("/calendar/resources")).json();l&&l.length>0&&R(l[0])}catch(r){console.error("Error loading technicians:",r)}})()},[]),a.useEffect(()=>{(async()=>{try{const[r,l,d,w,C]=await Promise.all([fetch("/api/calendar/clients"),fetch("/api/calendar/services"),fetch("/api/calendar/locations"),fetch("/api/calendar/service-users"),fetch("/api/calendar/calendars")]),[V,X,J,Q,Y]=await Promise.all([r.json(),l.json(),d.json(),w.json(),C.json()]);m({clients:V,services:X,locations:J,serviceUsers:Q,calendars:Y})}catch(r){console.error("Error loading dropdown data:",r)}})()},[]);const z=a.useCallback(s=>{const r=new Date(s.start),l=s.end?new Date(s.end):null;E({start:r,end:l,allDay:s.allDay,resourceId:s.resource?.id}),o(d=>({...d,service_date:r.toISOString().split("T")[0],start_time:r.toTimeString().slice(0,5),end_time:l?l.toTimeString().slice(0,5):"",service_user_id:s.resource?.id||""})),h(!1),y(!0)},[i,o]),M=a.useCallback(s=>{const r=s.event;k({id:r.id,title:r.title,start:r.start,end:r.end,extendedProps:r.extendedProps});const l=r.extendedProps;o(d=>({...d,service_date:l.service_date||r.start?.toISOString().split("T")[0]||"",start_time:l.start_time||r.start?.toTimeString().slice(0,5)||"",end_time:l.end_time||r.end?.toTimeString().slice(0,5)||"",booking_client_id:"",service_id:"",booking_location_id:"",service_user_id:r.getResource()?.id||"",status:l.status||"booked",total_price:l.total_price||"",notes:l.notes||"",service_note:""})),h(!0),y(!0)},[o]),$=a.useCallback(async s=>{const r=s.event,l=r.start,d=r.end,w=r.getResource()?.id;try{if(!(await fetch(`/api/calendar/bookings/${r.id}/move`,{method:"PATCH",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")||""},body:JSON.stringify({start:l.toISOString(),end:d?d.toISOString():null,resource_id:w})})).ok)throw new Error("Failed to move booking");window.location.reload()}catch(C){console.error("Error moving booking:",C),s.revert()}},[]),B=a.useCallback(async s=>{const r=s.event,l=r.end;try{if(!(await fetch(`/api/calendar/bookings/${r.id}/resize`,{method:"PATCH",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")||""},body:JSON.stringify({end:l.toISOString()})})).ok)throw new Error("Failed to resize booking");window.location.reload()}catch(d){console.error("Error resizing booking:",d),s.revert()}},[]),K=a.useCallback(s=>{const r=s.event.extendedProps?.type,l=s.view.type,d=[];return r==="booking"?d.push("calendar-booking-event"):r==="location"&&d.push("calendar-location-event"),l==="dayGridMonth"&&d.push("month-view-event"),d},[]),U=a.useCallback(s=>{const r=s.view.type,l=s.event.extendedProps?.type;return r==="dayGridMonth"&&l==="booking"?{domNodes:[]}:!0},[]),t=a.useCallback(async s=>{s.preventDefault(),f([]),F("");try{const r=u?`/api/calendar/bookings/${T?.id}`:"/api/calendar/bookings",d=await fetch(r,{method:u?"PUT":"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")||""},body:JSON.stringify(i)}),w=await d.json();if(!d.ok){if(w.errors){const C=Object.values(w.errors).flat();f(C)}else f([w.message||`Failed to ${u?"update":"create"} booking`]);return}F(w.message||`Booking ${u?"updated":"created"} successfully`),setTimeout(()=>{y(!1),x(),k(null),E(null),window.location.reload()},1500)}catch(r){console.error(`Error ${u?"updating":"creating"} booking:`,r),f(["An unexpected error occurred. Please try again."])}},[i,u,T?.id,x]),n=a.useCallback(async()=>{if(T?.id)try{if(!(await fetch(`/api/calendar/bookings/${T.id}`,{method:"DELETE",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")||""}})).ok)throw new Error("Failed to delete booking");y(!1),x(),k(null),E(null),window.location.reload()}catch(s){console.error("Error deleting booking:",s)}},[T?.id,x]);return e.jsxs(e.Fragment,{children:[D?e.jsxs(e.Fragment,{children:[e.jsx("style",{children:`
                        /* Hide booking events in month view */
                        .fc-daygrid .calendar-booking-event.month-view-event {
                            display: none !important;
                        }
                    `}),e.jsx(G,{className:"mx-auto my-10 max-w-300",editable:!0,selectable:!0,droppable:!0,nowIndicator:!0,navLinks:!0,locale:"sv",initialView:"timeGridWeek",firstDay:1,timeZone:"Europe/Stockholm",events:`/api/calendar/bookings?service_user_id=${D.id}`,resources:"/calendar/resources",select:z,eventClick:M,eventDrop:$,eventResize:B,eventClassNames:K,eventContent:U,headerToolbar:{left:"",center:"",right:""},slotMinTime:"07:00:00",slotMaxTime:"20:00:00",slotDuration:"01:00:00",weekends:!0,addButton:{text:`${D.title}`,click(){h(!1),E({start:new Date,end:new Date(Date.now()+3600*1e3),allDay:!1}),y(!0)}}})]}):e.jsx("div",{className:"mx-auto my-10 max-w-300 flex items-center justify-center h-96",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-black dark:border-white mx-auto mb-4"}),e.jsxs("svg",{version:"1.2",id:"nordic-logo",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 2000 336",width:"200",height:"34",fill:"currentColor",children:[e.jsx("g",{children:e.jsx("path",{fillRule:"evenodd",className:"s0",d:"m1245.5 13.5q39 0 78 0 0.25 104-0.5 208-7.73 69.72-72.5 96.5-81.51 23.59-131.5-44.5-35.41-60.78 1-121 47.62-63.63 125.5-45 0-47 0-94zm-73 200q4.85 39.91 45 39.5 31.97-6.41 35-39-5.71-41.96-48-39.5-29.03 8.55-32 39z"})}),e.jsx("g",{children:e.jsx("path",{fillRule:"evenodd",className:"s0",d:"m655.5 101.5q73.88-5.44 112.5 57 31.23 64.88-11 123-49.57 55.58-121.5 35.5-62.5-23.77-74.5-89.5-6.8-72.15 53.5-111.5 19.47-10.74 41-14.5zm-10 79.5q-23.59 23.82-7.5 53.5 21.72 25.85 52.5 11.5 20.62-12.99 19.5-37.5-7.55-39.17-47.5-36-9.15 2.65-17 8.5z"})}),e.jsx("g",{children:e.jsx("path",{fillRule:"evenodd",className:"s0",d:"m1623.5 101.5q54.97-5.93 94 32.5-24.5 24.5-49 49-1.5 1-3 0-19.76-16.75-44-7-27.69 16.05-20.5 47.5 15.61 36.43 53.5 24.5 7.07-3.08 12.5-8.5 25.25 25.25 50.5 50.5-54.66 49.83-124 23-54.24-26.7-64.5-86.5-5.65-83.98 70.5-118.5 12.06-3.76 24-6.5z"})}),e.jsx("g",{children:e.jsx("path",{fillRule:"evenodd",className:"s0",d:"m381.5 106.5q59 0 118 0 0 105 0 210-42 0-84 0 0-63 0-126-27 0-54 0 0 63 0 126-43 0-86 0-0.25-52 0.5-104 53.05-52.8 105.5-106z"})}),e.jsx("g",{children:e.jsx("path",{fillRule:"evenodd",className:"s0",d:"m944.5 106.5q50 0 100 0 0 42 0 84-60 0-120 0 0 63 0 126-43 0-86 0-0.25-52 0.5-104 53.05-52.8 105.5-106z"})}),e.jsx("g",{children:e.jsx("path",{fillRule:"evenodd",className:"s0",d:"m1385.5 106.5q42 0 84 0 0 105 0 210-42 0-84 0 0-105 0-210z"})})]}),e.jsx("p",{className:"mt-2 text-gray-600",children:"Laddar kalender..."})]})}),N&&e.jsx("div",{className:"bg-opacity-50 fixed inset-0 z-50 flex items-center justify-center",children:e.jsxs("div",{className:"fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg sm:max-w-[550px]",children:[e.jsx("h2",{className:"mb-4 text-xl font-bold",children:u?"Redigera Bokning":"Ny Bokning"}),P&&e.jsx("div",{className:"mb-4 rounded-md bg-green-50 p-4",children:e.jsx("div",{className:"text-green-800",children:P})}),O.length>0&&e.jsx("div",{className:"mb-4 rounded-md bg-red-50 p-4",children:e.jsx("div",{className:"text-red-800",children:O.map((s,r)=>e.jsx("div",{className:"mb-1",children:s},r))})}),e.jsxs("form",{onSubmit:t,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"mb-1 block text-sm font-medium text-gray-700",children:"Datum"}),e.jsx("input",{type:"date",value:i.service_date,onChange:s=>o("service_date",s.target.value),className:"w-full rounded-md border border-gray-300 px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:outline-none",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-1 block text-sm font-medium text-gray-700",children:"Status"}),e.jsxs("select",{value:i.status,onChange:s=>o("status",s.target.value),className:"w-full rounded-md border border-gray-300 px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:outline-none",children:[e.jsx("option",{value:"booked",children:"Bokad"}),e.jsx("option",{value:"confirmed",children:"Bekräftad"}),e.jsx("option",{value:"cancelled",children:"Inställd"}),e.jsx("option",{value:"completed",children:"Genomförd"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"mb-1 block text-sm font-medium text-gray-700",children:"Starttid"}),e.jsx("input",{type:"time",value:i.start_time,onChange:s=>o("start_time",s.target.value),className:"w-full rounded-md border border-gray-300 px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:outline-none",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-1 block text-sm font-medium text-gray-700",children:"Sluttid"}),e.jsx("input",{type:"time",value:i.end_time,onChange:s=>o("end_time",s.target.value),className:"w-full rounded-md border border-gray-300 px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:outline-none",required:!0})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"mb-1 block text-sm font-medium text-gray-700",children:"Kund"}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("select",{value:i.booking_client_id,onChange:s=>o("booking_client_id",s.target.value),className:"w-full rounded-md border border-gray-300 px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:outline-none",children:[e.jsx("option",{value:"",children:"Välj kund"}),_.clients.map(s=>e.jsx("option",{value:s.id,children:s.name},s.id))]}),e.jsx("button",{type:"button",className:"text-sm text-blue-600 hover:underline",onClick:()=>{g(s=>!s),b([])},children:"Lägg till ny kund"})]}),A&&e.jsxs("div",{className:"mt-3 space-y-2 rounded-md border border-gray-200 p-3",children:[v.length>0&&e.jsx("div",{className:"rounded-md bg-red-50 p-2 text-sm text-red-700",children:v.map((s,r)=>e.jsx("div",{children:s},r))}),e.jsx("input",{type:"text",placeholder:"Namn",value:q.name,onChange:s=>p(r=>({...r,name:s.target.value})),className:"w-full rounded-md border border-gray-300 px-3 py-2"}),e.jsx("input",{type:"email",placeholder:"E-post (valfritt)",value:q.email,onChange:s=>p(r=>({...r,email:s.target.value})),className:"w-full rounded-md border border-gray-300 px-3 py-2"}),e.jsx("input",{type:"text",placeholder:"Telefon (valfritt)",value:q.phone,onChange:s=>p(r=>({...r,phone:s.target.value})),className:"w-full rounded-md border border-gray-300 px-3 py-2"}),e.jsxs("div",{className:"flex justify-end",children:[e.jsx("button",{type:"button",onClick:()=>{g(!1),p({name:"",email:"",phone:""}),b([])},className:"mr-2 rounded-md bg-gray-200 px-3 py-1 text-sm",children:"Avbryt"}),e.jsx("button",{type:"button",disabled:c,onClick:async()=>{b([]),S(!0);try{const s=await fetch("/api/calendar/clients",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")||""},body:JSON.stringify(q)}),r=await s.json();if(!s.ok){if(r.errors){const l=Object.values(r.errors).flat();b(l)}else r.message?b([r.message]):b(["Ett fel uppstod."]);S(!1);return}m(l=>({...l,clients:[r,...l.clients]})),o("booking_client_id",r.id),g(!1),p({name:"",email:"",phone:""})}catch(s){console.error("Error creating client",s),b(["Ett fel uppstod."])}finally{S(!1)}},className:"rounded-md bg-blue-600 px-3 py-1 text-white disabled:opacity-50 text-sm",children:c?"Sparar...":"Skapa kund"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-1 block text-sm font-medium text-gray-700",children:"Tjänst"}),e.jsxs("select",{value:i.service_id,onChange:s=>o("service_id",s.target.value),className:"w-full rounded-md border border-gray-300 px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:outline-none",children:[e.jsx("option",{value:"",children:"Välj tjänst"}),_.services.map(s=>e.jsx("option",{value:s.id,children:s.name},s.id))]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"mb-1 block text-sm font-medium text-gray-700",children:"Plats"}),e.jsxs("select",{value:i.booking_location_id,onChange:s=>o("booking_location_id",s.target.value),className:"w-full rounded-md border border-gray-300 px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:outline-none",children:[e.jsx("option",{value:"",children:"Välj plats"}),_.locations.map(s=>e.jsx("option",{value:s.id,children:s.name},s.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-1 block text-sm font-medium text-gray-700",children:"Tekniker"}),e.jsxs("select",{value:i.service_user_id,onChange:s=>o("service_user_id",s.target.value),className:"w-full rounded-md border border-gray-300 px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:outline-none",children:[e.jsx("option",{value:"",children:"Välj tekniker"}),_.serviceUsers.map(s=>e.jsx("option",{value:s.id,children:s.name},s.id))]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-1 block text-sm font-medium text-gray-700",children:"Pris (SEK)"}),e.jsx("input",{type:"number",value:i.total_price,onChange:s=>o("total_price",s.target.value),className:"w-full rounded-md border border-gray-300 px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:outline-none",min:"0",step:"0.01"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-1 block text-sm font-medium text-gray-700",children:"Interna anteckningar"}),e.jsx("textarea",{value:i.notes,onChange:s=>o("notes",s.target.value),rows:3,className:"w-full rounded-md border border-gray-300 px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:outline-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-1 block text-sm font-medium text-gray-700",children:"Service anteckningar"}),e.jsx("textarea",{value:i.service_note,onChange:s=>o("service_note",s.target.value),rows:3,className:"w-full rounded-md border border-gray-300 px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:outline-none"})]}),e.jsxs("div",{className:"flex justify-between pt-4",children:[e.jsx("div",{children:u&&e.jsx("button",{type:"button",onClick:n,className:"rounded-md bg-red-600 px-4 py-2 text-white hover:bg-red-700 focus:ring-2 focus:ring-red-500 focus:outline-none",children:"Radera"})}),e.jsxs("div",{className:"space-x-3",children:[e.jsx("button",{type:"button",onClick:()=>{y(!1),x(),k(null),E(null)},className:"rounded-md bg-gray-300 px-4 py-2 text-gray-700 hover:bg-gray-400 focus:ring-2 focus:ring-gray-500 focus:outline-none",children:"Avbryt"}),e.jsx("button",{type:"submit",disabled:I,className:"rounded-md bg-blue-600 px-4 py-2 text-white hover:bg-blue-700 focus:ring-2 focus:ring-blue-500 focus:outline-none disabled:opacity-50",children:I?"Sparar...":u?"Uppdatera":"Skapa"})]})]})]})]})})]})}function ne(){const[N,y]=a.useState({clients:[],services:[],locations:[],serviceUsers:[],calendars:[]}),[j,E]=a.useState(null),[T,k]=a.useState(!1),[u,h]=a.useState({name:"",email:"",phone:""}),[_,m]=a.useState([]),[D,R]=a.useState(!1),[A,g]=a.useState(!1),[q,p]=a.useState(null),[v,b]=a.useState(null),[c,S]=a.useState(!1),[O,f]=a.useState([]),[P,F]=a.useState(""),{data:i,setData:o,post:H,put:W,delete:Z,processing:I,reset:x}=L({service_date:"",start_time:"",end_time:"",booking_client_id:"",service_id:"",booking_location_id:"",service_user_id:"",booking_calendar_id:"",status:"booked",total_price:"",notes:"",service_note:""});a.useEffect(()=>{(async()=>{try{const s=await(await fetch("/calendar/resources")).json();s&&s.length>1&&E(s[1])}catch(n){console.error("Error loading technician:",n)}})()},[]),a.useEffect(()=>{(async()=>{try{const[n,s,r,l,d]=await Promise.all([fetch("/api/calendar/clients"),fetch("/api/calendar/services"),fetch("/api/calendar/locations"),fetch("/api/calendar/service-users"),fetch("/api/calendar/calendars")]),[w,C,V,X,J]=await Promise.all([n.json(),s.json(),r.json(),l.json(),d.json()]);y({clients:w,services:C,locations:V,serviceUsers:X,calendars:J})}catch(n){console.error("Error loading dropdown data:",n)}})()},[]);const z=a.useCallback(t=>{const n=new Date(t.start),s=t.end?new Date(t.end):null;p({start:n,end:s,allDay:t.allDay,resourceId:t.resource?.id}),o(r=>({...r,service_date:n.toISOString().split("T")[0],start_time:n.toTimeString().slice(0,5),end_time:s?s.toTimeString().slice(0,5):"",service_user_id:t.resource?.id||j?.id||""})),S(!1),g(!0)},[o,j]),M=a.useCallback(t=>{const n=t.event;b({id:n.id,title:n.title,start:n.start,end:n.end,extendedProps:n.extendedProps});const s=n.extendedProps;o(r=>({...r,service_date:s.service_date||n.start?.toISOString().split("T")[0]||"",start_time:s.start_time||n.start?.toTimeString().slice(0,5)||"",end_time:s.end_time||n.end?.toTimeString().slice(0,5)||"",booking_client_id:"",service_id:"",booking_location_id:"",service_user_id:n.getResource()?.id||"",status:s.status||"booked",total_price:s.total_price||"",notes:s.notes||"",service_note:""})),S(!0),g(!0)},[o]),$=a.useCallback(async t=>{const n=t.event,s=n.start,r=n.end,l=n.getResource()?.id;try{if(!(await fetch(`/api/calendar/bookings/${n.id}/move`,{method:"PATCH",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")||""},body:JSON.stringify({start:s.toISOString(),end:r?r.toISOString():null,resource_id:l})})).ok)throw new Error("Failed to move booking");window.location.reload()}catch(d){console.error("Error moving booking:",d),t.revert()}},[]),B=a.useCallback(async t=>{const n=t.event,s=n.end;try{if(!(await fetch(`/api/calendar/bookings/${n.id}/resize`,{method:"PATCH",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")||""},body:JSON.stringify({end:s.toISOString()})})).ok)throw new Error("Failed to resize booking");window.location.reload()}catch(r){console.error("Error resizing booking:",r),t.revert()}},[]),K=a.useCallback(async t=>{t.preventDefault(),f([]),F("");try{const n=c?`/api/calendar/bookings/${v?.id}`:"/api/calendar/bookings",r=await fetch(n,{method:c?"PUT":"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")||""},body:JSON.stringify(i)}),l=await r.json();if(!r.ok){if(l.errors){const d=Object.values(l.errors).flat();f(d)}else f([l.message||`Failed to ${c?"update":"create"} booking`]);return}F(l.message||`Booking ${c?"updated":"created"} successfully`),setTimeout(()=>{g(!1),x(),b(null),p(null),window.location.reload()},1500)}catch(n){console.error(`Error ${c?"updating":"creating"} booking:`,n),f(["An unexpected error occurred. Please try again."])}},[i,c,v?.id,x]),U=a.useCallback(async()=>{if(v?.id)try{if(!(await fetch(`/api/calendar/bookings/${v.id}`,{method:"DELETE",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")||""}})).ok)throw new Error("Failed to delete booking");g(!1),x(),b(null),p(null),window.location.reload()}catch(t){console.error("Error deleting booking:",t)}},[v?.id,x]);return e.jsxs(e.Fragment,{children:[j?e.jsx(G,{className:"mx-auto my-10 max-w-300",editable:!0,selectable:!0,droppable:!0,nowIndicator:!0,navLinks:!0,locale:"sv",initialView:"timeGridWeek",firstDay:1,timeZone:"Europe/Stockholm",events:`/api/calendar/bookings?service_user_id=${j.id}`,resources:"/calendar/resources",select:z,eventClick:M,eventDrop:$,eventResize:B,headerToolbar:{left:"",center:"",right:""},slotMinTime:"07:00:00",slotMaxTime:"20:00:00",slotDuration:"01:00:00",weekends:!0,addButton:{text:`${j.title}`,click(){S(!1),p({start:new Date,end:new Date(Date.now()+3600*1e3),allDay:!1}),g(!0)}}}):e.jsx("div",{className:"mx-auto my-10 max-w-300 flex items-center justify-center h-96",children:e.jsxs("div",{className:"text-center hidden",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-600",children:"Laddar kalender..."})]})}),A&&e.jsx("div",{className:"bg-opacity-50 fixed inset-0 z-50 flex items-center justify-center bg-black",children:e.jsxs("div",{className:"max-h-[90vh] w-full max-w-2xl overflow-y-auto rounded-lg bg-white p-6",children:[e.jsx("h2",{className:"mb-4 text-xl font-bold",children:c?"Redigera Bokning":"Ny Bokning"}),P&&e.jsx("div",{className:"mb-4 rounded-md bg-green-50 p-4",children:e.jsx("div",{className:"text-green-800",children:P})}),O.length>0&&e.jsx("div",{className:"mb-4 rounded-md bg-red-50 p-4",children:e.jsx("div",{className:"text-red-800",children:O.map((t,n)=>e.jsx("div",{className:"mb-1",children:t},n))})}),e.jsxs("form",{onSubmit:K,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"mb-1 block text-sm font-medium text-gray-700",children:"Datum"}),e.jsx("input",{type:"date",value:i.service_date,onChange:t=>o("service_date",t.target.value),className:"w-full rounded-md border border-gray-300 px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:outline-none",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-1 block text-sm font-medium text-gray-700",children:"Status"}),e.jsxs("select",{value:i.status,onChange:t=>o("status",t.target.value),className:"w-full rounded-md border border-gray-300 px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:outline-none",children:[e.jsx("option",{value:"booked",children:"Bokad"}),e.jsx("option",{value:"confirmed",children:"Bekräftad"}),e.jsx("option",{value:"cancelled",children:"Inställd"}),e.jsx("option",{value:"completed",children:"Genomförd"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"mb-1 block text-sm font-medium text-gray-700",children:"Starttid"}),e.jsx("input",{type:"time",value:i.start_time,onChange:t=>o("start_time",t.target.value),className:"w-full rounded-md border border-gray-300 px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:outline-none",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-1 block text-sm font-medium text-gray-700",children:"Sluttid"}),e.jsx("input",{type:"time",value:i.end_time,onChange:t=>o("end_time",t.target.value),className:"w-full rounded-md border border-gray-300 px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:outline-none",required:!0})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"mb-1 block text-sm font-medium text-gray-700",children:"Kund"}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("select",{value:i.booking_client_id,onChange:t=>o("booking_client_id",t.target.value),className:"w-full rounded-md border border-gray-300 px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:outline-none",children:[e.jsx("option",{value:"",children:"Välj kund"}),N.clients.map(t=>e.jsx("option",{value:t.id,children:t.name},t.id))]}),e.jsx("button",{type:"button",className:"text-sm text-blue-600 hover:underline",onClick:()=>{k(t=>!t),m([])},children:"Lägg till ny kund"})]}),T&&e.jsxs("div",{className:"mt-3 space-y-2 rounded-md border border-gray-200 p-3",children:[_.length>0&&e.jsx("div",{className:"rounded-md bg-red-50 p-2 text-sm text-red-700",children:_.map((t,n)=>e.jsx("div",{children:t},n))}),e.jsx("input",{type:"text",placeholder:"Namn",value:u.name,onChange:t=>h(n=>({...n,name:t.target.value})),className:"w-full rounded-md border border-gray-300 px-3 py-2"}),e.jsx("input",{type:"email",placeholder:"E-post (valfritt)",value:u.email,onChange:t=>h(n=>({...n,email:t.target.value})),className:"w-full rounded-md border border-gray-300 px-3 py-2"}),e.jsx("input",{type:"text",placeholder:"Telefon (valfritt)",value:u.phone,onChange:t=>h(n=>({...n,phone:t.target.value})),className:"w-full rounded-md border border-gray-300 px-3 py-2"}),e.jsxs("div",{className:"flex justify-end",children:[e.jsx("button",{type:"button",onClick:()=>{k(!1),h({name:"",email:"",phone:""}),m([])},className:"mr-2 rounded-md bg-gray-200 px-3 py-1 text-sm",children:"Avbryt"}),e.jsx("button",{type:"button",disabled:D,onClick:async()=>{m([]),R(!0);try{const t=await fetch("/api/calendar/clients",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")||""},body:JSON.stringify(u)}),n=await t.json();if(!t.ok){if(n.errors){const s=Object.values(n.errors).flat();m(s)}else n.message?m([n.message]):m(["Ett fel uppstod."]);R(!1);return}y(s=>({...s,clients:[n,...s.clients]})),o("booking_client_id",n.id),k(!1),h({name:"",email:"",phone:""})}catch(t){console.error("Error creating client",t),m(["Ett fel uppstod."])}finally{R(!1)}},className:"rounded-md bg-blue-600 px-3 py-1 text-white disabled:opacity-50 text-sm",children:D?"Sparar...":"Skapa kund"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-1 block text-sm font-medium text-gray-700",children:"Tjänst"}),e.jsxs("select",{value:i.service_id,onChange:t=>o("service_id",t.target.value),className:"w-full rounded-md border border-gray-300 px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:outline-none",children:[e.jsx("option",{value:"",children:"Välj tjänst"}),N.services.map(t=>e.jsx("option",{value:t.id,children:t.name},t.id))]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"mb-1 block text-sm font-medium text-gray-700",children:"Plats"}),e.jsxs("select",{value:i.booking_location_id,onChange:t=>o("booking_location_id",t.target.value),className:"w-full rounded-md border border-gray-300 px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:outline-none",children:[e.jsx("option",{value:"",children:"Välj plats"}),N.locations.map(t=>e.jsx("option",{value:t.id,children:t.name},t.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-1 block text-sm font-medium text-gray-700",children:"Tekniker"}),e.jsxs("select",{value:i.service_user_id,onChange:t=>o("service_user_id",t.target.value),className:"w-full rounded-md border border-gray-300 px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:outline-none",children:[e.jsx("option",{value:"",children:"Välj tekniker"}),N.serviceUsers.map(t=>e.jsx("option",{value:t.id,children:t.name},t.id))]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-1 block text-sm font-medium text-gray-700",children:"Pris (SEK)"}),e.jsx("input",{type:"number",value:i.total_price,onChange:t=>o("total_price",t.target.value),className:"w-full rounded-md border border-gray-300 px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:outline-none",min:"0",step:"0.01"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-1 block text-sm font-medium text-gray-700",children:"Interna anteckningar"}),e.jsx("textarea",{value:i.notes,onChange:t=>o("notes",t.target.value),rows:3,className:"w-full rounded-md border border-gray-300 px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:outline-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-1 block text-sm font-medium text-gray-700",children:"Service anteckningar"}),e.jsx("textarea",{value:i.service_note,onChange:t=>o("service_note",t.target.value),rows:3,className:"w-full rounded-md border border-gray-300 px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:outline-none"})]}),e.jsxs("div",{className:"flex justify-between pt-4",children:[e.jsx("div",{children:c&&e.jsx("button",{type:"button",onClick:U,className:"rounded-md bg-red-600 px-4 py-2 text-white hover:bg-red-700 focus:ring-2 focus:ring-red-500 focus:outline-none",children:"Radera"})}),e.jsxs("div",{className:"space-x-3",children:[e.jsx("button",{type:"button",onClick:()=>{g(!1),x(),b(null),p(null)},className:"rounded-md bg-gray-300 px-4 py-2 text-gray-700 hover:bg-gray-400 focus:ring-2 focus:ring-gray-500 focus:outline-none",children:"Avbryt"}),e.jsx("button",{type:"submit",disabled:I,className:"rounded-md bg-blue-600 px-4 py-2 text-white hover:bg-blue-700 focus:ring-2 focus:ring-blue-500 focus:outline-none disabled:opacity-50",children:I?"Sparar...":c?"Uppdatera":"Skapa"})]})]})]})]})})]})}function re(){const[N,y]=a.useState({clients:[],services:[],locations:[],serviceUsers:[],calendars:[]}),[j,E]=a.useState(null),[T,k]=a.useState(!1),[u,h]=a.useState({name:"",email:"",phone:""}),[_,m]=a.useState([]),[D,R]=a.useState(!1),[A,g]=a.useState(!1),[q,p]=a.useState(null),[v,b]=a.useState(null),[c,S]=a.useState(!1),[O,f]=a.useState([]),[P,F]=a.useState(""),{data:i,setData:o,post:H,put:W,delete:Z,processing:I,reset:x}=L({service_date:"",start_time:"",end_time:"",booking_client_id:"",service_id:"",booking_location_id:"",service_user_id:"",booking_calendar_id:"",status:"booked",total_price:"",notes:"",service_note:""});a.useEffect(()=>{(async()=>{try{const s=await(await fetch("/calendar/resources")).json();s&&s.length>2&&E(s[2])}catch(n){console.error("Error loading technician:",n)}})()},[]),a.useEffect(()=>{(async()=>{try{const[n,s,r,l,d]=await Promise.all([fetch("/api/calendar/clients"),fetch("/api/calendar/services"),fetch("/api/calendar/locations"),fetch("/api/calendar/service-users"),fetch("/api/calendar/calendars")]),[w,C,V,X,J]=await Promise.all([n.json(),s.json(),r.json(),l.json(),d.json()]);y({clients:w,services:C,locations:V,serviceUsers:X,calendars:J})}catch(n){console.error("Error loading dropdown data:",n)}})()},[]);const z=a.useCallback(t=>{const n=new Date(t.start),s=t.end?new Date(t.end):null;p({start:n,end:s,allDay:t.allDay,resourceId:t.resource?.id}),o(r=>({...r,service_date:n.toISOString().split("T")[0],start_time:n.toTimeString().slice(0,5),end_time:s?s.toTimeString().slice(0,5):"",service_user_id:t.resource?.id||j?.id||""})),S(!1),g(!0)},[o,j]),M=a.useCallback(t=>{const n=t.event;b({id:n.id,title:n.title,start:n.start,end:n.end,extendedProps:n.extendedProps});const s=n.extendedProps;o(r=>({...r,service_date:s.service_date||n.start?.toISOString().split("T")[0]||"",start_time:s.start_time||n.start?.toTimeString().slice(0,5)||"",end_time:s.end_time||n.end?.toTimeString().slice(0,5)||"",booking_client_id:"",service_id:"",booking_location_id:"",service_user_id:n.getResource()?.id||"",status:s.status||"booked",total_price:s.total_price||"",notes:s.notes||"",service_note:""})),S(!0),g(!0)},[o]),$=a.useCallback(async t=>{const n=t.event,s=n.start,r=n.end,l=n.getResource()?.id;try{if(!(await fetch(`/api/calendar/bookings/${n.id}/move`,{method:"PATCH",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")||""},body:JSON.stringify({start:s.toISOString(),end:r?r.toISOString():null,resource_id:l})})).ok)throw new Error("Failed to move booking");window.location.reload()}catch(d){console.error("Error moving booking:",d),t.revert()}},[]),B=a.useCallback(async t=>{const n=t.event,s=n.end;try{if(!(await fetch(`/api/calendar/bookings/${n.id}/resize`,{method:"PATCH",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")||""},body:JSON.stringify({end:s.toISOString()})})).ok)throw new Error("Failed to resize booking");window.location.reload()}catch(r){console.error("Error resizing booking:",r),t.revert()}},[]),K=a.useCallback(async t=>{t.preventDefault(),f([]),F("");try{const n=c?`/api/calendar/bookings/${v?.id}`:"/api/calendar/bookings",r=await fetch(n,{method:c?"PUT":"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")||""},body:JSON.stringify(i)}),l=await r.json();if(!r.ok){if(l.errors){const d=Object.values(l.errors).flat();f(d)}else f([l.message||`Failed to ${c?"update":"create"} booking`]);return}F(l.message||`Booking ${c?"updated":"created"} successfully`),setTimeout(()=>{g(!1),x(),b(null),p(null),window.location.reload()},1500)}catch(n){console.error(`Error ${c?"updating":"creating"} booking:`,n),f(["An unexpected error occurred. Please try again."])}},[i,c,v?.id,x]),U=a.useCallback(async()=>{if(v?.id)try{if(!(await fetch(`/api/calendar/bookings/${v.id}`,{method:"DELETE",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")||""}})).ok)throw new Error("Failed to delete booking");g(!1),x(),b(null),p(null),window.location.reload()}catch(t){console.error("Error deleting booking:",t)}},[v?.id,x]);return e.jsxs(e.Fragment,{children:[j?e.jsx(G,{className:"mx-auto my-10 max-w-300",editable:!0,selectable:!0,droppable:!0,nowIndicator:!0,navLinks:!0,locale:"sv",initialView:"timeGridWeek",firstDay:1,timeZone:"Europe/Stockholm",events:`/api/calendar/bookings?service_user_id=${j.id}`,resources:"/calendar/resources",select:z,eventClick:M,eventDrop:$,eventResize:B,headerToolbar:{left:"",center:"",right:""},slotMinTime:"07:00:00",slotMaxTime:"20:00:00",slotDuration:"01:00:00",weekends:!0,addButton:{text:`${j.title}`,click(){S(!1),p({start:new Date,end:new Date(Date.now()+3600*1e3),allDay:!1}),g(!0)}}}):e.jsx("div",{className:"mx-auto my-10 max-w-300 flex items-center justify-center h-96",children:e.jsxs("div",{className:"text-center hidden",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-600",children:"Laddar kalender..."})]})}),A&&e.jsx("div",{className:"bg-opacity-50 fixed inset-0 z-50 flex items-center justify-center bg-black",children:e.jsxs("div",{className:"max-h-[90vh] w-full max-w-2xl overflow-y-auto rounded-lg bg-white p-6",children:[e.jsx("h2",{className:"mb-4 text-xl font-bold",children:c?"Redigera Bokning":"Ny Bokning"}),P&&e.jsx("div",{className:"mb-4 rounded-md bg-green-50 p-4",children:e.jsx("div",{className:"text-green-800",children:P})}),O.length>0&&e.jsx("div",{className:"mb-4 rounded-md bg-red-50 p-4",children:e.jsx("div",{className:"text-red-800",children:O.map((t,n)=>e.jsx("div",{className:"mb-1",children:t},n))})}),e.jsxs("form",{onSubmit:K,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"mb-1 block text-sm font-medium text-gray-700",children:"Datum"}),e.jsx("input",{type:"date",value:i.service_date,onChange:t=>o("service_date",t.target.value),className:"w-full rounded-md border border-gray-300 px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:outline-none",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-1 block text-sm font-medium text-gray-700",children:"Status"}),e.jsxs("select",{value:i.status,onChange:t=>o("status",t.target.value),className:"w-full rounded-md border border-gray-300 px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:outline-none",children:[e.jsx("option",{value:"booked",children:"Bokad"}),e.jsx("option",{value:"confirmed",children:"Bekräftad"}),e.jsx("option",{value:"cancelled",children:"Inställd"}),e.jsx("option",{value:"completed",children:"Genomförd"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"mb-1 block text-sm font-medium text-gray-700",children:"Starttid"}),e.jsx("input",{type:"time",value:i.start_time,onChange:t=>o("start_time",t.target.value),className:"w-full rounded-md border border-gray-300 px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:outline-none",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-1 block text-sm font-medium text-gray-700",children:"Sluttid"}),e.jsx("input",{type:"time",value:i.end_time,onChange:t=>o("end_time",t.target.value),className:"w-full rounded-md border border-gray-300 px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:outline-none",required:!0})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"mb-1 block text-sm font-medium text-gray-700",children:"Kund"}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("select",{value:i.booking_client_id,onChange:t=>o("booking_client_id",t.target.value),className:"w-full rounded-md border border-gray-300 px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:outline-none",children:[e.jsx("option",{value:"",children:"Välj kund"}),N.clients.map(t=>e.jsx("option",{value:t.id,children:t.name},t.id))]}),e.jsx("button",{type:"button",className:"text-sm text-blue-600 hover:underline",onClick:()=>{k(t=>!t),m([])},children:"Lägg till ny kund"})]}),T&&e.jsxs("div",{className:"mt-3 space-y-2 rounded-md border border-gray-200 p-3",children:[_.length>0&&e.jsx("div",{className:"rounded-md bg-red-50 p-2 text-sm text-red-700",children:_.map((t,n)=>e.jsx("div",{children:t},n))}),e.jsx("input",{type:"text",placeholder:"Namn",value:u.name,onChange:t=>h(n=>({...n,name:t.target.value})),className:"w-full rounded-md border border-gray-300 px-3 py-2"}),e.jsx("input",{type:"email",placeholder:"E-post (valfritt)",value:u.email,onChange:t=>h(n=>({...n,email:t.target.value})),className:"w-full rounded-md border border-gray-300 px-3 py-2"}),e.jsx("input",{type:"text",placeholder:"Telefon (valfritt)",value:u.phone,onChange:t=>h(n=>({...n,phone:t.target.value})),className:"w-full rounded-md border border-gray-300 px-3 py-2"}),e.jsxs("div",{className:"flex justify-end",children:[e.jsx("button",{type:"button",onClick:()=>{k(!1),h({name:"",email:"",phone:""}),m([])},className:"mr-2 rounded-md bg-gray-200 px-3 py-1 text-sm",children:"Avbryt"}),e.jsx("button",{type:"button",disabled:D,onClick:async()=>{m([]),R(!0);try{const t=await fetch("/api/calendar/clients",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")||""},body:JSON.stringify(u)}),n=await t.json();if(!t.ok){if(n.errors){const s=Object.values(n.errors).flat();m(s)}else n.message?m([n.message]):m(["Ett fel uppstod."]);R(!1);return}y(s=>({...s,clients:[n,...s.clients]})),o("booking_client_id",n.id),k(!1),h({name:"",email:"",phone:""})}catch(t){console.error("Error creating client",t),m(["Ett fel uppstod."])}finally{R(!1)}},className:"rounded-md bg-blue-600 px-3 py-1 text-white disabled:opacity-50 text-sm",children:D?"Sparar...":"Skapa kund"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-1 block text-sm font-medium text-gray-700",children:"Tjänst"}),e.jsxs("select",{value:i.service_id,onChange:t=>o("service_id",t.target.value),className:"w-full rounded-md border border-gray-300 px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:outline-none",children:[e.jsx("option",{value:"",children:"Välj tjänst"}),N.services.map(t=>e.jsx("option",{value:t.id,children:t.name},t.id))]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"mb-1 block text-sm font-medium text-gray-700",children:"Plats"}),e.jsxs("select",{value:i.booking_location_id,onChange:t=>o("booking_location_id",t.target.value),className:"w-full rounded-md border border-gray-300 px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:outline-none",children:[e.jsx("option",{value:"",children:"Välj plats"}),N.locations.map(t=>e.jsx("option",{value:t.id,children:t.name},t.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-1 block text-sm font-medium text-gray-700",children:"Tekniker"}),e.jsxs("select",{value:i.service_user_id,onChange:t=>o("service_user_id",t.target.value),className:"w-full rounded-md border border-gray-300 px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:outline-none",children:[e.jsx("option",{value:"",children:"Välj tekniker"}),N.serviceUsers.map(t=>e.jsx("option",{value:t.id,children:t.name},t.id))]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-1 block text-sm font-medium text-gray-700",children:"Pris (SEK)"}),e.jsx("input",{type:"number",value:i.total_price,onChange:t=>o("total_price",t.target.value),className:"w-full rounded-md border border-gray-300 px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:outline-none",min:"0",step:"0.01"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-1 block text-sm font-medium text-gray-700",children:"Interna anteckningar"}),e.jsx("textarea",{value:i.notes,onChange:t=>o("notes",t.target.value),rows:3,className:"w-full rounded-md border border-gray-300 px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:outline-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-1 block text-sm font-medium text-gray-700",children:"Service anteckningar"}),e.jsx("textarea",{value:i.service_note,onChange:t=>o("service_note",t.target.value),rows:3,className:"w-full rounded-md border border-gray-300 px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:outline-none"})]}),e.jsxs("div",{className:"flex justify-between pt-4",children:[e.jsx("div",{children:c&&e.jsx("button",{type:"button",onClick:U,className:"rounded-md bg-red-600 px-4 py-2 text-white hover:bg-red-700 focus:ring-2 focus:ring-red-500 focus:outline-none",children:"Radera"})}),e.jsxs("div",{className:"space-x-3",children:[e.jsx("button",{type:"button",onClick:()=>{g(!1),x(),b(null),p(null)},className:"rounded-md bg-gray-300 px-4 py-2 text-gray-700 hover:bg-gray-400 focus:ring-2 focus:ring-gray-500 focus:outline-none",children:"Avbryt"}),e.jsx("button",{type:"submit",disabled:I,className:"rounded-md bg-blue-600 px-4 py-2 text-white hover:bg-blue-700 focus:ring-2 focus:ring-blue-500 focus:outline-none disabled:opacity-50",children:I?"Sparar...":c?"Uppdatera":"Skapa"})]})]})]})]})})]})}export{se as E,ne as a,re as b};
