import{r as x,j as e,G as rt,c as xs}from"./app-De-pmVM3.js";import{b as P,m as Te,g as gs,c as Dt,d as Nt,f as vs,h as bs,i as ys,j as G,t as St,F as je,k as De,P as ws,l as js,n as Ne,C as Ze,o as Ds,p as Ns,S as ne,q as nt,r as Se,u as Ss,_ as ks,v as it,w as ot,x as Ms,y as zs,z as Es,A as ce,B as kt,D as Mt,E as zt,G as Et,H as $e,T as Cs,I as K,s as he,e as ie,J as Ts,K as _s,L as Je,M as Ct,N as lt,O as Z,Q as F,R as Ve,U as ke,V as Hs,W as Rs,X as W,Y as ct,Z as dt,$ as Os,a0 as As,a as Ke,a1 as Bs,a2 as Is,a3 as Fs,a4 as Tt,a5 as j,a6 as Ws,a7 as Ls,a8 as Ps,a9 as $s,aa as Vs,ab as Us,ac as Ys,ad as Xs,ae as Gs,af as qs,ag as Zs,ah as Js,ai as Ks,aj as Qs,ak as _t,al as ea,am as Ht,an as ta,ao as sa,ap as Ue,aq as Rt,ar as Ot,as as aa,at as At,au as ra,av as fe,aw as na}from"./switch-3pypaVK_.js";import{R as ia,T as oa,C as la,P as ca,a as da,X as Bt,b as ua,D as ha,O as ma,h as Me,i as Ye,j as ze,g as It,f as Ft,k as Wt,l as Lt,m as Pt,n as re,o as Oe,p as Ae,q as Be,r as xe,M as pa,s as ut,t as te}from"./app-layout-Dxf_lvi9.js";import{d as V,B as L,c as S,a as oe,f as ht}from"./button-BdDmD3PX.js";import{D as fa,a as xa,b as ga,g as va,c as ba,f as ya}from"./dialog-yQCJy72m.js";import{I as wa}from"./input-CoQm3KMS.js";import{B as ja}from"./badge-B_aCqkrB.js";import{S as Da}from"./separator-BvO7FVTI.js";import{u as Na,a as Sa,c as ka,C as $t}from"./index-B6sbAKco.js";import{T as Ma,a as za,b as Ea}from"./tabs-D1-TJ5nh.js";const Ca=[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M16 2v4",key:"4m81vk"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M17 14h-6",key:"bkmgh3"}],["path",{d:"M13 18H7",key:"bb0bb7"}],["path",{d:"M7 14h.01",key:"1qa3f1"}],["path",{d:"M17 18h.01",key:"1bdyru"}]],Ta=V("calendar-range",Ca);const _a=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M12 3v18",key:"108xh3"}]],Ha=V("columns-2",_a);const Ra=[["circle",{cx:"12.1",cy:"12.1",r:"1",key:"18d7e5"}]],Oa=V("dot",Ra);const Aa=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],Ba=V("funnel",Aa);const Ia=[["path",{d:"M12 3v18",key:"108xh3"}],["path",{d:"M3 12h18",key:"1i2n21"}],["rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",key:"h1oib"}]],Fa=V("grid-2x2",Ia);const Wa=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]],La=V("grid-3x3",Wa);const Pa=[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]],$a=V("palette",Pa);const Va=[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]],Ua=V("refresh-ccw",Va);const Ya=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 3v1",key:"1asbbs"}],["path",{d:"M12 20v1",key:"1wcdkc"}],["path",{d:"M3 12h1",key:"lp3yf2"}],["path",{d:"M20 12h1",key:"1vloll"}],["path",{d:"m18.364 5.636-.707.707",key:"1hakh0"}],["path",{d:"m6.343 17.657-.707.707",key:"18m9nf"}],["path",{d:"m5.636 5.636.707.707",key:"1xv1c5"}],["path",{d:"m17.657 17.657.707.707",key:"vl76zb"}]],Xa=V("sun-medium",Ya);const Ga=[["path",{d:"M21 5H3",key:"1fi0y6"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M17 19H3",key:"z6ezky"}]],qa=V("text-align-start",Ga);const Za=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Vt=V("user",Za);function Ja(s,a){return P(s,a?.in).getDay()===0}function Ee(s,a,t){const r=P(s,t?.in);return r.setTime(r.getTime()+a*Te),r}function Ka(s,a,t){const[r,n]=[+P(s.start,t?.in),+P(s.end,t?.in)].sort((o,d)=>o-d),[i,l]=[+P(a.start,t?.in),+P(a.end,t?.in)].sort((o,d)=>o-d);return r<l&&i<n}function Qa(s){return a=>{const r=(s?Math[s]:Math.trunc)(a);return r===0?0:r}}function er(s,a){return+P(s)-+P(a)}function Qe(s,a,t){const r=er(s,a)/Te;return Qa(t?.roundingMethod)(r)}function tr(){return Object.assign({},gs())}function v(s,a){const t=()=>Dt(a?.in,NaN),n=nr(s);let i;if(n.date){const c=ir(n.date,2);i=or(c.restDateString,c.year)}if(!i||isNaN(+i))return t();const l=+i;let o=0,d;if(n.time&&(o=lr(n.time),isNaN(o)))return t();if(n.timezone){if(d=cr(n.timezone),isNaN(d))return t()}else{const c=new Date(l+o),u=P(0,a?.in);return u.setFullYear(c.getUTCFullYear(),c.getUTCMonth(),c.getUTCDate()),u.setHours(c.getUTCHours(),c.getUTCMinutes(),c.getUTCSeconds(),c.getUTCMilliseconds()),u}return P(l+o+d,a?.in)}const ge={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},sr=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,ar=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,rr=/^([+-])(\d{2})(?::?(\d{2}))?$/;function nr(s){const a={},t=s.split(ge.dateTimeDelimiter);let r;if(t.length>2)return a;if(/:/.test(t[0])?r=t[0]:(a.date=t[0],r=t[1],ge.timeZoneDelimiter.test(a.date)&&(a.date=s.split(ge.timeZoneDelimiter)[0],r=s.substr(a.date.length,s.length))),r){const n=ge.timezone.exec(r);n?(a.time=r.replace(n[1],""),a.timezone=n[1]):a.time=r}return a}function ir(s,a){const t=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+a)+"})|(\\d{2}|[+-]\\d{"+(2+a)+"})$)"),r=s.match(t);if(!r)return{year:NaN,restDateString:""};const n=r[1]?parseInt(r[1]):null,i=r[2]?parseInt(r[2]):null;return{year:i===null?n:i*100,restDateString:s.slice((r[1]||r[2]).length)}}function or(s,a){if(a===null)return new Date(NaN);const t=s.match(sr);if(!t)return new Date(NaN);const r=!!t[4],n=de(t[1]),i=de(t[2])-1,l=de(t[3]),o=de(t[4]),d=de(t[5])-1;if(r)return pr(a,o,d)?dr(a,o,d):new Date(NaN);{const c=new Date(0);return!hr(a,i,l)||!mr(a,n)?new Date(NaN):(c.setUTCFullYear(a,i,Math.max(n,l)),c)}}function de(s){return s?parseInt(s):1}function lr(s){const a=s.match(ar);if(!a)return NaN;const t=Ie(a[1]),r=Ie(a[2]),n=Ie(a[3]);return fr(t,r,n)?t*Nt+r*Te+n*1e3:NaN}function Ie(s){return s&&parseFloat(s.replace(",","."))||0}function cr(s){if(s==="Z")return 0;const a=s.match(rr);if(!a)return 0;const t=a[1]==="+"?-1:1,r=parseInt(a[2]),n=a[3]&&parseInt(a[3])||0;return xr(r,n)?t*(r*Nt+n*Te):NaN}function dr(s,a,t){const r=new Date(0);r.setUTCFullYear(s,0,4);const n=r.getUTCDay()||7,i=(a-1)*7+t+1-n;return r.setUTCDate(r.getUTCDate()+i),r}const ur=[31,null,31,30,31,30,31,31,30,31,30,31];function Ut(s){return s%400===0||s%4===0&&s%100!==0}function hr(s,a,t){return a>=0&&a<=11&&t>=1&&t<=(ur[a]||(Ut(s)?29:28))}function mr(s,a){return a>=1&&a<=(Ut(s)?366:365)}function pr(s,a,t){return a>=1&&a<=53&&t>=0&&t<=6}function fr(s,a,t){return s===24?a===0&&t===0:t>=0&&t<60&&a>=0&&a<60&&s>=0&&s<25}function xr(s,a){return a>=0&&a<=59}function gr(s,a,t){let r=P(s,t?.in);return isNaN(+r)?Dt(s,NaN):(a.year!=null&&r.setFullYear(a.year),a.month!=null&&(r=vs(r,a.month)),a.date!=null&&r.setDate(a.date),a.hours!=null&&r.setHours(a.hours),a.minutes!=null&&r.setMinutes(a.minutes),a.seconds!=null&&r.setSeconds(a.seconds),a.milliseconds!=null&&r.setMilliseconds(a.milliseconds),r)}const Xe={initial:{opacity:0},animate:{opacity:1},exit:{opacity:0}},vr={initial:{x:-20,opacity:0},animate:{x:0,opacity:1},exit:{x:20,opacity:0}},br={initial:{x:20,opacity:0},animate:{x:0,opacity:1},exit:{x:-20,opacity:0}},k={type:"spring",stiffness:200,damping:20},ue={animate:{transition:{staggerChildren:.1}}},Ge={hover:{scale:1.05},tap:{scale:.95}};function yr({defaultIsOpen:s=!1}={}){const[a,t]=x.useState(s);return{onOpen:()=>t(!0),onClose:()=>t(!1),isOpen:a,onToggle:()=>t(l=>!l)}}const wr=(s,a)=>{const t=()=>{if(typeof window>"u")return a;try{const l=window.localStorage.getItem(s);return l?JSON.parse(l):a}catch(l){return console.warn(`Error reading localStorage key "${s}":`,l),a}},[r,n]=x.useState(t);return[r,l=>{try{const o=l instanceof Function?l(r):l;n(o),typeof window<"u"&&window.localStorage.setItem(s,JSON.stringify(o))}catch(o){console.warn(`Error setting localStorage key "${s}":`,o)}}]};function jr(s){const[a,t]=x.useState(!1);return x.useEffect(()=>{const r=window.matchMedia(s);r.matches!==a&&t(r.matches);const n=()=>t(r.matches);return r.addEventListener("change",n),()=>r.removeEventListener("change",n)},[a,s]),a}function mt(s,a,t){const r=tr(),n=Sr(s,t.timeZone,t.locale??r.locale);return"formatToParts"in n?Dr(n,a):Nr(n,a)}function Dr(s,a){const t=s.formatToParts(a);for(let r=t.length-1;r>=0;--r)if(t[r].type==="timeZoneName")return t[r].value}function Nr(s,a){const t=s.format(a).replace(/\u200E/g,""),r=/ [\w-+ ]+$/.exec(t);return r?r[0].substr(1):""}function Sr(s,a,t){return new Intl.DateTimeFormat(t?[t.code,"en-US"]:void 0,{timeZone:a,timeZoneName:s})}const kr=60*1e3,Mr={X:function(s,a,t){const r=Fe(t.timeZone,s);if(r===0)return"Z";switch(a){case"X":return pt(r);case"XXXX":case"XX":return ae(r);default:return ae(r,":")}},x:function(s,a,t){const r=Fe(t.timeZone,s);switch(a){case"x":return pt(r);case"xxxx":case"xx":return ae(r);default:return ae(r,":")}},O:function(s,a,t){const r=Fe(t.timeZone,s);switch(a){case"O":case"OO":case"OOO":return"GMT"+zr(r,":");default:return"GMT"+ae(r,":")}},z:function(s,a,t){switch(a){case"z":case"zz":case"zzz":return mt("short",s,t);default:return mt("long",s,t)}}};function Fe(s,a){const t=s?bs(s,a,!0)/kr:a?.getTimezoneOffset()??0;if(Number.isNaN(t))throw new RangeError("Invalid time zone specified: "+s);return t}function Ce(s,a){const t=s<0?"-":"";let r=Math.abs(s).toString();for(;r.length<a;)r="0"+r;return t+r}function ae(s,a=""){const t=s>0?"-":"+",r=Math.abs(s),n=Ce(Math.floor(r/60),2),i=Ce(Math.floor(r%60),2);return t+n+a+i}function pt(s,a){return s%60===0?(s>0?"-":"+")+Ce(Math.abs(s)/60,2):ae(s,a)}function zr(s,a=""){const t=s>0?"-":"+",r=Math.abs(s),n=Math.floor(r/60),i=r%60;return i===0?t+String(n):t+String(n)+a+Ce(i,2)}const Er=/([xXOz]+)|''|'(''|[^'])+('|$)/g;function Cr(s,a,t={}){a=String(a);const r=a.match(Er);if(r){const n=ys(t.originalDate||s,t);a=r.reduce(function(i,l){if(l[0]==="'")return i;const o=i.indexOf(l),d=i[o-1]==="'",c=i.replace(l,"'"+Mr[l[0]](n,l,t)+"'");return d?c.substring(0,o-1)+c.substring(o+1):c},a)}return G(s,a,t)}function Yt(s,a,t,r){return r={...r,timeZone:a,originalDate:s},Cr(St(s,a,{timeZone:r.timeZone}),t,r)}const We={badgeVariant:"colored",view:"day",use24HourFormat:!0,agendaModeGroupBy:"date",timezone:"Europe/Stockholm",startHour:7,endHour:17},Xt=x.createContext({});function Tr({children:s,users:a,events:t,badge:r="colored",view:n="day"}){const[i,l]=wr("calendar-settings",{...We,badgeVariant:r,view:n}),o={...i,startHour:i.startHour??We.startHour,endHour:i.endHour??We.endHour},[d,c]=x.useState(o.badgeVariant),[u,h]=x.useState(o.view),[f,p]=x.useState(o.use24HourFormat),[g,m]=x.useState(o.agendaModeGroupBy),[b,N]=x.useState(o.timezone),[z,w]=x.useState(o.startHour),[D,R]=x.useState(o.endHour),[_,H]=x.useState(new Date),[A,C]=x.useState("all"),[B,pe]=x.useState([]),[q,J]=x.useState(t||[]),[le,I]=x.useState(t||[]),ms={selectedDate:_,setSelectedDate:y=>{y&&H(y)},selectedUserId:A,setSelectedUserId:C,badgeVariant:d,setBadgeVariant:y=>{c(y),l({...o,badgeVariant:y})},users:a,selectedColors:B,filterEventsBySelectedColors:y=>{const O=B.includes(y)?B.filter(X=>X!==y):[...B,y];if(O.length>0){const X=q.filter(ps=>{const fs=ps.color||"blue";return O.includes(fs)});I(X)}else I(q);pe(O)},filterEventsBySelectedUser:y=>{if(C(y),y==="all")I(q);else{const T=q.filter(O=>O.user.id===y);I(T)}},events:le,view:u,use24HourFormat:f,toggleTimeFormat:()=>{const y=!f;p(y),l({...o,use24HourFormat:y})},setView:y=>{h(y),l({...o,view:y})},agendaModeGroupBy:g,setAgendaModeGroupBy:y=>{m(y),l({...o,agendaModeGroupBy:y})},timezone:b,setTimezone:y=>{N(y),l({...o,timezone:y})},startHour:z,endHour:D,setWorkingHours:(y,T)=>{w(y),R(T),l({...o,startHour:y,endHour:T})},formatDate:(y,T)=>{const O=typeof y=="string"?new Date(y):y;return Yt(O,b,T)},addEvent:y=>{J(T=>[...T,y]),I(T=>[...T,y])},updateEvent:y=>{const T={...y,startDate:new Date(y.startDate).toISOString(),endDate:new Date(y.endDate).toISOString()};J(O=>O.map(X=>X.id===y.id?T:X)),I(O=>O.map(X=>X.id===y.id?T:X))},removeEvent:y=>{J(T=>T.filter(O=>O.id!==y)),I(T=>T.filter(O=>O.id!==y))},clearFilter:()=>{I(q),pe([]),C("all")}};return e.jsx(Xt.Provider,{value:ms,children:s})}function M(){const s=x.useContext(Xt);if(!s)throw new Error("useCalendar must be used within a CalendarProvider.");return s}function ft({form:s,field:a}){const{use24HourFormat:t}=M();function r(i){i&&s.setValue(a.name,i)}function n(i,l){const o=s.getValues(a.name)||new Date,d=new Date(o);if(i==="hour")d.setHours(parseInt(l,10));else if(i==="minute")d.setMinutes(parseInt(l,10));else if(i==="ampm"){const c=d.getHours();l==="AM"&&c>=12?d.setHours(c-12):l==="PM"&&c<12&&d.setHours(c+12)}s.setValue(a.name,d)}return e.jsxs(je,{className:"flex flex-col",children:[e.jsx(De,{children:a.name==="startDate"?"Start Date":"End Date"}),e.jsxs(ws,{modal:!0,children:[e.jsx(js,{asChild:!0,children:e.jsx(Ne,{children:e.jsxs(L,{variant:"outline",className:S("w-full pl-3 text-left font-normal",!a.value&&"text-muted-foreground"),children:[a.value?G(a.value,t?"MM/dd/yyyy HH:mm":"MM/dd/yyyy hh:mm aa"):e.jsx("span",{children:"MM/DD/YYYY hh:mm aa"}),e.jsx(Ze,{className:"ml-auto h-4 w-4 opacity-50"})]})})}),e.jsx(Ds,{className:"w-auto p-0",children:e.jsxs("div",{className:"sm:flex",children:[e.jsx(Ns,{mode:"single",selected:a.value,onSelect:r,initialFocus:!0}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:h-[300px] divide-y sm:divide-y-0 sm:divide-x",children:[e.jsxs(ne,{className:"w-64 sm:w-auto",children:[e.jsx("div",{className:"flex sm:flex-col p-2",children:Array.from({length:t?24:12},(i,l)=>l).map(i=>e.jsx(L,{size:"icon",variant:a.value&&a.value.getHours()%(t?24:12)===i%(t?24:12)?"default":"ghost",className:"sm:w-full shrink-0 aspect-square",onClick:()=>n("hour",i.toString()),children:i.toString().padStart(2,"0")},i))}),e.jsx(nt,{orientation:"horizontal",className:"sm:hidden"})]}),e.jsxs(ne,{className:"w-64 sm:w-auto",children:[e.jsx("div",{className:"flex sm:flex-col p-2",children:Array.from({length:12},(i,l)=>l*5).map(i=>e.jsx(L,{size:"icon",variant:a.value&&a.value.getMinutes()===i?"default":"ghost",className:"sm:w-full shrink-0 aspect-square",onClick:()=>n("minute",i.toString()),children:i.toString().padStart(2,"0")},i))}),e.jsx(nt,{orientation:"horizontal",className:"sm:hidden"})]})]})]})})]}),e.jsx(Se,{})]})}const Gt=ia,qt=oa,Zt=la,_r=ca,Hr=s=>e.jsx(ma,{...s,className:S("fixed inset-0 z-50 bg-background/80 backdrop-blur-sm","data-[state=open]:animate-in data-[state=closed]:animate-out","data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s.className)}),Rr=oe(S("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out","data-[state=open]:animate-in data-[state=closed]:animate-out","data-[state=closed]:duration-300 data-[state=open]:duration-500 overflow-y-auto","lg:left-[50%] lg:top-[50%] lg:w-full lg:max-w-lg lg:translate-x-[-50%] lg:translate-y-[-50%]","lg:border lg:duration-200 lg:data-[state=open]:animate-in lg:data-[state=closed]:animate-out","lg:data-[state=closed]:fade-out-0 lg:data-[state=open]:fade-in-0","lg:data-[state=closed]:zoom-out-95 lg:data-[state=open]:zoom-in-95 lg:rounded-xl"),{variants:{side:{top:"inset-x-0 top-0 border-b rounded-b-xl max-h-[80dvh] lg:h-fit data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t lg:h-fit max-h-[80dvh] rounded-t-xl data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full lg:h-fit w-3/4 border-r rounded-r-xl data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full lg:h-fit w-3/4 border-l rounded-l-xl data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"bottom"}}),Jt=({side:s="bottom",className:a,children:t,...r})=>e.jsxs(_r,{children:[e.jsx(Hr,{}),e.jsxs(da,{...r,"aria-describedby":"responsive-modal-description",className:S(Rr({side:s}),a),children:[t,e.jsxs(Zt,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[e.jsx(Bt,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Close"})]})]})]}),Kt=s=>e.jsx("div",{...s,className:S("flex flex-col space-y-2 text-center sm:text-left",s.className)}),Or=s=>e.jsx("div",{...s,className:S("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",s.className)}),Qt=s=>e.jsx(ua,{...s,className:S("text-lg font-semibold text-foreground",s.className)}),Ar=s=>e.jsx(ha,{...s,className:S("text-sm text-muted-foreground",s.className)}),Br=["blue","green","red","yellow","purple","orange"],Ir=Ss({title:ot().min(1,"Title is required"),description:ot().min(1,"Description is required"),startDate:it({required_error:"Start date is required"}),endDate:it({required_error:"End date is required"}),color:ks(["blue","green","red","yellow","purple","orange"],{required_error:"Variant is required"})});function Q({children:s,startDate:a,startTime:t,event:r}){const{isOpen:n,onClose:i,onToggle:l}=yr(),{addEvent:o,updateEvent:d}=M(),c=!!r,u=x.useMemo(()=>{if(!c&&!r){if(!a){const m=new Date;return{startDate:m,endDate:Ee(m,30)}}const p=t?gr(new Date(a),{hours:t.hour,minutes:t.minute,seconds:0}):new Date(a),g=Ee(p,30);return{startDate:p,endDate:g}}return{startDate:new Date(r.startDate),endDate:new Date(r.endDate)}},[a,t,r,c]),h=Ms({resolver:zs(Ir),defaultValues:{title:r?.title??"",description:r?.description??"",startDate:u.startDate,endDate:u.endDate,color:r?.color??"blue"}});x.useEffect(()=>{h.reset({title:r?.title??"",description:r?.description??"",startDate:u.startDate,endDate:u.endDate,color:r?.color??"blue"})},[r,u,h]);const f=p=>{try{const g={...p,startDate:G(p.startDate,"yyyy-MM-dd'T'HH:mm:ss"),endDate:G(p.endDate,"yyyy-MM-dd'T'HH:mm:ss"),id:c?r.id:Math.floor(Math.random()*1e6),user:c?r.user:{id:Math.floor(Math.random()*1e6).toString(),name:"Jeraidi Yassir",picturePath:null},color:p.color};c?(d(g),K.success("Event updated successfully")):(o(g),K.success("Event created successfully")),i(),h.reset()}catch(g){console.error(`Error ${c?"editing":"adding"} event:`,g),K.error(`Failed to ${c?"edit":"add"} event`)}};return e.jsxs(Gt,{open:n,onOpenChange:l,modal:!1,children:[e.jsx(qt,{asChild:!0,children:s}),e.jsxs(Jt,{children:[e.jsxs(Kt,{children:[e.jsx(Qt,{children:c?"Edit Event":"Add New Event"}),e.jsx(Ar,{children:c?"Modify your existing event.":"Create a new event for your calendar."})]}),e.jsx(Es,{...h,children:e.jsxs("form",{id:"event-form",onSubmit:h.handleSubmit(f),className:"grid gap-4 py-4",children:[e.jsx(ce,{control:h.control,name:"title",render:({field:p,fieldState:g})=>e.jsxs(je,{children:[e.jsx(De,{htmlFor:"title",className:"required",children:"Title"}),e.jsx(Ne,{children:e.jsx(wa,{id:"title",placeholder:"Enter a title",...p,className:g.invalid?"border-red-500":""})}),e.jsx(Se,{})]})}),e.jsx(ce,{control:h.control,name:"startDate",render:({field:p})=>e.jsx(ft,{form:h,field:p})}),e.jsx(ce,{control:h.control,name:"endDate",render:({field:p})=>e.jsx(ft,{form:h,field:p})}),e.jsx(ce,{control:h.control,name:"color",render:({field:p,fieldState:g})=>e.jsxs(je,{children:[e.jsx(De,{className:"required",children:"Variant"}),e.jsx(Ne,{children:e.jsxs(kt,{value:p.value,onValueChange:p.onChange,children:[e.jsx(Mt,{className:`w-full ${g.invalid?"border-red-500":""}`,children:e.jsx(zt,{placeholder:"Select a variant"})}),e.jsx(Et,{children:Br.map(m=>e.jsx($e,{value:m,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:`size-3.5 rounded-full bg-${m}-600 dark:bg-${m}-700`}),m]})},m))})]})}),e.jsx(Se,{})]})}),e.jsx(ce,{control:h.control,name:"description",render:({field:p,fieldState:g})=>e.jsxs(je,{children:[e.jsx(De,{className:"required",children:"Description"}),e.jsx(Ne,{children:e.jsx(Cs,{...p,placeholder:"Enter a description",className:g.invalid?"border-red-500":""})}),e.jsx(Se,{})]})})]})}),e.jsxs(Or,{className:"flex justify-end gap-2",children:[e.jsx(Zt,{asChild:!0,children:e.jsx(L,{type:"button",variant:"outline",children:"Cancel"})}),e.jsx(L,{form:"event-form",type:"submit",children:c?"Save Changes":"Create Event"})]})]})]})}const Le="MMM d, yyyy";function Fr(s,a){let t,r;switch(s){case"month":t=he(a),r=ie(a);break;case"week":t=Je(a,{weekStartsOn:1}),r=Ct(a,{weekStartsOn:1});break;case"day":return G(a,Le);case"year":t=Ts(a),r=_s(a);break;case"agenda":t=he(a),r=ie(a);break;default:return"Error while formatting"}return`${G(t,Le)} - ${G(r,Le)}`}function xt(s,a,t){return{month:t==="next"?ct:dt,week:t==="next"?Is:Fs,day:t==="next"?Ke:Bs,year:t==="next"?Os:As,agenda:t==="next"?ct:dt}[a](s,1)}function Wr(s,a,t){const n={day:W,week:Rs,month:ke,year:Hs,agenda:ke}[t];return s.filter(i=>n(v(i.startDate),a)).length}function es(s){const a=s.sort((r,n)=>v(r.startDate).getTime()-v(n.startDate).getTime()),t=[];for(const r of a){const n=v(r.startDate);let i=!1;for(const l of t){const o=l[l.length-1],d=v(o.endDate);if(n>=d){l.push(r),i=!0;break}}i||t.push([r])}return t}function Lr(s,a,t,r){const n=v(s.startDate),i=F(a),l=n<i?i:n,d=Qe(l,i)/1440*100,c=100/r,u=t*c;return{top:`${d}%`,width:`${c}%`,left:`${u}%`}}function ts(s){const a=s.getFullYear(),t=s.getMonth(),r=ie(s).getDate(),i=(he(s).getDay()+6)%7,l=ie(new Date(a,t-1)).getDate(),o=i+r,d=Array.from({length:i},(h,f)=>({day:l-i+f+1,currentMonth:!1,date:new Date(a,t-1,l-i+f+1)})),c=Array.from({length:r},(h,f)=>({day:f+1,currentMonth:!0,date:new Date(a,t,f+1)})),u=Array.from({length:(7-o%7)%7},(h,f)=>({day:f+1,currentMonth:!1,date:new Date(a,t+1,f+1)}));return[...d,...c,...u]}function Pr(s,a,t){const r=he(t),n=ie(t),i={},l={};return lt({start:r,end:n}).forEach(d=>{l[d.toISOString()]=[!1,!1,!1]}),[...s.sort((d,c)=>{const u=Z(v(d.endDate),v(d.startDate));return Z(v(c.endDate),v(c.startDate))-u||v(d.startDate).getTime()-v(c.startDate).getTime()}),...a.sort((d,c)=>v(d.startDate).getTime()-v(c.startDate).getTime())].forEach(d=>{const c=v(d.startDate),u=v(d.endDate),h=lt({start:c<r?r:c,end:u>n?n:u});let f=-1;for(let p=0;p<3;p++)if(h.every(g=>{const m=l[F(g).toISOString()];return m&&!m[p]})){f=p;break}f!==-1&&(h.forEach(p=>{const g=F(p).toISOString();l[g][f]=!0}),i[d.id]=f)}),i}function $r(s,a,t){const r=F(s);return a.filter(i=>{const l=v(i.startDate),o=v(i.endDate);return r>=l&&r<=o||W(r,l)||W(r,o)}).map(i=>({...i,position:t[i.id]??-1,isMultiDay:i.startDate!==i.endDate})).sort((i,l)=>i.isMultiDay&&!l.isMultiDay?-1:!i.isMultiDay&&l.isMultiDay?1:i.position-l.position)}function $(s,a,t){const r=typeof s=="string"?v(s):s;if(!Ve(r))return"";const n=a?"HH:mm":"h:mm a";return t?Yt(r,t,n):G(r,n)}const Vr=s=>{if(!s)return"";const a=s.split(" ");return a.length===1?a[0].charAt(0).toUpperCase():`${a[0].charAt(0).toUpperCase()}${a[1].charAt(0).toUpperCase()}`},Ur=(s,a)=>{const t=he(a),r=ie(a);return s.filter(n=>{const i=v(n.startDate),l=v(n.endDate);return Ve(i)&&Ve(l)&&i<=r&&l>=t})},ss=s=>({red:"border-red-200 bg-red-50 text-red-700 dark:border-red-800 dark:bg-red-950 dark:text-red-300",yellow:"border-yellow-200 bg-yellow-50 text-yellow-700 dark:border-yellow-800 dark:bg-yellow-950 dark:text-yellow-300",green:"border-green-200 bg-green-50 text-green-700 dark:border-green-800 dark:bg-green-950 dark:text-green-300",blue:"border-blue-200 bg-blue-50 text-blue-700 dark:border-blue-800 dark:bg-blue-950 dark:text-blue-300",orange:"border-orange-200 bg-orange-50 text-orange-700 dark:border-orange-800 dark:bg-orange-950 dark:text-orange-300",purple:"border-purple-200 bg-purple-50 text-purple-700 dark:border-purple-800 dark:bg-purple-950 dark:text-purple-300"})[s]||"",Yr=s=>({red:"bg-red-400 dark:bg-red-600",yellow:"bg-yellow-400 dark:bg-yellow-600",green:"bg-green-400 dark:bg-green-600",blue:"bg-blue-400 dark:bg-blue-600",orange:"bg-orange-400 dark:bg-orange-600",purple:"bg-purple-400 dark:bg-purple-600"})[s]||"",Xr=s=>s?s.charAt(0).toUpperCase()+s.slice(1):"";function _e({event:s,children:a}){const t=v(s.startDate),r=v(s.endDate),{use24HourFormat:n,removeEvent:i,timezone:l,formatDate:o}=M(),d=c=>{try{i(c),K.success("Event deleted successfully.")}catch{K.error("Error deleting event.")}};return e.jsxs(fa,{children:[e.jsx(xa,{asChild:!0,children:a}),e.jsxs(ga,{children:[e.jsx(va,{children:e.jsx(ba,{children:s.title})}),e.jsx(ne,{className:"max-h-[80vh]",children:e.jsxs("div",{className:"space-y-4 p-4",children:[e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(Vt,{className:"mt-1 size-4 shrink-0 text-muted-foreground"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:"Responsible"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s.user.name})]})]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(Ze,{className:"mt-1 size-4 shrink-0 text-muted-foreground"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:"Start Date"}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[o(t,"EEEE dd MMMM"),e.jsx("span",{className:"mx-1",children:"at"}),$(v(s.startDate),n,l)]})]})]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(Tt,{className:"mt-1 size-4 shrink-0 text-muted-foreground"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:"End Date"}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[o(r,"EEEE dd MMMM"),e.jsx("span",{className:"mx-1",children:"at"}),$(v(s.endDate),n,l)]})]})]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(qa,{className:"mt-1 size-4 shrink-0 text-muted-foreground"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:"Description"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s.description})]})]})]})}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(Q,{event:s,children:e.jsx(L,{variant:"outline",children:"Edit"})}),e.jsx(L,{variant:"destructive",onClick:()=>{d(s.id)},children:"Delete"})]}),e.jsx(ya,{})]})]})}const Gr=oe("size-2 rounded-full",{variants:{color:{blue:"bg-blue-600 dark:bg-blue-500",green:"bg-green-600 dark:bg-green-500",red:"bg-red-600 dark:bg-red-500",yellow:"bg-yellow-600 dark:bg-yellow-500",purple:"bg-purple-600 dark:bg-purple-500",orange:"bg-orange-600 dark:bg-orange-500",gray:"bg-gray-600 dark:bg-gray-500"}},defaultVariants:{color:"blue"}});function ee({color:s,className:a}){return e.jsx(j.div,{className:S(Gr({color:s,className:a})),initial:{scale:0,opacity:0},animate:{scale:1,opacity:1},whileHover:{scale:1.2},transition:k})}const qr=()=>{const{events:s,use24HourFormat:a,badgeVariant:t,agendaModeGroupBy:r,selectedDate:n,formatDate:i,timezone:l}=M(),o=Ur(s,n),d=Object.groupBy(o,u=>r==="date"?i(u.startDate,"yyyy-MM-dd"):u.color),c=Object.entries(d).sort((u,h)=>new Date(u[0]).getTime()-new Date(h[0]).getTime());return e.jsxs(Ws,{className:"py-4 h-[80vh] bg-transparent",children:[e.jsx("div",{className:"mb-4 mx-4",children:e.jsx(Ls,{placeholder:"Type a command or search..."})}),e.jsxs(Ps,{className:"max-h-max px-3 border-t",children:[c.map(([u,h])=>e.jsx($s,{heading:r==="date"?i(u,"EEEE, MMMM d, yyyy"):Xr(h[0].color),children:h.map(f=>e.jsx(Vs,{className:S("mb-2 p-4 border rounded-md data-[selected=true]:bg-bg transition-all data-[selected=true]:text-none hover:cursor-pointer",{[ss(f.color)]:t==="colored","hover:bg-zinc-200 dark:hover:bg-gray-900":t==="dot","hover:opacity-60":t==="colored"}),children:e.jsx(_e,{event:f,children:e.jsxs("div",{className:"w-full flex items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[t==="dot"?e.jsx(ee,{color:f.color}):e.jsxs(Me,{children:[e.jsx(Ye,{src:"",alt:"@shadcn"}),e.jsx(ze,{className:Yr(f.color),children:Vr(f.title)})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("p",{className:S({"font-medium":t==="dot","text-foreground":t==="dot"}),children:f.title}),e.jsx("p",{className:"text-muted-foreground text-sm line-clamp-1 text-ellipsis md:text-clip w-1/3",children:f.description})]})]}),e.jsx("div",{className:"w-40 flex justify-center items-center gap-1",children:r==="date"?e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"text-sm",children:$(f.startDate,a,l)}),e.jsx("span",{className:"text-muted-foreground",children:"-"}),e.jsx("p",{className:"text-sm",children:$(f.endDate,a,l)})]}):e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"text-sm",children:i(f.startDate,"MM/dd/yyyy")}),e.jsx("span",{className:"text-sm",children:"at"}),e.jsx("p",{className:"text-sm",children:$(f.startDate,a,l)})]})})]})})},f.id))},u)),e.jsx(Us,{children:"No results found."})]})]})};function qe({date:s,events:a,maxVisibleEvents:t=3,children:r}){const n=a,i=Math.max(n.length-t,0),{badgeVariant:l,use24HourFormat:o,formatDate:d,timezone:c}=M(),u=e.jsxs("span",{className:"cursor-pointer",children:[e.jsxs("span",{className:"sm:hidden",children:["+",i]}),e.jsxs("span",{className:"hidden sm:inline py-0.5 px-2 my-1 rounded-xl border",children:[i,e.jsx("span",{className:"mx-1",children:"more..."})]})]});return e.jsxs(Gt,{children:[e.jsx(qt,{asChild:!0,children:r||u}),e.jsxs(Jt,{className:"sm:max-w-[425px]",children:[e.jsx(Kt,{children:e.jsx(Qt,{className:"my-2",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ee,{color:n[0]?.color,className:""}),e.jsxs("p",{className:"text-sm font-medium",children:["Events on ",d(s,"EEEE, MMMM d, yyyy")]})]})})}),e.jsx("div",{className:"max-h-[60vh] overflow-y-auto space-y-2",children:n.length>0?n.map(h=>e.jsx(_e,{event:h,children:e.jsxs("div",{className:S("flex items-center gap-2 p-2 border rounded-md hover:bg-muted cursor-pointer",{[Qr({color:h.color})]:l==="colored"}),children:[e.jsx(ee,{color:h.color}),e.jsxs("div",{className:"flex justify-between items-center w-full",children:[e.jsx("p",{className:"text-sm font-medium",children:h.title}),e.jsx("p",{className:"text-xs",children:$(h.startDate,o,c)})]})]})},h.id)):e.jsx("p",{className:"text-sm text-muted-foreground",children:"No events for this date."})})]})]})}function Zr({open:s,onOpenChange:a,event:t,newStartDate:r,newEndDate:n,onConfirm:i,onCancel:l}){const{use24HourFormat:o,timezone:d}=M();if(!t||!r||!n)return null;const c=new Date(t.startDate),u=p=>G(p,"MMM dd, yyyy 'at '")+$(p,o,d),h=()=>{i(),a(!1)},f=()=>{l(),a(!1)};return e.jsx(Ys,{open:s,onOpenChange:a,children:e.jsxs(Xs,{children:[e.jsxs(Gs,{children:[e.jsx(qs,{children:"Confirm Event Move"}),e.jsxs(Zs,{children:["Are you sure you want to move",e.jsx("span",{className:S(ss(t.color),"mx-1 py-0.5 px-1 rounded-md"),children:t.title}),"event from",e.jsx("strong",{className:"mx-1",children:u(c)})," to",e.jsx("strong",{className:"mx-1",children:u(r)}),"?"]})]}),e.jsxs(Js,{children:[e.jsx(Ks,{onClick:f,children:"Cancel"}),e.jsx(Qs,{onClick:h,children:"Move Event"})]})]})})}const as=x.memo(()=>{const{showConfirmation:s,pendingDropData:a,handleConfirmDrop:t,handleCancelDrop:r}=He();return!s||!a?null:e.jsx(Zr,{open:s,onOpenChange:()=>{},event:a.event,newStartDate:a.newStartDate,newEndDate:a.newEndDate,onConfirm:t,onCancel:r})});as.displayName="DndConfirmationDialog";const rs=x.createContext(void 0);function Jr({children:s,showConfirmation:a=!1}){const{updateEvent:t}=M(),[r,n]=x.useState({draggedEvent:null,isDragging:!1}),[i,l]=x.useState(a),[o,d]=x.useState(null),c=x.useRef(null),u=x.useCallback(w=>{n({draggedEvent:w,isDragging:!0})},[]),h=x.useCallback(()=>{n({draggedEvent:null,isDragging:!1})},[]),f=x.useCallback((w,D,R,_)=>{const H=new Date(w.startDate),C=new Date(w.endDate).getTime()-H.getTime(),B=new Date(D);return R!==void 0?B.setHours(R,_||0,0,0):B.setHours(H.getHours(),H.getMinutes(),0,0),{newStart:B,newEnd:new Date(B.getTime()+C)}},[]),p=x.useCallback((w,D)=>w.getTime()===D.getTime(),[]),g=x.useCallback((w,D,R)=>{const{draggedEvent:_}=r;if(!_)return;const{newStart:H,newEnd:A}=f(_,w,D,R),C=new Date(_.startDate);if(p(C,H)){h();return}if(i)d({event:_,newStartDate:H,newEndDate:A});else{const B=c.current;B&&B(_,H,A),h()}},[r,f,p,h,i]),m=x.useCallback(()=>{if(!o)return;const w=c.current;w&&w(o.event,o.newStartDate,o.newEndDate),d(null),h()},[o,h]),b=x.useCallback(()=>{d(null),h()},[h]),N=x.useCallback((w,D,R)=>{try{const _={...w,startDate:D.toISOString(),endDate:R.toISOString()};t(_),K.success("Event updated successfully")}catch{K.error("Failed to update event")}},[t]);rt.useEffect(()=>{c.current=N},[N]),rt.useEffect(()=>{l(a)},[a]);const z=x.useMemo(()=>({draggedEvent:r.draggedEvent,isDragging:r.isDragging,startDrag:u,endDrag:h,handleEventDrop:g,showConfirmation:i,pendingDropData:o,handleConfirmDrop:m,handleCancelDrop:b,setShowConfirmation:l}),[r,i,o,u,h,g,m,b,l]);return e.jsxs(rs.Provider,{value:z,children:[i&&o&&e.jsx(as,{}),s]})}function He(){const s=x.useContext(rs);if(!s)throw new Error("useDragDrop must be used within a DragDropProvider");return s}function me({date:s,hour:a,minute:t,children:r,className:n}){const{handleEventDrop:i,isDragging:l}=He();return e.jsx("div",{className:`${n||""} ${l?"drop-target":""}`,onDragOver:o=>{o.preventDefault(),o.currentTarget.classList.add("bg-primary/10")},onDragLeave:o=>{o.currentTarget.classList.remove("bg-primary/10")},onDrop:o=>{o.preventDefault(),o.currentTarget.classList.remove("bg-primary/10"),i(s,a,t)},children:r})}function ns({event:s,children:a,className:t}){const{startDrag:r,endDrag:n,isDragging:i,draggedEvent:l}=He(),o=i&&l?.id===s.id,d=c=>{c.stopPropagation()};return e.jsx(j.div,{className:`${t||""} ${o?"opacity-50 cursor-grabbing":"cursor-grab"}`,draggable:!0,onClick:c=>d(c),onDragStart:c=>{c.dataTransfer.setData("text/plain",s.id.toString()),r(s)},onDragEnd:()=>{n()},children:a})}const Kr=oe("mx-1 flex size-auto h-6.5 select-none items-center justify-between gap-1.5 truncate whitespace-nowrap rounded-md border px-2 text-xs",{variants:{color:{blue:"border-blue-200 bg-blue-50 text-blue-700 dark:border-blue-800 dark:bg-blue-950 dark:text-blue-300",green:"border-green-200 bg-green-50 text-green-700 dark:border-green-800 dark:bg-green-950 dark:text-green-300",red:"border-red-200 bg-red-50 text-red-700 dark:border-red-800 dark:bg-red-950 dark:text-red-300",yellow:"border-yellow-200 bg-yellow-50 text-yellow-700 dark:border-yellow-800 dark:bg-yellow-950 dark:text-yellow-300",purple:"border-purple-200 bg-purple-50 text-purple-700 dark:border-purple-800 dark:bg-purple-950 dark:text-purple-300",orange:"border-orange-200 bg-orange-50 text-orange-700 dark:border-orange-800 dark:bg-orange-950 dark:text-orange-300","blue-dot":"bg-bg-secondary text-t-primary [&_svg]:fill-blue-600","green-dot":"bg-bg-secondary text-t-primary [&_svg]:fill-green-600","red-dot":"bg-bg-secondary text-t-primary [&_svg]:fill-red-600","orange-dot":"bg-bg-secondary text-t-primary [&_svg]:fill-orange-600","purple-dot":"bg-bg-secondary text-t-primary [&_svg]:fill-purple-600","yellow-dot":"bg-bg-secondary text-t-primary [&_svg]:fill-yellow-600"},multiDayPosition:{first:"relative z-10 mr-0 rounded-r-none border-r-0 [&>span]:mr-2.5",middle:"relative z-10 mx-0 w-[calc(100%_+_1px)] rounded-none border-x-0",last:"ml-0 rounded-l-none border-l-0",none:""}},defaultVariants:{color:"blue-dot"}});function et({event:s,cellDate:a,eventCurrentDay:t,eventTotalDays:r,className:n,position:i}){const{badgeVariant:l,use24HourFormat:o,timezone:d}=M(),c=F(v(s.startDate)),u=_t(v(s.endDate));if(a<c||a>u)return null;let h;i?h=i:t&&r||W(c,u)?h="none":W(a,c)?h="first":W(a,u)?h="last":h="middle";const f=["first","none"].includes(h),p=["last","none"].includes(h),g=l==="dot"?`${s.color}-dot`:s.color,m=S(Kr({color:g,multiDayPosition:h,className:n}));return e.jsx(ns,{event:s,children:e.jsx(_e,{event:s,children:e.jsxs("div",{role:"button",tabIndex:0,className:m,children:[e.jsxs("div",{className:"flex items-center gap-1.5 truncate",children:[!["middle","last"].includes(h)&&l==="dot"&&e.jsx(ee,{color:s.color}),f&&e.jsxs("p",{className:"flex-1 truncate font-semibold",children:[t&&e.jsxs("span",{className:"text-xs",children:["Day ",t," of ",r," â€¢"," "]}),s.title]})]}),e.jsx("div",{className:"hidden sm:block",children:p&&e.jsx("span",{children:$(new Date(s.startDate),o,d)})})]})})})}const Qr=oe("text-white",{variants:{color:{blue:"bg-blue-600 dark:bg-blue-500 hover:bg-blue-700 dark:hover:bg-blue-400 ",green:"bg-green-600 dark:bg-green-500 hover:bg-green-700 dark:hover:bg-green-400",red:"bg-red-600 dark:bg-red-500 hover:bg-red-700 dark:hover:bg-red-400",yellow:"bg-yellow-600 dark:bg-yellow-500 hover:bg-yellow-700 dark:hover:bg-yellow-400",purple:"bg-purple-600 dark:bg-purple-500 hover:bg-purple-700 dark:hover:bg-purple-400",orange:"bg-orange-600 dark:bg-orange-500 hover:bg-orange-700 dark:hover:bg-orange-400",gray:"bg-gray-600 dark:bg-gray-500 hover:bg-gray-700 dark:hover:bg-gray-400"}},defaultVariants:{color:"blue"}}),en=3;function tn({cell:s,events:a,eventPositions:t}){const{day:r,currentMonth:n,date:i}=s,l=jr("(max-width: 768px)"),{cellEvents:o,currentCellMonth:d}=x.useMemo(()=>{const g=$r(i,a,t),m=F(new Date(i.getFullYear(),i.getMonth(),1));return{cellEvents:g,currentCellMonth:m}},[i,a,t]),c=x.useCallback(g=>{const m=o.find(N=>N.position===g);if(!m)return e.jsx(j.div,{className:"lg:flex-1",initial:!1,animate:!1},`empty-${g}`);const b=ke(new Date(m.startDate),d);return e.jsx(j.div,{className:"lg:flex-1",initial:{opacity:0,x:-10},animate:{opacity:1,x:0},transition:{delay:g*.1,...k},children:e.jsxs(e.Fragment,{children:[b&&e.jsx(ee,{className:"lg:hidden",color:m.color}),e.jsx(et,{className:"hidden lg:flex",event:m,cellDate:F(i)})]})},`event-${m.id}-${g}`)},[o,d,i]),u=o.length-en,h=l&&n&&u>0,f=!l&&n&&u>0,p=x.useMemo(()=>e.jsx(j.div,{className:S("flex h-full lg:min-h-[10rem] flex-col gap-1 border-l border-t",Ja(i)&&"border-l-0"),initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:k,children:e.jsxs(me,{date:i,className:"w-full h-full py-2",children:[e.jsx(j.span,{className:S("h-6 px-1 text-xs font-semibold lg:px-2",!n&&"opacity-20",ea(i)&&"flex w-6 translate-x-1 items-center justify-center rounded-full bg-primary px-0 font-bold text-primary-foreground"),children:r}),e.jsx(j.div,{className:S("flex h-fit gap-1 px-2 mt-1 lg:h-[94px] lg:flex-col lg:gap-2 lg:px-0",!n&&"opacity-50"),children:o.length===0&&!l?e.jsx("div",{className:"w-full h-full flex justify-center items-center group",children:e.jsx(Q,{startDate:i,children:e.jsxs(L,{variant:"ghost",className:"border opacity-0 group-hover:opacity-100 transition-opacity duration-200",children:[e.jsx(Ht,{className:"h-4 w-4"}),e.jsx("span",{className:"max-sm:hidden",children:"Add Event"})]})})}):[0,1,2].map(c)}),h&&e.jsx("div",{className:"flex justify-end items-end mx-2",children:e.jsxs("span",{className:"text-[0.6rem] font-semibold text-accent-foreground",children:["+",u]})}),f&&e.jsx(j.div,{className:S("h-4.5 px-1.5 my-2 text-end text-xs font-semibold text-muted-foreground",!n&&"opacity-50"),initial:{opacity:0,y:5},animate:{opacity:1,y:0},transition:{delay:.3,...k},children:e.jsx(qe,{date:i,events:o})})]})}),[i,r,n,o,h,f,u,c]);return l&&n?e.jsx(qe,{date:i,events:o,children:p}):p}const sn=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"];function an({singleDayEvents:s,multiDayEvents:a}){const{selectedDate:t}=M(),r=[...a,...s],n=x.useMemo(()=>ts(t),[t]),i=x.useMemo(()=>Pr(a,s,t),[a,s,t]);return e.jsxs(j.div,{initial:"initial",animate:"animate",variants:ue,children:[e.jsx("div",{className:"grid grid-cols-7",children:sn.map((l,o)=>e.jsx(j.div,{className:"flex items-center justify-center py-2",initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{delay:o*.05,...k},children:e.jsx("span",{className:"text-xs font-medium text-t-quaternary",children:l})},l))}),e.jsx("div",{className:"grid grid-cols-7 overflow-hidden",children:n.map((l,o)=>e.jsx(tn,{cell:l,events:r,eventPositions:i},o))})]})}function rn({className:s,classNames:a,showOutsideDays:t=!0,...r}){return e.jsx(ta,{showOutsideDays:t,className:S("p-3",s),classNames:{months:"flex flex-col select-none sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0",month:"space-y-4",caption:"flex justify-center pt-1 relative items-center capitalize",caption_label:"text-sm font-medium",nav:"space-x-1 flex items-center",nav_button:S(ht({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",head_row:"flex",head_cell:"w-9 font-medium text-sm capitalize",row:"flex w-full mt-2",cell:S("size-9 flex items-center justify-center text-t-secondary text-center text-sm p-0 relative focus-within:relative focus-within:z-20","[&:has([aria-selected].day-range-end)]:rounded-r-lg last:[&:has([aria-selected])]:rounded-r-lg first:[&:has([aria-selected])]:rounded-l-lg [&:has([aria-selected])]:bg-bg-secondary"),day:S(ht({variant:"ghost"}),"size-8.5 p-0 font-normal aria-selected:opacity-100"),day_selected:"bg-primary text-white dark:text-black dark:hover:!text-white",day_today:"text-red-600",day_outside:"opacity-50 aria-selected:opacity-40",day_range_middle:"aria-selected:bg-bg-secondary aria-selected:text-t-primary",day_hidden:"invisible",...a},components:{IconLeft:()=>e.jsx(Ft,{className:"size-4"}),IconRight:()=>e.jsx(It,{className:"size-4"})},locale:sa,...r})}function is(){const{use24HourFormat:s,timezone:a,startHour:t,endHour:r}=M(),[n,i]=x.useState(new Date);x.useEffect(()=>{const d=setInterval(()=>i(new Date),6e4);return()=>clearInterval(d)},[]);const l=()=>{const d=St(n,a),c=d.getHours(),u=d.getMinutes();if(c<t||c>r)return-1;const h=(c-t)*60+u,f=(r-t+1)*60;return h/f*100},o=()=>$(n,s,a);return e.jsxs("div",{className:"pointer-events-none absolute inset-x-0 z-50 border-t border-primary",style:{top:`${l()}%`,display:l()>=0?"block":"none"},children:[e.jsx("div",{className:"absolute -left-1.5 -top-1.5 size-3 rounded-full bg-primary"}),e.jsx("div",{className:"absolute -left-18 flex w-16 -translate-y-1/2 justify-end bg-background pr-1 text-xs font-medium text-primary",children:o()})]})}function nn({selectedDate:s,multiDayEvents:a}){const t=F(s),r=_t(s),n=a.filter(i=>{const l=v(i.startDate),o=v(i.endDate);return Ue(t,{start:l,end:o})||Ue(r,{start:l,end:o})||l<=t&&o>=r}).sort((i,l)=>{const o=Z(v(i.endDate),v(i.startDate));return Z(v(l.endDate),v(l.startDate))-o});return n.length===0?null:e.jsxs("div",{className:"flex border-b",children:[e.jsx("div",{className:"w-18"}),e.jsx("div",{className:"flex flex-1 flex-col gap-1 border-l py-1",children:n.map(i=>{const l=F(v(i.startDate)),o=F(v(i.endDate)),d=F(s),c=Z(o,l)+1,u=Z(d,l)+1;return e.jsx(et,{event:i,cellDate:s,eventCurrentDay:u,eventTotalDays:c},i.id)})})]})}var E=function(){return E=Object.assign||function(s){for(var a,t=1,r=arguments.length;t<r;t++){a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(s[n]=a[n])}return s},E.apply(this,arguments)},gt={width:"100%",height:"10px",top:"0px",left:"0px",cursor:"row-resize"},vt={width:"10px",height:"100%",top:"0px",left:"0px",cursor:"col-resize"},ve={width:"20px",height:"20px",position:"absolute",zIndex:1},on={top:E(E({},gt),{top:"-5px"}),right:E(E({},vt),{left:void 0,right:"-5px"}),bottom:E(E({},gt),{top:void 0,bottom:"-5px"}),left:E(E({},vt),{left:"-5px"}),topRight:E(E({},ve),{right:"-10px",top:"-10px",cursor:"ne-resize"}),bottomRight:E(E({},ve),{right:"-10px",bottom:"-10px",cursor:"se-resize"}),bottomLeft:E(E({},ve),{left:"-10px",bottom:"-10px",cursor:"sw-resize"}),topLeft:E(E({},ve),{left:"-10px",top:"-10px",cursor:"nw-resize"})},ln=x.memo(function(s){var a=s.onResizeStart,t=s.direction,r=s.children,n=s.replaceStyles,i=s.className,l=x.useCallback(function(c){a(c,t)},[a,t]),o=x.useCallback(function(c){a(c,t)},[a,t]),d=x.useMemo(function(){return E(E({position:"absolute",userSelect:"none"},on[t]),n??{})},[n,t]);return e.jsx("div",{className:i||void 0,style:d,onMouseDown:l,onTouchStart:o,children:r})}),cn=(function(){var s=function(a,t){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},s(a,t)};return function(a,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");s(a,t);function r(){this.constructor=a}a.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),U=function(){return U=Object.assign||function(s){for(var a,t=1,r=arguments.length;t<r;t++){a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(s[n]=a[n])}return s},U.apply(this,arguments)},dn={width:"auto",height:"auto"},be=function(s,a,t){return Math.max(Math.min(s,t),a)},bt=function(s,a,t){var r=Math.round(s/a);return r*a+t*(r-1)},se=function(s,a){return new RegExp(s,"i").test(a)},ye=function(s){return!!(s.touches&&s.touches.length)},un=function(s){return!!((s.clientX||s.clientX===0)&&(s.clientY||s.clientY===0))},yt=function(s,a,t){t===void 0&&(t=0);var r=a.reduce(function(i,l,o){return Math.abs(l-s)<Math.abs(a[i]-s)?o:i},0),n=Math.abs(a[r]-s);return t===0||n<t?a[r]:s},Pe=function(s){return s=s.toString(),s==="auto"||s.endsWith("px")||s.endsWith("%")||s.endsWith("vh")||s.endsWith("vw")||s.endsWith("vmax")||s.endsWith("vmin")?s:"".concat(s,"px")},we=function(s,a,t,r){if(s&&typeof s=="string"){if(s.endsWith("px"))return Number(s.replace("px",""));if(s.endsWith("%")){var n=Number(s.replace("%",""))/100;return a*n}if(s.endsWith("vw")){var n=Number(s.replace("vw",""))/100;return t*n}if(s.endsWith("vh")){var n=Number(s.replace("vh",""))/100;return r*n}}return s},hn=function(s,a,t,r,n,i,l){return r=we(r,s.width,a,t),n=we(n,s.height,a,t),i=we(i,s.width,a,t),l=we(l,s.height,a,t),{maxWidth:typeof r>"u"?void 0:Number(r),maxHeight:typeof n>"u"?void 0:Number(n),minWidth:typeof i>"u"?void 0:Number(i),minHeight:typeof l>"u"?void 0:Number(l)}},mn=function(s){return Array.isArray(s)?s:[s,s]},pn=["as","ref","style","className","grid","gridGap","snap","bounds","boundsByDirection","size","defaultSize","minWidth","minHeight","maxWidth","maxHeight","lockAspectRatio","lockAspectRatioExtraWidth","lockAspectRatioExtraHeight","enable","handleStyles","handleClasses","handleWrapperStyle","handleWrapperClass","children","onResizeStart","onResize","onResizeStop","handleComponent","scale","resizeRatio","snapGap"],wt="__resizable_base__",fn=(function(s){cn(a,s);function a(t){var r,n,i,l,o=s.call(this,t)||this;return o.ratio=1,o.resizable=null,o.parentLeft=0,o.parentTop=0,o.resizableLeft=0,o.resizableRight=0,o.resizableTop=0,o.resizableBottom=0,o.targetLeft=0,o.targetTop=0,o.delta={width:0,height:0},o.appendBase=function(){if(!o.resizable||!o.window)return null;var d=o.parentNode;if(!d)return null;var c=o.window.document.createElement("div");return c.style.width="100%",c.style.height="100%",c.style.position="absolute",c.style.transform="scale(0, 0)",c.style.left="0",c.style.flex="0 0 100%",c.classList?c.classList.add(wt):c.className+=wt,d.appendChild(c),c},o.removeBase=function(d){var c=o.parentNode;c&&c.removeChild(d)},o.state={isResizing:!1,width:(n=(r=o.propsSize)===null||r===void 0?void 0:r.width)!==null&&n!==void 0?n:"auto",height:(l=(i=o.propsSize)===null||i===void 0?void 0:i.height)!==null&&l!==void 0?l:"auto",direction:"right",original:{x:0,y:0,width:0,height:0},backgroundStyle:{height:"100%",width:"100%",backgroundColor:"rgba(0,0,0,0)",cursor:"auto",opacity:0,position:"fixed",zIndex:9999,top:"0",left:"0",bottom:"0",right:"0"},flexBasis:void 0},o.onResizeStart=o.onResizeStart.bind(o),o.onMouseMove=o.onMouseMove.bind(o),o.onMouseUp=o.onMouseUp.bind(o),o}return Object.defineProperty(a.prototype,"parentNode",{get:function(){return this.resizable?this.resizable.parentNode:null},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"window",{get:function(){return!this.resizable||!this.resizable.ownerDocument?null:this.resizable.ownerDocument.defaultView},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"propsSize",{get:function(){return this.props.size||this.props.defaultSize||dn},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"size",{get:function(){var t=0,r=0;if(this.resizable&&this.window){var n=this.resizable.offsetWidth,i=this.resizable.offsetHeight,l=this.resizable.style.position;l!=="relative"&&(this.resizable.style.position="relative"),t=this.resizable.style.width!=="auto"?this.resizable.offsetWidth:n,r=this.resizable.style.height!=="auto"?this.resizable.offsetHeight:i,this.resizable.style.position=l}return{width:t,height:r}},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"sizeStyle",{get:function(){var t=this,r=this.props.size,n=function(o){var d;if(typeof t.state[o]>"u"||t.state[o]==="auto")return"auto";if(t.propsSize&&t.propsSize[o]&&(!((d=t.propsSize[o])===null||d===void 0)&&d.toString().endsWith("%"))){if(t.state[o].toString().endsWith("%"))return t.state[o].toString();var c=t.getParentSize(),u=Number(t.state[o].toString().replace("px","")),h=u/c[o]*100;return"".concat(h,"%")}return Pe(t.state[o])},i=r&&typeof r.width<"u"&&!this.state.isResizing?Pe(r.width):n("width"),l=r&&typeof r.height<"u"&&!this.state.isResizing?Pe(r.height):n("height");return{width:i,height:l}},enumerable:!1,configurable:!0}),a.prototype.getParentSize=function(){if(!this.parentNode)return this.window?{width:this.window.innerWidth,height:this.window.innerHeight}:{width:0,height:0};var t=this.appendBase();if(!t)return{width:0,height:0};var r=!1,n=this.parentNode.style.flexWrap;n!=="wrap"&&(r=!0,this.parentNode.style.flexWrap="wrap"),t.style.position="relative",t.style.minWidth="100%",t.style.minHeight="100%";var i={width:t.offsetWidth,height:t.offsetHeight};return r&&(this.parentNode.style.flexWrap=n),this.removeBase(t),i},a.prototype.bindEvents=function(){this.window&&(this.window.addEventListener("mouseup",this.onMouseUp),this.window.addEventListener("mousemove",this.onMouseMove),this.window.addEventListener("mouseleave",this.onMouseUp),this.window.addEventListener("touchmove",this.onMouseMove,{capture:!0,passive:!1}),this.window.addEventListener("touchend",this.onMouseUp))},a.prototype.unbindEvents=function(){this.window&&(this.window.removeEventListener("mouseup",this.onMouseUp),this.window.removeEventListener("mousemove",this.onMouseMove),this.window.removeEventListener("mouseleave",this.onMouseUp),this.window.removeEventListener("touchmove",this.onMouseMove,!0),this.window.removeEventListener("touchend",this.onMouseUp))},a.prototype.componentDidMount=function(){if(!(!this.resizable||!this.window)){var t=this.window.getComputedStyle(this.resizable);this.setState({width:this.state.width||this.size.width,height:this.state.height||this.size.height,flexBasis:t.flexBasis!=="auto"?t.flexBasis:void 0})}},a.prototype.componentWillUnmount=function(){this.window&&this.unbindEvents()},a.prototype.createSizeForCssProperty=function(t,r){var n=this.propsSize&&this.propsSize[r];return this.state[r]==="auto"&&this.state.original[r]===t&&(typeof n>"u"||n==="auto")?"auto":t},a.prototype.calculateNewMaxFromBoundary=function(t,r){var n=this.props.boundsByDirection,i=this.state.direction,l=n&&se("left",i),o=n&&se("top",i),d,c;if(this.props.bounds==="parent"){var u=this.parentNode;u&&(d=l?this.resizableRight-this.parentLeft:u.offsetWidth+(this.parentLeft-this.resizableLeft),c=o?this.resizableBottom-this.parentTop:u.offsetHeight+(this.parentTop-this.resizableTop))}else this.props.bounds==="window"?this.window&&(d=l?this.resizableRight:this.window.innerWidth-this.resizableLeft,c=o?this.resizableBottom:this.window.innerHeight-this.resizableTop):this.props.bounds&&(d=l?this.resizableRight-this.targetLeft:this.props.bounds.offsetWidth+(this.targetLeft-this.resizableLeft),c=o?this.resizableBottom-this.targetTop:this.props.bounds.offsetHeight+(this.targetTop-this.resizableTop));return d&&Number.isFinite(d)&&(t=t&&t<d?t:d),c&&Number.isFinite(c)&&(r=r&&r<c?r:c),{maxWidth:t,maxHeight:r}},a.prototype.calculateNewSizeFromDirection=function(t,r){var n=this.props.scale||1,i=mn(this.props.resizeRatio||1),l=i[0],o=i[1],d=this.state,c=d.direction,u=d.original,h=this.props,f=h.lockAspectRatio,p=h.lockAspectRatioExtraHeight,g=h.lockAspectRatioExtraWidth,m=u.width,b=u.height,N=p||0,z=g||0;return se("right",c)&&(m=u.width+(t-u.x)*l/n,f&&(b=(m-z)/this.ratio+N)),se("left",c)&&(m=u.width-(t-u.x)*l/n,f&&(b=(m-z)/this.ratio+N)),se("bottom",c)&&(b=u.height+(r-u.y)*o/n,f&&(m=(b-N)*this.ratio+z)),se("top",c)&&(b=u.height-(r-u.y)*o/n,f&&(m=(b-N)*this.ratio+z)),{newWidth:m,newHeight:b}},a.prototype.calculateNewSizeFromAspectRatio=function(t,r,n,i){var l=this.props,o=l.lockAspectRatio,d=l.lockAspectRatioExtraHeight,c=l.lockAspectRatioExtraWidth,u=typeof i.width>"u"?10:i.width,h=typeof n.width>"u"||n.width<0?t:n.width,f=typeof i.height>"u"?10:i.height,p=typeof n.height>"u"||n.height<0?r:n.height,g=d||0,m=c||0;if(o){var b=(f-g)*this.ratio+m,N=(p-g)*this.ratio+m,z=(u-m)/this.ratio+g,w=(h-m)/this.ratio+g,D=Math.max(u,b),R=Math.min(h,N),_=Math.max(f,z),H=Math.min(p,w);t=be(t,D,R),r=be(r,_,H)}else t=be(t,u,h),r=be(r,f,p);return{newWidth:t,newHeight:r}},a.prototype.setBoundingClientRect=function(){var t=1/(this.props.scale||1);if(this.props.bounds==="parent"){var r=this.parentNode;if(r){var n=r.getBoundingClientRect();this.parentLeft=n.left*t,this.parentTop=n.top*t}}if(this.props.bounds&&typeof this.props.bounds!="string"){var i=this.props.bounds.getBoundingClientRect();this.targetLeft=i.left*t,this.targetTop=i.top*t}if(this.resizable){var l=this.resizable.getBoundingClientRect(),o=l.left,d=l.top,c=l.right,u=l.bottom;this.resizableLeft=o*t,this.resizableRight=c*t,this.resizableTop=d*t,this.resizableBottom=u*t}},a.prototype.onResizeStart=function(t,r){if(!(!this.resizable||!this.window)){var n=0,i=0;if(t.nativeEvent&&un(t.nativeEvent)?(n=t.nativeEvent.clientX,i=t.nativeEvent.clientY):t.nativeEvent&&ye(t.nativeEvent)&&(n=t.nativeEvent.touches[0].clientX,i=t.nativeEvent.touches[0].clientY),this.props.onResizeStart&&this.resizable){var l=this.props.onResizeStart(t,r,this.resizable);if(l===!1)return}this.props.size&&(typeof this.props.size.height<"u"&&this.props.size.height!==this.state.height&&this.setState({height:this.props.size.height}),typeof this.props.size.width<"u"&&this.props.size.width!==this.state.width&&this.setState({width:this.props.size.width})),this.ratio=typeof this.props.lockAspectRatio=="number"?this.props.lockAspectRatio:this.size.width/this.size.height;var o,d=this.window.getComputedStyle(this.resizable);if(d.flexBasis!=="auto"){var c=this.parentNode;if(c){var u=this.window.getComputedStyle(c).flexDirection;this.flexDir=u.startsWith("row")?"row":"column",o=d.flexBasis}}this.setBoundingClientRect(),this.bindEvents();var h={original:{x:n,y:i,width:this.size.width,height:this.size.height},isResizing:!0,backgroundStyle:U(U({},this.state.backgroundStyle),{cursor:this.window.getComputedStyle(t.target).cursor||"auto"}),direction:r,flexBasis:o};this.setState(h)}},a.prototype.onMouseMove=function(t){var r=this;if(!(!this.state.isResizing||!this.resizable||!this.window)){if(this.window.TouchEvent&&ye(t))try{t.preventDefault(),t.stopPropagation()}catch{}var n=this.props,i=n.maxWidth,l=n.maxHeight,o=n.minWidth,d=n.minHeight,c=ye(t)?t.touches[0].clientX:t.clientX,u=ye(t)?t.touches[0].clientY:t.clientY,h=this.state,f=h.direction,p=h.original,g=h.width,m=h.height,b=this.getParentSize(),N=hn(b,this.window.innerWidth,this.window.innerHeight,i,l,o,d);i=N.maxWidth,l=N.maxHeight,o=N.minWidth,d=N.minHeight;var z=this.calculateNewSizeFromDirection(c,u),w=z.newHeight,D=z.newWidth,R=this.calculateNewMaxFromBoundary(i,l);this.props.snap&&this.props.snap.x&&(D=yt(D,this.props.snap.x,this.props.snapGap)),this.props.snap&&this.props.snap.y&&(w=yt(w,this.props.snap.y,this.props.snapGap));var _=this.calculateNewSizeFromAspectRatio(D,w,{width:R.maxWidth,height:R.maxHeight},{width:o,height:d});if(D=_.newWidth,w=_.newHeight,this.props.grid){var H=bt(D,this.props.grid[0],this.props.gridGap?this.props.gridGap[0]:0),A=bt(w,this.props.grid[1],this.props.gridGap?this.props.gridGap[1]:0),C=this.props.snapGap||0,B=C===0||Math.abs(H-D)<=C?H:D,pe=C===0||Math.abs(A-w)<=C?A:w;D=B,w=pe}var q={width:D-p.width,height:w-p.height};if(this.delta=q,g&&typeof g=="string"){if(g.endsWith("%")){var J=D/b.width*100;D="".concat(J,"%")}else if(g.endsWith("vw")){var le=D/this.window.innerWidth*100;D="".concat(le,"vw")}else if(g.endsWith("vh")){var I=D/this.window.innerHeight*100;D="".concat(I,"vh")}}if(m&&typeof m=="string"){if(m.endsWith("%")){var J=w/b.height*100;w="".concat(J,"%")}else if(m.endsWith("vw")){var le=w/this.window.innerWidth*100;w="".concat(le,"vw")}else if(m.endsWith("vh")){var I=w/this.window.innerHeight*100;w="".concat(I,"vh")}}var Y={width:this.createSizeForCssProperty(D,"width"),height:this.createSizeForCssProperty(w,"height")};this.flexDir==="row"?Y.flexBasis=Y.width:this.flexDir==="column"&&(Y.flexBasis=Y.height);var tt=this.state.width!==Y.width,st=this.state.height!==Y.height,at=this.state.flexBasis!==Y.flexBasis,Re=tt||st||at;Re&&xs.flushSync(function(){r.setState(Y)}),this.props.onResize&&Re&&this.props.onResize(t,f,this.resizable,q)}},a.prototype.onMouseUp=function(t){var r,n,i=this.state,l=i.isResizing,o=i.direction;i.original,!(!l||!this.resizable)&&(this.props.onResizeStop&&this.props.onResizeStop(t,o,this.resizable,this.delta),this.props.size&&this.setState({width:(r=this.props.size.width)!==null&&r!==void 0?r:"auto",height:(n=this.props.size.height)!==null&&n!==void 0?n:"auto"}),this.unbindEvents(),this.setState({isResizing:!1,backgroundStyle:U(U({},this.state.backgroundStyle),{cursor:"auto"})}))},a.prototype.updateSize=function(t){var r,n;this.setState({width:(r=t.width)!==null&&r!==void 0?r:"auto",height:(n=t.height)!==null&&n!==void 0?n:"auto"})},a.prototype.renderResizer=function(){var t=this,r=this.props,n=r.enable,i=r.handleStyles,l=r.handleClasses,o=r.handleWrapperStyle,d=r.handleWrapperClass,c=r.handleComponent;if(!n)return null;var u=Object.keys(n).map(function(h){return n[h]!==!1?e.jsx(ln,{direction:h,onResizeStart:t.onResizeStart,replaceStyles:i&&i[h],className:l&&l[h],children:c&&c[h]?c[h]:null},h):null});return e.jsx("div",{className:d,style:o,children:u})},a.prototype.render=function(){var t=this,r=Object.keys(this.props).reduce(function(l,o){return pn.indexOf(o)!==-1||(l[o]=t.props[o]),l},{}),n=U(U(U({position:"relative",userSelect:this.state.isResizing?"none":"auto"},this.props.style),this.sizeStyle),{maxWidth:this.props.maxWidth,maxHeight:this.props.maxHeight,minWidth:this.props.minWidth,minHeight:this.props.minHeight,boxSizing:"border-box",flexShrink:0});this.state.flexBasis&&(n.flexBasis=this.state.flexBasis);var i=this.props.as||"div";return e.jsxs(i,U({style:n,className:this.props.className},r,{ref:function(l){l&&(t.resizable=l)},children:[this.state.isResizing&&e.jsx("div",{style:this.state.backgroundStyle}),this.props.children,this.renderResizer()]}))},a.defaultProps={as:"div",onResizeStart:function(){},onResize:function(){},onResizeStop:function(){},enable:{top:!0,right:!0,bottom:!0,left:!0,topRight:!0,bottomRight:!0,bottomLeft:!0,topLeft:!0},style:{},grid:[1,1],gridGap:[0,0],lockAspectRatio:!1,lockAspectRatioExtraWidth:0,lockAspectRatioExtraHeight:0,scale:1,resizeRatio:1,snapGap:0},a})(x.PureComponent);const xn=96,gn=60/xn,vn=15;function bn({event:s,children:a,className:t}){const{updateEvent:r,use24HourFormat:n,formatDate:i}=M(),[l,o]=x.useState(!1),[d,c]=x.useState(null),u=x.useMemo(()=>v(s.startDate),[s.startDate]),h=x.useMemo(()=>v(s.endDate),[s.endDate]),f=x.useMemo(()=>Qe(h,u),[u,h]),p=x.useMemo(()=>{const z=new Date(u);z.setHours(0,0,0,0);const w=new Date(u);return w.setHours(23,59,59,999),{dayStart:z,dayEnd:w}},[u]),g=x.useCallback(()=>{o(!0)},[]),m=x.useCallback((z,w,D)=>{const R=parseInt(D.style.height,10),H=Math.max(vn,Math.round((R+8)*gn))-f;let A=u,C=h;w.includes("top")?A=Ee(u,-H):w.includes("bottom")&&(C=Ee(h,H)),Rt(A,p.dayStart)&&(A=p.dayStart),Ot(C,p.dayEnd)&&(C=p.dayEnd),c({start:i(A,n?"HH:mm":"h:mm a"),end:i(C,n?"HH:mm":"h:mm a")}),r({...s,startDate:A.toISOString(),endDate:C.toISOString()})},[u,h,f,p,n,r,s]),b=x.useCallback(()=>{o(!1),c(null)},[]),N=x.useMemo(()=>({minHeight:15,maxHeight:1440,enable:{top:!0,bottom:!0,topRight:!1,bottomRight:!1,bottomLeft:!1,topLeft:!1},handleStyles:{top:{cursor:"ns-resize",height:"8px",top:"-4px",backgroundColor:"transparent"},bottom:{cursor:"ns-resize",height:"8px",bottom:"-4px",backgroundColor:"transparent"}},handleClasses:{top:"transition-colors rounded-sm",bottom:"transition-colors rounded-sm"},onResizeStart:g,onResize:m,onResizeStop:b,className:S("transition-all duration-200",l&&"z-50 shadow-lg")}),[g,m,b,l]);return e.jsxs(j.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},transition:{duration:.2},className:S("relative group",t),children:[e.jsx(fn,{...N,children:a}),l&&d&&e.jsxs(j.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"absolute -top-8 left-1/2 transform -translate-x-1/2 bg-gray-900 text-white text-xs px-2 py-1 rounded shadow-lg z-50 whitespace-nowrap",children:[d.start," - ",d.end]})]})}const yn=oe("flex select-none flex-col gap-0.5 truncate whitespace-nowrap rounded-md border px-2 py-1.5 text-xs focus-visible:outline-offset-2",{variants:{color:{blue:"border-blue-200 bg-blue-100/50 text-blue-700 hover:bg-blue-100 dark:border-blue-800 dark:bg-blue-950/50 dark:text-blue-300 dark:hover:bg-blue-950",green:"border-green-200 bg-green-100/50 text-green-700 hover:bg-green-100 dark:border-green-800 dark:bg-green-950/50 dark:text-green-300 dark:hover:bg-green-950",red:"border-red-200 bg-red-100/50 text-red-700 hover:bg-red-100 dark:border-red-800 dark:bg-red-950/50 dark:text-red-300 dark:hover:bg-red-950",yellow:"border-yellow-200 bg-yellow-100/50 text-yellow-700 hover:bg-yellow-100 dark:border-yellow-800 dark:bg-yellow-950/50 dark:text-yellow-300 dark:hover:bg-yellow-950",purple:"border-purple-200 bg-purple-100/50 text-purple-700 hover:bg-purple-100 dark:border-purple-800 dark:bg-purple-950/50 dark:text-purple-300 dark:hover:bg-purple-950",orange:"border-orange-200 bg-orange-100/50 text-orange-700 hover:bg-orange-100 dark:border-orange-800 dark:bg-orange-950/50 dark:text-orange-300 dark:hover:bg-orange-950","blue-dot":"border-border bg-card text-foreground hover:bg-accent [&_svg]:fill-blue-600 dark:[&_svg]:fill-blue-500","green-dot":"border-border bg-card text-foreground hover:bg-accent [&_svg]:fill-green-600 dark:[&_svg]:fill-green-500","red-dot":"border-border bg-card text-foreground hover:bg-accent [&_svg]:fill-red-600 dark:[&_svg]:fill-red-500","orange-dot":"border-border bg-card text-foreground hover:bg-accent [&_svg]:fill-orange-600 dark:[&_svg]:fill-orange-500","purple-dot":"border-border bg-card text-foreground hover:bg-accent [&_svg]:fill-purple-600 dark:[&_svg]:fill-purple-500","yellow-dot":"border-border bg-card text-foreground hover:bg-accent [&_svg]:fill-yellow-600 dark:[&_svg]:fill-yellow-500"}},defaultVariants:{color:"blue-dot"}});function wn({event:s,className:a}){const{badgeVariant:t,use24HourFormat:r,timezone:n}=M(),i=v(s.startDate),l=v(s.endDate),o=Qe(l,i),d=o/60*96-8,c=t==="dot"?`${s.color}-dot`:s.color,u=S(yn({color:c,className:a}),o<35&&"py-0 justify-center");return e.jsx(bn,{event:s,children:e.jsx(ns,{event:s,children:e.jsx(_e,{event:s,children:e.jsxs("div",{role:"button",tabIndex:0,className:u,style:{height:`${d}px`},children:[e.jsxs("div",{className:"flex items-center gap-1.5 truncate",children:[t==="dot"&&e.jsx("svg",{width:"8",height:"8",viewBox:"0 0 8 8",className:"shrink-0",children:e.jsx("circle",{cx:"4",cy:"4",r:"4"})}),e.jsx("p",{className:"truncate font-semibold",children:s.title})]}),o>25&&e.jsxs("p",{children:[$(i,r,n)," -"," ",$(l,r,n)]})]})})})})}function os({groupedEvents:s,day:a}){return s.map((t,r)=>t.map(n=>{let i=Lr(n,a,r,s.length);return s.some((o,d)=>d!==r&&o.some(c=>Ka({start:v(n.startDate),end:v(n.endDate)},{start:v(c.startDate),end:v(c.endDate)})))||(i={...i,width:"100%",left:"0%"}),e.jsx("div",{className:"absolute p-1",style:i,children:e.jsx(wn,{event:n})},n.id)}))}function jn({singleDayEvents:s,multiDayEvents:a}){const{selectedDate:t,setSelectedDate:r,users:n,use24HourFormat:i,formatDate:l,startHour:o,endHour:d}=M(),c=x.useRef(null),u=Array.from({length:d-o+1},(m,b)=>o+b);x.useEffect(()=>{const m=b=>{if(!c.current)return;const N=c.current,z=N.getBoundingClientRect(),w=15,D=N.querySelector("[data-radix-scroll-area-viewport]")||N;b.clientY<z.top+60&&(D.scrollTop-=w),b.clientY>z.bottom-60&&(D.scrollTop+=w)};return document.addEventListener("dragover",m),()=>{document.removeEventListener("dragover",m)}},[]);const f=(m=>{const b=new Date;return m.filter(N=>Ue(b,{start:v(N.startDate),end:v(N.endDate)}))||[]})(s),p=s.filter(m=>{const b=v(m.startDate);return b.getDate()===t.getDate()&&b.getMonth()===t.getMonth()&&b.getFullYear()===t.getFullYear()}),g=es(p);return e.jsxs("div",{className:"flex",children:[e.jsxs("div",{className:"flex flex-1 flex-col",children:[e.jsxs("div",{children:[e.jsx(nn,{selectedDate:t,multiDayEvents:a}),e.jsxs("div",{className:"relative z-20 flex border-b",children:[e.jsx("div",{className:"w-18"}),e.jsxs("span",{className:"text-t-quaternary flex-1 border-l py-2 text-center text-xs font-medium",children:[l(t,"EE")," ",e.jsx("span",{className:"text-t-secondary font-semibold",children:l(t,"d")})]})]})]}),e.jsx(ne,{className:"h-[800px]",type:"always",ref:c,children:e.jsxs("div",{className:"flex",children:[e.jsx("div",{className:"relative w-18",children:u.map((m,b)=>e.jsx("div",{className:"relative",style:{height:"96px"},children:e.jsx("div",{className:"absolute -top-3 right-2 flex h-6 items-center",children:b!==0&&e.jsx("span",{className:"text-t-quaternary text-xs",children:l(new Date(new Date().setHours(m,0,0,0)),i?"HH:00":"h a")})})},m))}),e.jsxs("div",{className:"relative flex-1 border-l",children:[e.jsxs("div",{className:"relative",children:[u.map((m,b)=>e.jsxs("div",{className:"relative",style:{height:"96px"},children:[b!==0&&e.jsx("div",{className:"pointer-events-none absolute inset-x-0 top-0 border-b"}),e.jsx(me,{date:t,hour:m,minute:0,className:"absolute inset-x-0 top-0 h-[48px]",children:e.jsx(Q,{startDate:t,startTime:{hour:m,minute:0},children:e.jsx("div",{className:"absolute inset-0 cursor-pointer transition-colors hover:bg-secondary"})})}),e.jsx("div",{className:"border-b-tertiary pointer-events-none absolute inset-x-0 top-1/2 border-b border-dashed"}),e.jsx(me,{date:t,hour:m,minute:30,className:"absolute inset-x-0 bottom-0 h-[48px]",children:e.jsx(Q,{startDate:t,startTime:{hour:m,minute:30},children:e.jsx("div",{className:"absolute inset-0 cursor-pointer transition-colors hover:bg-secondary"})})})]},m)),e.jsx(os,{groupedEvents:g,day:t})]}),e.jsx(is,{})]})]})})]}),e.jsxs("div",{className:"hidden w-72 divide-y border-l md:flex md:flex-col",children:[e.jsx(rn,{className:"mx-auto w-fit",mode:"single",selected:t,onSelect:m=>m&&r(m),initialFocus:!0}),e.jsxs("div",{className:"flex min-h-0 flex-1 flex-col space-y-3",children:[f.length>0?e.jsxs("div",{className:"flex items-start gap-2 px-4 pt-4",children:[e.jsxs("span",{className:"relative mt-[5px] flex size-2.5",children:[e.jsx("span",{className:"absolute inline-flex size-full animate-ping rounded-full bg-green-400 opacity-75"}),e.jsx("span",{className:"relative inline-flex size-2.5 rounded-full bg-green-600"})]}),e.jsx("p",{className:"text-t-secondary text-sm font-semibold",children:"Happening now"})]}):e.jsx("div",{className:"flex flex-1 items-center justify-center p-4",children:e.jsx("p",{className:"text-t-tertiary text-center text-sm italic",children:"No appointments or consultations at the moment"})}),f.length>0&&e.jsx(ne,{className:"h-[422px] px-4",type:"always",children:e.jsx("div",{className:"space-y-6 pb-4",children:f.map(m=>{const b=n.find(N=>N.id===m.user.id);return e.jsxs("div",{className:"space-y-1.5",children:[e.jsx("p",{className:"line-clamp-2 text-sm font-semibold",children:m.title}),b&&e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx(Vt,{className:"text-t-quinary size-4"}),e.jsx("span",{className:"text-t-tertiary text-sm",children:b.name})]}),e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx(Ze,{className:"text-t-quinary size-4"}),e.jsx("span",{className:"text-t-tertiary text-sm",children:l(new Date(m.startDate),"MMM d, yyyy")})]}),e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx(Tt,{className:"text-t-quinary size-4"}),e.jsxs("span",{className:"text-t-tertiary text-sm",children:[l(v(m.startDate),i?"HH:mm":"hh:mm a")," ","-",l(v(m.endDate),i?"HH:mm":"hh:mm a")]})]})]},m.id)})})})]})]})]})}function Dn({selectedDate:s,multiDayEvents:a}){const t=Je(s),r=Ct(s),n=Array.from({length:7},(d,c)=>Ke(t,c)),i=x.useMemo(()=>a.map(d=>{const c=v(d.startDate),u=v(d.endDate),h=Rt(c,t)?t:c,f=Ot(u,r)?r:u,p=Z(h,t),g=Z(f,t);return{...d,adjustedStart:h,adjustedEnd:f,startIndex:p,endIndex:g}}).sort((d,c)=>{const u=d.adjustedStart.getTime()-c.adjustedStart.getTime();return u!==0?u:c.endIndex-c.startIndex-(d.endIndex-d.startIndex)}),[a,t,r]),l=x.useMemo(()=>{const d=[];return i.forEach(c=>{let u=d.findIndex(h=>h.every(f=>f.endIndex<c.startIndex||f.startIndex>c.endIndex));u===-1&&(u=d.length,d.push([])),d[u].push(c)}),d},[i]);return x.useMemo(()=>a.some(d=>{const c=v(d.startDate),u=v(d.endDate);return c>=t&&c<=r||u>=t&&u<=r||c<=t&&u>=r}),[a,t,r])?e.jsxs("div",{className:"overflow-hidden flex",children:[e.jsx("div",{className:"w-18 border-b"}),e.jsx("div",{className:"grid flex-1 grid-cols-7 divide-x border-b border-l",children:n.map((d,c)=>e.jsx("div",{className:"flex h-full flex-col gap-1 py-1",children:l.map((u,h)=>{const f=u.find(g=>g.startIndex<=c&&g.endIndex>=c);if(!f)return e.jsx("div",{className:"h-6.5"},`${h}-${c}`);let p="none";return c===f.startIndex&&c===f.endIndex?p="none":c===f.startIndex?p="first":c===f.endIndex?p="last":p="middle",e.jsx(et,{event:f,cellDate:F(d),position:p},`${f.id}-${c}`)})},d.toISOString()))})]}):null}function Nn({singleDayEvents:s,multiDayEvents:a}){const{selectedDate:t,use24HourFormat:r,formatDate:n,startHour:i,endHour:l}=M(),o=Je(t,{weekStartsOn:1}),d=Array.from({length:7},(u,h)=>Ke(o,h)),c=Array.from({length:l-i+1},(u,h)=>i+h);return e.jsxs(j.div,{initial:"initial",animate:"animate",exit:"exit",variants:Xe,transition:k,children:[e.jsxs(j.div,{className:"flex flex-col items-center justify-center border-b p-4 text-sm sm:hidden",initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:k,children:[e.jsx("p",{children:"Weekly view is not recommended on smaller devices."}),e.jsx("p",{children:"Please switch to a desktop device or use the daily view instead."})]}),e.jsxs(j.div,{className:"flex-col sm:flex",variants:ue,children:[e.jsxs("div",{children:[e.jsx(Dn,{selectedDate:t,multiDayEvents:a}),e.jsxs(j.div,{className:"relative z-20 flex border-b",initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:k,children:[e.jsx("div",{className:"w-18"}),e.jsx("div",{className:"grid flex-1 grid-cols-7  border-l",children:d.map((u,h)=>e.jsxs(j.span,{className:"py-1 sm:py-2 text-center text-xs font-medium text-t-quaternary",initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{delay:h*.05,...k},children:[e.jsxs("span",{className:"block sm:hidden",children:[n(u,"EEE").charAt(0),e.jsx("span",{className:"block font-semibold text-t-secondary text-xs",children:n(u,"d")})]}),e.jsxs("span",{className:"hidden sm:inline",children:[n(u,"EE")," ",e.jsx("span",{className:"ml-1 font-semibold text-t-secondary",children:n(u,"d")})]})]},h))})]})]}),e.jsx(ne,{className:"h-[736px]",type:"always",children:e.jsxs("div",{className:"flex",children:[e.jsx(j.div,{className:"relative w-18",variants:ue,children:c.map((u,h)=>e.jsx(j.div,{className:"relative",style:{height:"96px"},initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:h*.02,...k},children:e.jsx("div",{className:"absolute -top-3 right-2 flex h-6 items-center",children:h!==0&&e.jsx("span",{className:"text-xs text-t-quaternary",children:n(new Date().setHours(u,0,0,0),r?"HH:00":"h a")})})},u))}),e.jsxs(j.div,{className:"relative flex-1 border-l",variants:ue,children:[e.jsx("div",{className:"grid grid-cols-7 divide-x",children:d.map((u,h)=>{const f=s.filter(g=>W(v(g.startDate),u)||W(v(g.endDate),u)),p=es(f);return e.jsxs(j.div,{className:"relative",initial:{opacity:0},animate:{opacity:1},transition:{delay:h*.1,...k},children:[c.map((g,m)=>e.jsxs(j.div,{className:"relative",style:{height:"96px"},initial:{opacity:0},animate:{opacity:1},transition:{delay:m*.01,...k},children:[m!==0&&e.jsx("div",{className:"pointer-events-none absolute inset-x-0 top-0 border-b"}),e.jsx(me,{date:u,hour:g,minute:0,className:"absolute inset-x-0 top-0  h-[48px]",children:e.jsx(Q,{startDate:u,startTime:{hour:g,minute:0},children:e.jsx("div",{className:"absolute inset-0 cursor-pointer transition-colors hover:bg-secondary"})})}),e.jsx("div",{className:"pointer-events-none absolute inset-x-0 top-1/2 border-b border-dashed border-b-tertiary"}),e.jsx(me,{date:u,hour:g,minute:30,className:"absolute inset-x-0 bottom-0 h-[48px]",children:e.jsx(Q,{startDate:u,startTime:{hour:g,minute:30},children:e.jsx("div",{className:"absolute inset-0 cursor-pointer transition-colors hover:bg-secondary"})})})]},g)),e.jsx(os,{groupedEvents:p,day:u})]},h)})}),e.jsx(is,{})]})]})})]})]})}const Sn=["January","February","March","April","May","June","July","August","September","October","November","December"],kn=["Su","Mo","Tu","We","Th","Fr","Sa"];function Mn({singleDayEvents:s,multiDayEvents:a}){const{selectedDate:t,setSelectedDate:r}=M(),n=aa(t),i=[...a,...s];return e.jsx("div",{className:"flex flex-col h-full  overflow-y-auto p-4  sm:p-6",children:e.jsx(j.div,{initial:"initial",animate:"animate",variants:ue,className:"grid grid-cols-1 gap-4 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 auto-rows-fr",children:Sn.map((l,o)=>{const d=new Date(n,o,1),c=ts(d);return e.jsxs(j.div,{className:"flex flex-col border border-border rounded-lg shadow-sm overflow-hidden",initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{delay:o*.05,...k},role:"region","aria-label":`${l} ${n} calendar`,children:[e.jsx("div",{className:"px-3 py-2 text-center font-semibold text-sm sm:text-base cursor-pointer hover:bg-primary/20 transition-colors",onClick:()=>r(new Date(n,o,1)),role:"button",tabIndex:0,onKeyDown:u=>{(u.key==="Enter"||u.key===" ")&&r(new Date(n,o,1))},"aria-label":`Select ${l}`,children:l}),e.jsx("div",{className:"grid grid-cols-7 text-center text-xs font-medium text-muted-foreground py-2",children:kn.map(u=>e.jsx("div",{className:"p-1",children:u},u))}),e.jsx("div",{className:"grid grid-cols-7 gap-0.5 p-1.5 flex-grow text-xs",children:c.map(u=>{const h=ke(u.date,d),f=W(u.date,new Date),p=i.filter(m=>W(new Date(m.startDate),u.date)),g=p.length>0;return e.jsx("div",{className:S("flex flex-col items-center justify-start p-1 min-h-[2rem] relative",!h&&"text-muted-foreground/40",g&&h?"cursor-pointer hover:bg-accent/20 hover:rounded-md":"cursor-default"),children:h&&g?e.jsx(qe,{date:u.date,events:p,children:e.jsxs("div",{className:"w-full h-full flex flex-col items-center justify-start gap-0.5",children:[e.jsx("span",{className:S("size-5 flex items-center justify-center font-medium",f&&"rounded-full bg-primary text-primary-foreground"),children:u.day}),e.jsx("div",{className:"flex justify-center items-center gap-0.5",children:p.length<=2?p.slice(0,2).map(m=>e.jsx(ee,{color:m.color,className:"size-1.5"},m.id)):e.jsxs("div",{className:"flex flex-col justify-center items-center",children:[e.jsx(ee,{color:p[0].color,className:"size-1.5"}),e.jsxs("span",{className:"text-[0.6rem]",children:["+",p.length-1]})]})})]})}):e.jsx("div",{className:"w-full h-full flex flex-col items-center justify-start",children:e.jsx("span",{className:S("size-5 flex items-center justify-center font-medium"),children:u.day})})},u.date.toISOString())})})]},l)})})})}function zn(){const{view:s,events:a}=M(),t=a.filter(n=>{const i=v(n.startDate),l=v(n.endDate);return W(i,l)}),r=a.filter(n=>{const i=v(n.startDate),l=v(n.endDate);return!W(i,l)});return e.jsx("div",{className:"w-full h-full overflow-scroll relative min-h-[89vh]",children:e.jsxs(j.div,{initial:"initial",animate:"animate",exit:"exit",variants:Xe,transition:k,children:[s==="month"&&e.jsx(an,{singleDayEvents:t,multiDayEvents:r}),s==="week"&&e.jsx(Nn,{singleDayEvents:t,multiDayEvents:r}),s==="day"&&e.jsx(jn,{singleDayEvents:t,multiDayEvents:r}),s==="year"&&e.jsx(Mn,{singleDayEvents:t,multiDayEvents:r}),s==="agenda"&&e.jsx(j.div,{initial:"initial",animate:"animate",exit:"exit",variants:Xe,transition:k,children:e.jsx(qr,{})},"agenda")]},s)})}const jt=j.create(L),En=j.create(ja);function Cn({view:s,events:a}){const{selectedDate:t,setSelectedDate:r,formatDate:n}=M(),i=n(t,"MMMM"),l=t.getFullYear(),o=x.useMemo(()=>Wr(a,t,s),[a,t,s]),d=()=>r(xt(t,s,"previous")),c=()=>r(xt(t,s,"next"));return e.jsxs("div",{className:"space-y-0.5",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(j.span,{className:"text-lg font-semibold",initial:{x:-20,opacity:0},animate:{x:0,opacity:1},transition:k,children:[i," ",l]}),e.jsx(At,{mode:"wait",children:e.jsxs(En,{variant:"secondary",initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.8,opacity:0},transition:k,children:[o," events"]},o)})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(jt,{variant:"outline",size:"icon",className:"h-6 w-6",onClick:d,variants:Ge,whileHover:"hover",whileTap:"tap",children:e.jsx(Ft,{className:"h-4 w-4"})}),e.jsx(j.p,{className:"text-sm text-muted-foreground",initial:{opacity:0},animate:{opacity:1},transition:k,children:Fr(s,t)}),e.jsx(jt,{variant:"outline",size:"icon",className:"h-6 w-6",onClick:c,variants:Ge,whileHover:"hover",whileTap:"tap",children:e.jsx(It,{className:"h-4 w-4"})})]})]})}var ls="Toggle",cs=x.forwardRef((s,a)=>{const{pressed:t,defaultPressed:r,onPressedChange:n,...i}=s,[l,o]=Na({prop:t,onChange:n,defaultProp:r??!1,caller:ls});return e.jsx(Sa.button,{type:"button","aria-pressed":l,"data-state":l?"on":"off","data-disabled":s.disabled?"":void 0,...i,ref:a,onClick:ka(s.onClick,()=>{s.disabled||o(!l)})})});cs.displayName=ls;var ds=cs;const Tn=oe("inline-flex items-center justify-center gap-2 rounded-md text-sm font-medium transition-colors hover:bg-muted hover:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 data-[state=on]:bg-accent data-[state=on]:text-accent-foreground [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-transparent",outline:"border border-input bg-transparent shadow-sm hover:bg-accent hover:text-accent-foreground"},size:{default:"h-9 px-2 min-w-9",sm:"h-8 px-1.5 min-w-8",lg:"h-10 px-2.5 min-w-10"}},defaultVariants:{variant:"default",size:"default"}}),us=x.forwardRef(({className:s,variant:a,size:t,...r},n)=>e.jsx(ds,{ref:n,className:S(Tn({variant:a,size:t,className:s})),...r}));us.displayName=ds.displayName;function _n(){const{selectedColors:s,filterEventsBySelectedColors:a,clearFilter:t}=M(),r=["blue","green","red","yellow","purple","orange"];return e.jsxs(Wt,{children:[e.jsx(Lt,{asChild:!0,children:e.jsx(us,{variant:"outline",className:"cursor-pointer w-fit",children:e.jsx(Ba,{className:"h-4 w-4"})})}),e.jsxs(Pt,{align:"end",className:"w-[150px]",children:[r.map((n,i)=>e.jsxs(re,{className:"flex items-center gap-2 cursor-pointer",onClick:l=>{l.preventDefault(),a(n)},children:[e.jsx("div",{className:`size-3.5 rounded-full bg-${n}-600 dark:bg-${n}-700`}),e.jsxs("span",{className:"capitalize flex justify-center items-center gap-2",children:[n,e.jsx("span",{children:s.includes(n)&&e.jsx("span",{className:"text-blue-500",children:e.jsx($t,{className:"size-4"})})})]})]},i)),e.jsx(Da,{className:"my-2"}),e.jsxs(re,{disabled:s.length===0,className:"flex gap-2 cursor-pointer",onClick:n=>{n.preventDefault(),t()},children:[e.jsx(Ua,{className:"size-3.5"}),"Clear Filter"]})]})]})}const Hn=j.create(L);function Rn(){const{setSelectedDate:s,formatDate:a}=M(),t=new Date,r=()=>s(t);return e.jsxs(Hn,{variant:"outline",className:"flex h-14 w-14 flex-col items-center justify-center p-0 text-center",onClick:r,variants:Ge,whileHover:"hover",whileTap:"tap",transition:k,children:[e.jsx(j.span,{className:"w-full bg-primary py-1 text-xs font-semibold text-primary-foreground",initial:{y:-10,opacity:0},animate:{y:0,opacity:1},transition:{delay:.1,...k},children:a(t,"MMM").toUpperCase()}),e.jsx(j.span,{className:"text-lg font-bold",initial:{y:10,opacity:0},animate:{y:0,opacity:1},transition:{delay:.2,...k},children:t.getDate()})]})}const On=({children:s,max:a,className:t,...r})=>{const n=x.Children.count(s),i=x.Children.toArray(s).slice(0,a).reverse(),l=a?Math.max(n-a,1):0;return e.jsxs("div",{className:S("flex items-center flex-row-reverse",t),...r,children:[l>0&&e.jsx(Me,{className:"-ml-2 hover:z-10 relative ring-2 ring-background",children:e.jsxs(ze,{className:"bg-muted-foreground text-white",children:["+",l]})}),i.map((o,d)=>x.isValidElement(o)?e.jsx("div",{className:"-ml-2 hover:z-10 relative",children:x.cloneElement(o,{className:"ring-2 ring-background"})},d):null)]})};function An(){const{users:s,selectedUserId:a,filterEventsBySelectedUser:t}=M();return e.jsxs(kt,{value:a,onValueChange:t,children:[e.jsx(Mt,{className:"w-full",children:e.jsx(zt,{placeholder:"Select a user"})}),e.jsxs(Et,{align:"end",children:[e.jsxs($e,{value:"all",children:[e.jsx(On,{className:"mx-2 flex items-center",max:3,children:s.map(r=>e.jsxs(Me,{className:"h-8 w-8 text-sm",children:[e.jsx(Ye,{src:r.picturePath??void 0,alt:r.name}),e.jsx(ze,{className:"text-sm font-semibold",children:r.name[0]})]},r.id))}),"All"]}),s.map(r=>e.jsx($e,{value:r.id,className:"flex-1 cursor-pointer",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(Me,{className:"h-8 w-8",children:[e.jsx(Ye,{src:r.picturePath??void 0,alt:r.name}),e.jsx(ze,{className:"text-sm font-semibold",children:r.name[0]})]},r.id),e.jsx("p",{className:"truncate",children:r.name})]})},r.id))]})]})}var Bn=(s,a,t,r,n,i,l,o)=>{let d=document.documentElement,c=["light","dark"];function u(p){(Array.isArray(s)?s:[s]).forEach(g=>{let m=g==="class",b=m&&i?n.map(N=>i[N]||N):n;m?(d.classList.remove(...b),d.classList.add(i&&i[p]?i[p]:p)):d.setAttribute(g,p)}),h(p)}function h(p){o&&c.includes(p)&&(d.style.colorScheme=p)}function f(){return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}if(r)u(r);else try{let p=localStorage.getItem(a)||t,g=l&&p==="system"?f():p;u(g)}catch{}},In=x.createContext(void 0),Fn={setTheme:s=>{},themes:[]},Wn=()=>{var s;return(s=x.useContext(In))!=null?s:Fn};x.memo(({forcedTheme:s,storageKey:a,attribute:t,enableSystem:r,enableColorScheme:n,defaultTheme:i,value:l,themes:o,nonce:d,scriptProps:c})=>{let u=JSON.stringify([t,a,i,s,o,l,r,n]).slice(1,-1);return x.createElement("script",{...c,suppressHydrationWarning:!0,nonce:typeof window>"u"?d:"",dangerouslySetInnerHTML:{__html:`(${Bn.toString()})(${u})`}})});function Ln(){const{badgeVariant:s,setBadgeVariant:a,use24HourFormat:t,toggleTimeFormat:r,view:n,setView:i,agendaModeGroupBy:l,setAgendaModeGroupBy:o,timezone:d,setTimezone:c}=M(),{showConfirmation:u,setShowConfirmation:h}=He(),{theme:f,setTheme:p}=Wn(),g=f==="dark",m=s==="dot";return e.jsxs(Wt,{children:[e.jsx(Lt,{asChild:!0,children:e.jsx(L,{variant:"outline",size:"icon",children:e.jsx(ra,{})})}),e.jsxs(Pt,{className:"w-56",children:[e.jsx(Oe,{children:"Calendar settings"}),e.jsx(Ae,{}),e.jsxs(Be,{children:[e.jsxs(re,{children:["Use dark mode",e.jsx(xe,{children:e.jsx(fe,{icon:g?e.jsx(pa,{className:"h-4 w-4"}):e.jsx(Xa,{className:"h-4 w-4"}),checked:g,onCheckedChange:b=>p(b?"dark":"light")})})]}),e.jsxs(re,{children:["Show confirmation dialog on event drop",e.jsx(xe,{children:e.jsx(fe,{icon:u?e.jsx($t,{className:"h-4 w-4"}):e.jsx(Bt,{className:"h-4 w-4"}),checked:u,onCheckedChange:b=>h(b)})})]}),e.jsxs(re,{children:["Use dot badge",e.jsx(xe,{children:e.jsx(fe,{icon:m?e.jsx(Oa,{className:"w-4 h-4"}):e.jsx($a,{className:"w-4 h-4"}),checked:m,onCheckedChange:b=>a(b?"dot":"colored")})})]}),e.jsxs(re,{children:["Use 24 hour format",e.jsx(xe,{children:e.jsx(fe,{icon:t?e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",className:"icon icon-tabler icons-tabler-outline icon-tabler-clock-24",children:[e.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),e.jsx("path",{d:"M3 12a9 9 0 0 0 5.998 8.485m12.002 -8.485a9 9 0 1 0 -18 0"}),e.jsx("path",{d:"M12 7v5"}),e.jsx("path",{d:"M12 15h2a1 1 0 0 1 1 1v1a1 1 0 0 1 -1 1h-1a1 1 0 0 0 -1 1v1a1 1 0 0 0 1 1h2"}),e.jsx("path",{d:"M18 15v2a1 1 0 0 0 1 1h1"}),e.jsx("path",{d:"M21 15v6"})]}):e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",className:"icon icon-tabler icons-tabler-outline icon-tabler-clock-12",children:[e.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),e.jsx("path",{d:"M3 12a9 9 0 0 0 9 9m9 -9a9 9 0 1 0 -18 0"}),e.jsx("path",{d:"M12 7v5l.5 .5"}),e.jsx("path",{d:"M18 15h2a1 1 0 0 1 1 1v1a1 1 0 0 1 -1 1h-1a1 1 0 0 0 -1 1v1a1 1 0 0 0 1 1h2"}),e.jsx("path",{d:"M15 21v-6"})]}),checked:t,onCheckedChange:r})})]})]}),e.jsx(Ae,{}),e.jsxs(Be,{children:[e.jsx(Oe,{children:"Timezone"}),e.jsxs(ut,{value:d,onValueChange:c,children:[e.jsx(te,{value:"Europe/Stockholm",children:"Stockholm (CET/CEST)"}),e.jsx(te,{value:"UTC",children:"UTC"}),e.jsx(te,{value:"Europe/London",children:"London (GMT/BST)"}),e.jsx(te,{value:"America/New_York",children:"New York (EST/EDT)"})]})]}),e.jsx(Ae,{}),e.jsxs(Be,{children:[e.jsx(Oe,{children:"Agenda view group by"}),e.jsxs(ut,{value:l,onValueChange:b=>o(b),children:[e.jsx(te,{value:"date",children:"Date"}),e.jsx(te,{value:"color",children:"Color"})]})]})]})]})}const Pn=[{name:"Agenda",value:"agenda",icon:()=>e.jsx(Ta,{className:"h-4 w-4"})},{name:"Day",value:"day",icon:()=>e.jsx(na,{className:"h-4 w-4"})},{name:"Week",value:"week",icon:()=>e.jsx(Ha,{className:"h-4 w-4"})},{name:"Month",value:"month",icon:()=>e.jsx(La,{className:"h-4 w-4"})},{name:"Year",value:"year",icon:()=>e.jsx(Fa,{className:"h-4 w-4"})}];function $n(){const{view:s,setView:a}=M();return e.jsx(Ma,{value:s,onValueChange:t=>a(t),className:"gap-4 sm:w-auto w-full",children:e.jsx(za,{className:"h-auto gap-2 rounded-xl p-1 w-full",children:Pn.map(({icon:t,name:r,value:n})=>{const i=s===n;return e.jsx(j.div,{layout:!0,className:S("flex h-8 items-center justify-center overflow-hidden rounded-md",i?"flex-1":"flex-none"),onClick:()=>a(n),initial:!1,animate:{width:i?120:32},transition:{type:"tween",stiffness:400,damping:25},children:e.jsx(Ea,{value:n,asChild:!0,children:e.jsxs(j.div,{className:"flex h-8 w-full items-center justify-center cursor-pointer",animate:{filter:"blur(0px)"},exit:{filter:"blur(2px)"},transition:{duration:.25,ease:"easeOut"},children:[e.jsx(t,{}),e.jsx(At,{initial:!1,children:i&&e.jsx(j.span,{className:"font-medium",initial:{opacity:0,scaleX:.8},animate:{opacity:1,scaleX:1},transition:{duration:.25,ease:"easeOut"},style:{originX:0},children:r})})]})})},n)})})})}const Vn=x.memo($n);function Un(){const{view:s,events:a}=M();return e.jsxs("div",{className:"flex flex-col gap-4 border-b p-4 lg:flex-row lg:items-center lg:justify-between",children:[e.jsxs(j.div,{className:"flex items-center gap-3",variants:vr,initial:"initial",animate:"animate",transition:k,children:[e.jsx(Rn,{}),e.jsx(Cn,{view:s,events:a})]}),e.jsxs(j.div,{className:"flex flex-col gap-4 lg:flex-row lg:items-center lg:gap-1.5",variants:br,initial:"initial",animate:"animate",transition:k,children:[e.jsxs("div",{className:"options flex-wrap flex items-center gap-4 md:gap-2",children:[e.jsx(_n,{}),e.jsx(Vn,{})]}),e.jsxs("div",{className:"flex flex-col gap-4 lg:flex-row lg:items-center lg:gap-1.5",children:[e.jsx(An,{}),e.jsx(Q,{children:e.jsxs(L,{children:[e.jsx(Ht,{className:"h-4 w-4"}),"Add Event"]})})]}),e.jsx(Ln,{})]})]})}const Yn=async()=>{try{const s=await fetch("/calendar/events",{headers:{Accept:"application/json"}});if(!s.ok)throw new Error("Failed to fetch events");return(await s.json()).map(t=>({id:parseInt(t.id),startDate:t.start,endDate:t.end||t.start,title:t.title,color:"#3b82f6",description:"",user:{id:t.resourceId||"1",name:"",picturePath:null}}))}catch(s){return console.error("Error fetching events:",s),[]}},Xn=async()=>{try{const s=await fetch("/calendar/resources",{headers:{Accept:"application/json"}});if(!s.ok)throw new Error("Failed to fetch users");return(await s.json()).map(t=>({id:t.id,name:t.title,picturePath:null}))}catch(s){return console.error("Error fetching users:",s),[]}};function hi(){const[s,a]=x.useState([]),[t,r]=x.useState([]),[n,i]=x.useState(!0);return x.useEffect(()=>{(async()=>{try{const o=await Xn();r(o);const c=(await Yn()).map(u=>({...u,user:o.find(h=>h.id===u.user.id)||u.user}));a(c)}catch(o){console.error("Error fetching calendar data:",o)}finally{i(!1)}})()},[]),n?e.jsx("div",{className:"w-full border rounded-xl flex items-center justify-center min-h-[99vh] h-[99vh]",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-gray-900 mx-auto"}),e.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Loading calendar..."})]})}):e.jsx(Tr,{events:s,users:t,view:"day",children:e.jsx(Jr,{showConfirmation:!1,children:e.jsxs("div",{className:"w-full border rounded-xl min-h-[88vh]",children:[e.jsx(Un,{}),e.jsx(zn,{})]})})})}export{hi as C};
