import{r as d,j as e,G as Ue,e as En}from"./app-De-pmVM3.js";import{b as Sn,U as lt,ax as Ft,c as It,W as Ua,V as ct,ay as U,az as R,aA as L,aB as Le,aC as Tn,aD as Pn,aE as _n,aF as $n,t as An,j as _,ao as dt,L as Rt,aG as Wn,a as Qe,O as On,C as Ve,a4 as ze,M as Ba,S as te,Q as Hn,ak as Fn,ap as In,X as _e,at as G,a5 as I,aH as Qa,ac as Rn,aI as Ln,ad as Vn,ae as zn,af as Yn,ag as Jn,ah as Un,ai as Bn,aj as Qn,w as $,_ as Lt,aJ as Vt,u as ut,v as Ke,aK as je,aL as Tt,F as Ne,k as Ce,P as Se,l as Te,n as re,o as Pe,p as Kn,r as Ee,B as ie,D as oe,E as le,G as ce,H as J,z as Xn,A as ge,T as qn,x as Ka,y as Xa,I as Pt,am as rt,s as qa,e as Ga,N as Za,aM as Fe,J as Gn,K as Zn,aN as es,al as xa,aw as ts,as as en,a6 as zt,a7 as Yt,a8 as Jt,ab as Ut,a9 as Bt,aa as Qt,q as Kt,aO as as,f as ns,aP as ss,au as _t,av as Y,aQ as Oe,$ as rs,Y as is,a2 as os,a1 as gt,a0 as ls,Z as cs,a3 as ds}from"./switch-3pypaVK_.js";import{B as me}from"./badge-B_aCqkrB.js";import{d as Ae,B as H,c as P,a as us}from"./button-BdDmD3PX.js";import{v as we,w as ke,x as Me,X as Be,g as tn,y as an,z as st,B as Xt,k as ft,l as pt,m as vt,n as yt,S as ms,f as hs,E as xs}from"./app-layout-Dxf_lvi9.js";import{C as it,T as gs,a as fs,b as ga,c as fa}from"./tabs-D1-TJ5nh.js";import{D as Xe,b as qe,g as Ge,c as Ze,d as mt,e as qt,a as ps}from"./dialog-yQCJy72m.js";import{C as pa,a as va,b as ya,c as ba,d as ja,E as vs}from"./card-CKPGcniq.js";import{S as He}from"./separator-BvO7FVTI.js";import{C as Gt}from"./index-B6sbAKco.js";import{I as $t}from"./input-CoQm3KMS.js";import{L as bt}from"./label-D3AWD7T8.js";import{C as jt}from"./checkbox-D-kc6QfU.js";import{L as wa}from"./loader-circle-DmR7l69q.js";const ys=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]],bs=Ae("ellipsis",ys);const js=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],ws=Ae("globe",js);const ks=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],nn=Ae("map-pin",ks);const Ms=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],sn=Ae("save",Ms);const Ds=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],At=Ae("tag",Ds);const Ns=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Cs=Ae("trash-2",Ns);const Es=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],Wt=Ae("zap",Es);function rn(t,a){return Sn(t,a?.in).getDate()}function Ss(t,a){return lt(It(a?.in||t,t),Ft(a?.in||t))}function Ts(t,a){return Ua(It(a?.in||t,t),Ft(a?.in||t),a)}function Ps(t,a){return ct(It(a?.in||t,t),Ft(a?.in||t))}const ka={lessThanXSeconds:{standalone:{one:"weniger als 1 Sekunde",other:"weniger als {{count}} Sekunden"},withPreposition:{one:"weniger als 1 Sekunde",other:"weniger als {{count}} Sekunden"}},xSeconds:{standalone:{one:"1 Sekunde",other:"{{count}} Sekunden"},withPreposition:{one:"1 Sekunde",other:"{{count}} Sekunden"}},halfAMinute:{standalone:"eine halbe Minute",withPreposition:"einer halben Minute"},lessThanXMinutes:{standalone:{one:"weniger als 1 Minute",other:"weniger als {{count}} Minuten"},withPreposition:{one:"weniger als 1 Minute",other:"weniger als {{count}} Minuten"}},xMinutes:{standalone:{one:"1 Minute",other:"{{count}} Minuten"},withPreposition:{one:"1 Minute",other:"{{count}} Minuten"}},aboutXHours:{standalone:{one:"etwa 1 Stunde",other:"etwa {{count}} Stunden"},withPreposition:{one:"etwa 1 Stunde",other:"etwa {{count}} Stunden"}},xHours:{standalone:{one:"1 Stunde",other:"{{count}} Stunden"},withPreposition:{one:"1 Stunde",other:"{{count}} Stunden"}},xDays:{standalone:{one:"1 Tag",other:"{{count}} Tage"},withPreposition:{one:"1 Tag",other:"{{count}} Tagen"}},aboutXWeeks:{standalone:{one:"etwa 1 Woche",other:"etwa {{count}} Wochen"},withPreposition:{one:"etwa 1 Woche",other:"etwa {{count}} Wochen"}},xWeeks:{standalone:{one:"1 Woche",other:"{{count}} Wochen"},withPreposition:{one:"1 Woche",other:"{{count}} Wochen"}},aboutXMonths:{standalone:{one:"etwa 1 Monat",other:"etwa {{count}} Monate"},withPreposition:{one:"etwa 1 Monat",other:"etwa {{count}} Monaten"}},xMonths:{standalone:{one:"1 Monat",other:"{{count}} Monate"},withPreposition:{one:"1 Monat",other:"{{count}} Monaten"}},aboutXYears:{standalone:{one:"etwa 1 Jahr",other:"etwa {{count}} Jahre"},withPreposition:{one:"etwa 1 Jahr",other:"etwa {{count}} Jahren"}},xYears:{standalone:{one:"1 Jahr",other:"{{count}} Jahre"},withPreposition:{one:"1 Jahr",other:"{{count}} Jahren"}},overXYears:{standalone:{one:"mehr als 1 Jahr",other:"mehr als {{count}} Jahre"},withPreposition:{one:"mehr als 1 Jahr",other:"mehr als {{count}} Jahren"}},almostXYears:{standalone:{one:"fast 1 Jahr",other:"fast {{count}} Jahre"},withPreposition:{one:"fast 1 Jahr",other:"fast {{count}} Jahren"}}},_s=(t,a,n)=>{let s;const r=n?.addSuffix?ka[t].withPreposition:ka[t].standalone;return typeof r=="string"?s=r:a===1?s=r.one:s=r.other.replace("{{count}}",String(a)),n?.addSuffix?n.comparison&&n.comparison>0?"in "+s:"vor "+s:s},$s={full:"EEEE, do MMMM y",long:"do MMMM y",medium:"do MMM y",short:"dd.MM.y"},As={full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},Ws={full:"{{date}} 'um' {{time}}",long:"{{date}} 'um' {{time}}",medium:"{{date}} {{time}}",short:"{{date}} {{time}}"},Os={date:U({formats:$s,defaultWidth:"full"}),time:U({formats:As,defaultWidth:"full"}),dateTime:U({formats:Ws,defaultWidth:"full"})},Hs={lastWeek:"'letzten' eeee 'um' p",yesterday:"'gestern um' p",today:"'heute um' p",tomorrow:"'morgen um' p",nextWeek:"eeee 'um' p",other:"P"},Fs=(t,a,n,s)=>Hs[t],Is={narrow:["v.Chr.","n.Chr."],abbreviated:["v.Chr.","n.Chr."],wide:["vor Christus","nach Christus"]},Rs={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1. Quartal","2. Quartal","3. Quartal","4. Quartal"]},Ot={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mär","Apr","Mai","Jun","Jul","Aug","Sep","Okt","Nov","Dez"],wide:["Januar","Februar","März","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember"]},Ls={narrow:Ot.narrow,abbreviated:["Jan.","Feb.","März","Apr.","Mai","Juni","Juli","Aug.","Sep.","Okt.","Nov.","Dez."],wide:Ot.wide},Vs={narrow:["S","M","D","M","D","F","S"],short:["So","Mo","Di","Mi","Do","Fr","Sa"],abbreviated:["So.","Mo.","Di.","Mi.","Do.","Fr.","Sa."],wide:["Sonntag","Montag","Dienstag","Mittwoch","Donnerstag","Freitag","Samstag"]},zs={narrow:{am:"vm.",pm:"nm.",midnight:"Mitternacht",noon:"Mittag",morning:"Morgen",afternoon:"Nachm.",evening:"Abend",night:"Nacht"},abbreviated:{am:"vorm.",pm:"nachm.",midnight:"Mitternacht",noon:"Mittag",morning:"Morgen",afternoon:"Nachmittag",evening:"Abend",night:"Nacht"},wide:{am:"vormittags",pm:"nachmittags",midnight:"Mitternacht",noon:"Mittag",morning:"Morgen",afternoon:"Nachmittag",evening:"Abend",night:"Nacht"}},Ys={narrow:{am:"vm.",pm:"nm.",midnight:"Mitternacht",noon:"Mittag",morning:"morgens",afternoon:"nachm.",evening:"abends",night:"nachts"},abbreviated:{am:"vorm.",pm:"nachm.",midnight:"Mitternacht",noon:"Mittag",morning:"morgens",afternoon:"nachmittags",evening:"abends",night:"nachts"},wide:{am:"vormittags",pm:"nachmittags",midnight:"Mitternacht",noon:"Mittag",morning:"morgens",afternoon:"nachmittags",evening:"abends",night:"nachts"}},Js=t=>Number(t)+".",Us={ordinalNumber:Js,era:R({values:Is,defaultWidth:"wide"}),quarter:R({values:Rs,defaultWidth:"wide",argumentCallback:t=>t-1}),month:R({values:Ot,formattingValues:Ls,defaultWidth:"wide"}),day:R({values:Vs,defaultWidth:"wide"}),dayPeriod:R({values:zs,defaultWidth:"wide",formattingValues:Ys,defaultFormattingWidth:"wide"})},Bs=/^(\d+)(\.)?/i,Qs=/\d+/i,Ks={narrow:/^(v\.? ?Chr\.?|n\.? ?Chr\.?)/i,abbreviated:/^(v\.? ?Chr\.?|n\.? ?Chr\.?)/i,wide:/^(vor Christus|vor unserer Zeitrechnung|nach Christus|unserer Zeitrechnung)/i},Xs={any:[/^v/i,/^n/i]},qs={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](\.)? Quartal/i},Gs={any:[/1/i,/2/i,/3/i,/4/i]},Zs={narrow:/^[jfmasond]/i,abbreviated:/^(j[aä]n|feb|mär[z]?|apr|mai|jun[i]?|jul[i]?|aug|sep|okt|nov|dez)\.?/i,wide:/^(januar|februar|märz|april|mai|juni|juli|august|september|oktober|november|dezember)/i},er={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^j[aä]/i,/^f/i,/^mär/i,/^ap/i,/^mai/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},tr={narrow:/^[smdmf]/i,short:/^(so|mo|di|mi|do|fr|sa)/i,abbreviated:/^(son?|mon?|die?|mit?|don?|fre?|sam?)\.?/i,wide:/^(sonntag|montag|dienstag|mittwoch|donnerstag|freitag|samstag)/i},ar={any:[/^so/i,/^mo/i,/^di/i,/^mi/i,/^do/i,/^f/i,/^sa/i]},nr={narrow:/^(vm\.?|nm\.?|Mitternacht|Mittag|morgens|nachm\.?|abends|nachts)/i,abbreviated:/^(vorm\.?|nachm\.?|Mitternacht|Mittag|morgens|nachm\.?|abends|nachts)/i,wide:/^(vormittags|nachmittags|Mitternacht|Mittag|morgens|nachmittags|abends|nachts)/i},sr={any:{am:/^v/i,pm:/^n/i,midnight:/^Mitte/i,noon:/^Mitta/i,morning:/morgens/i,afternoon:/nachmittags/i,evening:/abends/i,night:/nachts/i}},rr={ordinalNumber:Le({matchPattern:Bs,parsePattern:Qs,valueCallback:t=>parseInt(t)}),era:L({matchPatterns:Ks,defaultMatchWidth:"wide",parsePatterns:Xs,defaultParseWidth:"any"}),quarter:L({matchPatterns:qs,defaultMatchWidth:"wide",parsePatterns:Gs,defaultParseWidth:"any",valueCallback:t=>t+1}),month:L({matchPatterns:Zs,defaultMatchWidth:"wide",parsePatterns:er,defaultParseWidth:"any"}),day:L({matchPatterns:tr,defaultMatchWidth:"wide",parsePatterns:ar,defaultParseWidth:"any"}),dayPeriod:L({matchPatterns:nr,defaultMatchWidth:"wide",parsePatterns:sr,defaultParseWidth:"any"})},ir={code:"de",formatDistance:_s,formatLong:Os,formatRelative:Fs,localize:Us,match:rr,options:{weekStartsOn:1,firstWeekContainsDate:4}},or={full:"EEEE, d MMMM yyyy",long:"d MMMM yyyy",medium:"d MMM yyyy",short:"dd/MM/yyyy"},lr={full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},cr={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},dr={date:U({formats:or,defaultWidth:"full"}),time:U({formats:lr,defaultWidth:"full"}),dateTime:U({formats:cr,defaultWidth:"full"})},ur={code:"en-GB",formatDistance:$n,formatLong:dr,formatRelative:_n,localize:Pn,match:Tn,options:{weekStartsOn:1,firstWeekContainsDate:4}},mr={lessThanXSeconds:{one:"menos de un segundo",other:"menos de {{count}} segundos"},xSeconds:{one:"1 segundo",other:"{{count}} segundos"},halfAMinute:"medio minuto",lessThanXMinutes:{one:"menos de un minuto",other:"menos de {{count}} minutos"},xMinutes:{one:"1 minuto",other:"{{count}} minutos"},aboutXHours:{one:"alrededor de 1 hora",other:"alrededor de {{count}} horas"},xHours:{one:"1 hora",other:"{{count}} horas"},xDays:{one:"1 día",other:"{{count}} días"},aboutXWeeks:{one:"alrededor de 1 semana",other:"alrededor de {{count}} semanas"},xWeeks:{one:"1 semana",other:"{{count}} semanas"},aboutXMonths:{one:"alrededor de 1 mes",other:"alrededor de {{count}} meses"},xMonths:{one:"1 mes",other:"{{count}} meses"},aboutXYears:{one:"alrededor de 1 año",other:"alrededor de {{count}} años"},xYears:{one:"1 año",other:"{{count}} años"},overXYears:{one:"más de 1 año",other:"más de {{count}} años"},almostXYears:{one:"casi 1 año",other:"casi {{count}} años"}},hr=(t,a,n)=>{let s;const r=mr[t];return typeof r=="string"?s=r:a===1?s=r.one:s=r.other.replace("{{count}}",a.toString()),n?.addSuffix?n.comparison&&n.comparison>0?"en "+s:"hace "+s:s},xr={full:"EEEE, d 'de' MMMM 'de' y",long:"d 'de' MMMM 'de' y",medium:"d MMM y",short:"dd/MM/y"},gr={full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},fr={full:"{{date}} 'a las' {{time}}",long:"{{date}} 'a las' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},pr={date:U({formats:xr,defaultWidth:"full"}),time:U({formats:gr,defaultWidth:"full"}),dateTime:U({formats:fr,defaultWidth:"full"})},vr={lastWeek:"'el' eeee 'pasado a la' p",yesterday:"'ayer a la' p",today:"'hoy a la' p",tomorrow:"'mañana a la' p",nextWeek:"eeee 'a la' p",other:"P"},yr={lastWeek:"'el' eeee 'pasado a las' p",yesterday:"'ayer a las' p",today:"'hoy a las' p",tomorrow:"'mañana a las' p",nextWeek:"eeee 'a las' p",other:"P"},br=(t,a,n,s)=>a.getHours()!==1?yr[t]:vr[t],jr={narrow:["AC","DC"],abbreviated:["AC","DC"],wide:["antes de cristo","después de cristo"]},wr={narrow:["1","2","3","4"],abbreviated:["T1","T2","T3","T4"],wide:["1º trimestre","2º trimestre","3º trimestre","4º trimestre"]},kr={narrow:["e","f","m","a","m","j","j","a","s","o","n","d"],abbreviated:["ene","feb","mar","abr","may","jun","jul","ago","sep","oct","nov","dic"],wide:["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre"]},Mr={narrow:["d","l","m","m","j","v","s"],short:["do","lu","ma","mi","ju","vi","sá"],abbreviated:["dom","lun","mar","mié","jue","vie","sáb"],wide:["domingo","lunes","martes","miércoles","jueves","viernes","sábado"]},Dr={narrow:{am:"a",pm:"p",midnight:"mn",noon:"md",morning:"mañana",afternoon:"tarde",evening:"tarde",night:"noche"},abbreviated:{am:"AM",pm:"PM",midnight:"medianoche",noon:"mediodia",morning:"mañana",afternoon:"tarde",evening:"tarde",night:"noche"},wide:{am:"a.m.",pm:"p.m.",midnight:"medianoche",noon:"mediodia",morning:"mañana",afternoon:"tarde",evening:"tarde",night:"noche"}},Nr={narrow:{am:"a",pm:"p",midnight:"mn",noon:"md",morning:"de la mañana",afternoon:"de la tarde",evening:"de la tarde",night:"de la noche"},abbreviated:{am:"AM",pm:"PM",midnight:"medianoche",noon:"mediodia",morning:"de la mañana",afternoon:"de la tarde",evening:"de la tarde",night:"de la noche"},wide:{am:"a.m.",pm:"p.m.",midnight:"medianoche",noon:"mediodia",morning:"de la mañana",afternoon:"de la tarde",evening:"de la tarde",night:"de la noche"}},Cr=(t,a)=>Number(t)+"º",Er={ordinalNumber:Cr,era:R({values:jr,defaultWidth:"wide"}),quarter:R({values:wr,defaultWidth:"wide",argumentCallback:t=>Number(t)-1}),month:R({values:kr,defaultWidth:"wide"}),day:R({values:Mr,defaultWidth:"wide"}),dayPeriod:R({values:Dr,defaultWidth:"wide",formattingValues:Nr,defaultFormattingWidth:"wide"})},Sr=/^(\d+)(º)?/i,Tr=/\d+/i,Pr={narrow:/^(ac|dc|a|d)/i,abbreviated:/^(a\.?\s?c\.?|a\.?\s?e\.?\s?c\.?|d\.?\s?c\.?|e\.?\s?c\.?)/i,wide:/^(antes de cristo|antes de la era com[uú]n|despu[eé]s de cristo|era com[uú]n)/i},_r={any:[/^ac/i,/^dc/i],wide:[/^(antes de cristo|antes de la era com[uú]n)/i,/^(despu[eé]s de cristo|era com[uú]n)/i]},$r={narrow:/^[1234]/i,abbreviated:/^T[1234]/i,wide:/^[1234](º)? trimestre/i},Ar={any:[/1/i,/2/i,/3/i,/4/i]},Wr={narrow:/^[efmajsond]/i,abbreviated:/^(ene|feb|mar|abr|may|jun|jul|ago|sep|oct|nov|dic)/i,wide:/^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre)/i},Or={narrow:[/^e/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^en/i,/^feb/i,/^mar/i,/^abr/i,/^may/i,/^jun/i,/^jul/i,/^ago/i,/^sep/i,/^oct/i,/^nov/i,/^dic/i]},Hr={narrow:/^[dlmjvs]/i,short:/^(do|lu|ma|mi|ju|vi|s[áa])/i,abbreviated:/^(dom|lun|mar|mi[ée]|jue|vie|s[áa]b)/i,wide:/^(domingo|lunes|martes|mi[ée]rcoles|jueves|viernes|s[áa]bado)/i},Fr={narrow:[/^d/i,/^l/i,/^m/i,/^m/i,/^j/i,/^v/i,/^s/i],any:[/^do/i,/^lu/i,/^ma/i,/^mi/i,/^ju/i,/^vi/i,/^sa/i]},Ir={narrow:/^(a|p|mn|md|(de la|a las) (mañana|tarde|noche))/i,any:/^([ap]\.?\s?m\.?|medianoche|mediodia|(de la|a las) (mañana|tarde|noche))/i},Rr={any:{am:/^a/i,pm:/^p/i,midnight:/^mn/i,noon:/^md/i,morning:/mañana/i,afternoon:/tarde/i,evening:/tarde/i,night:/noche/i}},Lr={ordinalNumber:Le({matchPattern:Sr,parsePattern:Tr,valueCallback:function(t){return parseInt(t,10)}}),era:L({matchPatterns:Pr,defaultMatchWidth:"wide",parsePatterns:_r,defaultParseWidth:"any"}),quarter:L({matchPatterns:$r,defaultMatchWidth:"wide",parsePatterns:Ar,defaultParseWidth:"any",valueCallback:t=>t+1}),month:L({matchPatterns:Wr,defaultMatchWidth:"wide",parsePatterns:Or,defaultParseWidth:"any"}),day:L({matchPatterns:Hr,defaultMatchWidth:"wide",parsePatterns:Fr,defaultParseWidth:"any"}),dayPeriod:L({matchPatterns:Ir,defaultMatchWidth:"any",parsePatterns:Rr,defaultParseWidth:"any"})},Vr={code:"es",formatDistance:hr,formatLong:pr,formatRelative:br,localize:Er,match:Lr,options:{weekStartsOn:1,firstWeekContainsDate:1}},zr={lessThanXSeconds:{one:"moins d’une seconde",other:"moins de {{count}} secondes"},xSeconds:{one:"1 seconde",other:"{{count}} secondes"},halfAMinute:"30 secondes",lessThanXMinutes:{one:"moins d’une minute",other:"moins de {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"environ 1 heure",other:"environ {{count}} heures"},xHours:{one:"1 heure",other:"{{count}} heures"},xDays:{one:"1 jour",other:"{{count}} jours"},aboutXWeeks:{one:"environ 1 semaine",other:"environ {{count}} semaines"},xWeeks:{one:"1 semaine",other:"{{count}} semaines"},aboutXMonths:{one:"environ 1 mois",other:"environ {{count}} mois"},xMonths:{one:"1 mois",other:"{{count}} mois"},aboutXYears:{one:"environ 1 an",other:"environ {{count}} ans"},xYears:{one:"1 an",other:"{{count}} ans"},overXYears:{one:"plus d’un an",other:"plus de {{count}} ans"},almostXYears:{one:"presqu’un an",other:"presque {{count}} ans"}},Yr=(t,a,n)=>{let s;const r=zr[t];return typeof r=="string"?s=r:a===1?s=r.one:s=r.other.replace("{{count}}",String(a)),n?.addSuffix?n.comparison&&n.comparison>0?"dans "+s:"il y a "+s:s},Jr={full:"EEEE d MMMM y",long:"d MMMM y",medium:"d MMM y",short:"dd/MM/y"},Ur={full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},Br={full:"{{date}} 'à' {{time}}",long:"{{date}} 'à' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Qr={date:U({formats:Jr,defaultWidth:"full"}),time:U({formats:Ur,defaultWidth:"full"}),dateTime:U({formats:Br,defaultWidth:"full"})},Kr={lastWeek:"eeee 'dernier à' p",yesterday:"'hier à' p",today:"'aujourd’hui à' p",tomorrow:"'demain à' p'",nextWeek:"eeee 'prochain à' p",other:"P"},Xr=(t,a,n,s)=>Kr[t],qr={narrow:["av. J.-C","ap. J.-C"],abbreviated:["av. J.-C","ap. J.-C"],wide:["avant Jésus-Christ","après Jésus-Christ"]},Gr={narrow:["T1","T2","T3","T4"],abbreviated:["1er trim.","2ème trim.","3ème trim.","4ème trim."],wide:["1er trimestre","2ème trimestre","3ème trimestre","4ème trimestre"]},Zr={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["janv.","févr.","mars","avr.","mai","juin","juil.","août","sept.","oct.","nov.","déc."],wide:["janvier","février","mars","avril","mai","juin","juillet","août","septembre","octobre","novembre","décembre"]},ei={narrow:["D","L","M","M","J","V","S"],short:["di","lu","ma","me","je","ve","sa"],abbreviated:["dim.","lun.","mar.","mer.","jeu.","ven.","sam."],wide:["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"]},ti={narrow:{am:"AM",pm:"PM",midnight:"minuit",noon:"midi",morning:"mat.",afternoon:"ap.m.",evening:"soir",night:"mat."},abbreviated:{am:"AM",pm:"PM",midnight:"minuit",noon:"midi",morning:"matin",afternoon:"après-midi",evening:"soir",night:"matin"},wide:{am:"AM",pm:"PM",midnight:"minuit",noon:"midi",morning:"du matin",afternoon:"de l’après-midi",evening:"du soir",night:"du matin"}},ai=(t,a)=>{const n=Number(t),s=a?.unit;if(n===0)return"0";const r=["year","week","hour","minute","second"];let o;return n===1?o=s&&r.includes(s)?"ère":"er":o="ème",n+o},ni=["MMM","MMMM"],si={preprocessor:(t,a)=>t.getDate()===1||!a.some(s=>s.isToken&&ni.includes(s.value))?a:a.map(s=>s.isToken&&s.value==="do"?{isToken:!0,value:"d"}:s),ordinalNumber:ai,era:R({values:qr,defaultWidth:"wide"}),quarter:R({values:Gr,defaultWidth:"wide",argumentCallback:t=>t-1}),month:R({values:Zr,defaultWidth:"wide"}),day:R({values:ei,defaultWidth:"wide"}),dayPeriod:R({values:ti,defaultWidth:"wide"})},ri=/^(\d+)(ième|ère|ème|er|e)?/i,ii=/\d+/i,oi={narrow:/^(av\.J\.C|ap\.J\.C|ap\.J\.-C)/i,abbreviated:/^(av\.J\.-C|av\.J-C|apr\.J\.-C|apr\.J-C|ap\.J-C)/i,wide:/^(avant Jésus-Christ|après Jésus-Christ)/i},li={any:[/^av/i,/^ap/i]},ci={narrow:/^T?[1234]/i,abbreviated:/^[1234](er|ème|e)? trim\.?/i,wide:/^[1234](er|ème|e)? trimestre/i},di={any:[/1/i,/2/i,/3/i,/4/i]},ui={narrow:/^[jfmasond]/i,abbreviated:/^(janv|févr|mars|avr|mai|juin|juill|juil|août|sept|oct|nov|déc)\.?/i,wide:/^(janvier|février|mars|avril|mai|juin|juillet|août|septembre|octobre|novembre|décembre)/i},mi={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^av/i,/^ma/i,/^juin/i,/^juil/i,/^ao/i,/^s/i,/^o/i,/^n/i,/^d/i]},hi={narrow:/^[lmjvsd]/i,short:/^(di|lu|ma|me|je|ve|sa)/i,abbreviated:/^(dim|lun|mar|mer|jeu|ven|sam)\.?/i,wide:/^(dimanche|lundi|mardi|mercredi|jeudi|vendredi|samedi)/i},xi={narrow:[/^d/i,/^l/i,/^m/i,/^m/i,/^j/i,/^v/i,/^s/i],any:[/^di/i,/^lu/i,/^ma/i,/^me/i,/^je/i,/^ve/i,/^sa/i]},gi={narrow:/^(a|p|minuit|midi|mat\.?|ap\.?m\.?|soir|nuit)/i,any:/^([ap]\.?\s?m\.?|du matin|de l'après[-\s]midi|du soir|de la nuit)/i},fi={any:{am:/^a/i,pm:/^p/i,midnight:/^min/i,noon:/^mid/i,morning:/mat/i,afternoon:/ap/i,evening:/soir/i,night:/nuit/i}},pi={ordinalNumber:Le({matchPattern:ri,parsePattern:ii,valueCallback:t=>parseInt(t)}),era:L({matchPatterns:oi,defaultMatchWidth:"wide",parsePatterns:li,defaultParseWidth:"any"}),quarter:L({matchPatterns:ci,defaultMatchWidth:"wide",parsePatterns:di,defaultParseWidth:"any",valueCallback:t=>t+1}),month:L({matchPatterns:ui,defaultMatchWidth:"wide",parsePatterns:mi,defaultParseWidth:"any"}),day:L({matchPatterns:hi,defaultMatchWidth:"wide",parsePatterns:xi,defaultParseWidth:"any"}),dayPeriod:L({matchPatterns:gi,defaultMatchWidth:"any",parsePatterns:fi,defaultParseWidth:"any"})},vi={code:"fr",formatDistance:Yr,formatLong:Qr,formatRelative:Xr,localize:si,match:pi,options:{weekStartsOn:1,firstWeekContainsDate:4}},yi={lessThanXSeconds:{one:"kurang dari 1 detik",other:"kurang dari {{count}} detik"},xSeconds:{one:"1 detik",other:"{{count}} detik"},halfAMinute:"setengah menit",lessThanXMinutes:{one:"kurang dari 1 menit",other:"kurang dari {{count}} menit"},xMinutes:{one:"1 menit",other:"{{count}} menit"},aboutXHours:{one:"sekitar 1 jam",other:"sekitar {{count}} jam"},xHours:{one:"1 jam",other:"{{count}} jam"},xDays:{one:"1 hari",other:"{{count}} hari"},aboutXWeeks:{one:"sekitar 1 minggu",other:"sekitar {{count}} minggu"},xWeeks:{one:"1 minggu",other:"{{count}} minggu"},aboutXMonths:{one:"sekitar 1 bulan",other:"sekitar {{count}} bulan"},xMonths:{one:"1 bulan",other:"{{count}} bulan"},aboutXYears:{one:"sekitar 1 tahun",other:"sekitar {{count}} tahun"},xYears:{one:"1 tahun",other:"{{count}} tahun"},overXYears:{one:"lebih dari 1 tahun",other:"lebih dari {{count}} tahun"},almostXYears:{one:"hampir 1 tahun",other:"hampir {{count}} tahun"}},bi=(t,a,n)=>{let s;const r=yi[t];return typeof r=="string"?s=r:a===1?s=r.one:s=r.other.replace("{{count}}",a.toString()),n?.addSuffix?n.comparison&&n.comparison>0?"dalam waktu "+s:s+" yang lalu":s},ji={full:"EEEE, d MMMM yyyy",long:"d MMMM yyyy",medium:"d MMM yyyy",short:"d/M/yyyy"},wi={full:"HH.mm.ss",long:"HH.mm.ss",medium:"HH.mm",short:"HH.mm"},ki={full:"{{date}} 'pukul' {{time}}",long:"{{date}} 'pukul' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Mi={date:U({formats:ji,defaultWidth:"full"}),time:U({formats:wi,defaultWidth:"full"}),dateTime:U({formats:ki,defaultWidth:"full"})},Di={lastWeek:"eeee 'lalu pukul' p",yesterday:"'Kemarin pukul' p",today:"'Hari ini pukul' p",tomorrow:"'Besok pukul' p",nextWeek:"eeee 'pukul' p",other:"P"},Ni=(t,a,n,s)=>Di[t],Ci={narrow:["SM","M"],abbreviated:["SM","M"],wide:["Sebelum Masehi","Masehi"]},Ei={narrow:["1","2","3","4"],abbreviated:["K1","K2","K3","K4"],wide:["Kuartal ke-1","Kuartal ke-2","Kuartal ke-3","Kuartal ke-4"]},Si={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","Mei","Jun","Jul","Agt","Sep","Okt","Nov","Des"],wide:["Januari","Februari","Maret","April","Mei","Juni","Juli","Agustus","September","Oktober","November","Desember"]},Ti={narrow:["M","S","S","R","K","J","S"],short:["Min","Sen","Sel","Rab","Kam","Jum","Sab"],abbreviated:["Min","Sen","Sel","Rab","Kam","Jum","Sab"],wide:["Minggu","Senin","Selasa","Rabu","Kamis","Jumat","Sabtu"]},Pi={narrow:{am:"AM",pm:"PM",midnight:"tengah malam",noon:"tengah hari",morning:"pagi",afternoon:"siang",evening:"sore",night:"malam"},abbreviated:{am:"AM",pm:"PM",midnight:"tengah malam",noon:"tengah hari",morning:"pagi",afternoon:"siang",evening:"sore",night:"malam"},wide:{am:"AM",pm:"PM",midnight:"tengah malam",noon:"tengah hari",morning:"pagi",afternoon:"siang",evening:"sore",night:"malam"}},_i={narrow:{am:"AM",pm:"PM",midnight:"tengah malam",noon:"tengah hari",morning:"pagi",afternoon:"siang",evening:"sore",night:"malam"},abbreviated:{am:"AM",pm:"PM",midnight:"tengah malam",noon:"tengah hari",morning:"pagi",afternoon:"siang",evening:"sore",night:"malam"},wide:{am:"AM",pm:"PM",midnight:"tengah malam",noon:"tengah hari",morning:"pagi",afternoon:"siang",evening:"sore",night:"malam"}},$i=(t,a)=>"ke-"+Number(t),Ai={ordinalNumber:$i,era:R({values:Ci,defaultWidth:"wide"}),quarter:R({values:Ei,defaultWidth:"wide",argumentCallback:t=>t-1}),month:R({values:Si,defaultWidth:"wide"}),day:R({values:Ti,defaultWidth:"wide"}),dayPeriod:R({values:Pi,defaultWidth:"wide",formattingValues:_i,defaultFormattingWidth:"wide"})},Wi=/^ke-(\d+)?/i,Oi=/\d+/i,Hi={narrow:/^(sm|m)/i,abbreviated:/^(s\.?\s?m\.?|s\.?\s?e\.?\s?u\.?|m\.?|e\.?\s?u\.?)/i,wide:/^(sebelum masehi|sebelum era umum|masehi|era umum)/i},Fi={any:[/^s/i,/^(m|e)/i]},Ii={narrow:/^[1234]/i,abbreviated:/^K-?\s[1234]/i,wide:/^Kuartal ke-?\s?[1234]/i},Ri={any:[/1/i,/2/i,/3/i,/4/i]},Li={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|mei|jun|jul|agt|sep|okt|nov|des)/i,wide:/^(januari|februari|maret|april|mei|juni|juli|agustus|september|oktober|november|desember)/i},Vi={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^ma/i,/^ap/i,/^me/i,/^jun/i,/^jul/i,/^ag/i,/^s/i,/^o/i,/^n/i,/^d/i]},zi={narrow:/^[srkjm]/i,short:/^(min|sen|sel|rab|kam|jum|sab)/i,abbreviated:/^(min|sen|sel|rab|kam|jum|sab)/i,wide:/^(minggu|senin|selasa|rabu|kamis|jumat|sabtu)/i},Yi={narrow:[/^m/i,/^s/i,/^s/i,/^r/i,/^k/i,/^j/i,/^s/i],any:[/^m/i,/^sen/i,/^sel/i,/^r/i,/^k/i,/^j/i,/^sa/i]},Ji={narrow:/^(a|p|tengah m|tengah h|(di(\swaktu)?) (pagi|siang|sore|malam))/i,any:/^([ap]\.?\s?m\.?|tengah malam|tengah hari|(di(\swaktu)?) (pagi|siang|sore|malam))/i},Ui={any:{am:/^a/i,pm:/^pm/i,midnight:/^tengah m/i,noon:/^tengah h/i,morning:/pagi/i,afternoon:/siang/i,evening:/sore/i,night:/malam/i}},Bi={ordinalNumber:Le({matchPattern:Wi,parsePattern:Oi,valueCallback:t=>parseInt(t,10)}),era:L({matchPatterns:Hi,defaultMatchWidth:"wide",parsePatterns:Fi,defaultParseWidth:"any"}),quarter:L({matchPatterns:Ii,defaultMatchWidth:"wide",parsePatterns:Ri,defaultParseWidth:"any",valueCallback:t=>t+1}),month:L({matchPatterns:Li,defaultMatchWidth:"wide",parsePatterns:Vi,defaultParseWidth:"any"}),day:L({matchPatterns:zi,defaultMatchWidth:"wide",parsePatterns:Yi,defaultParseWidth:"any"}),dayPeriod:L({matchPatterns:Ji,defaultMatchWidth:"any",parsePatterns:Ui,defaultParseWidth:"any"})},Qi={code:"id",formatDistance:bi,formatLong:Mi,formatRelative:Ni,localize:Ai,match:Bi,options:{weekStartsOn:1,firstWeekContainsDate:1}},Ki={lessThanXSeconds:{one:"1秒未満",other:"{{count}}秒未満",oneWithSuffix:"約1秒",otherWithSuffix:"約{{count}}秒"},xSeconds:{one:"1秒",other:"{{count}}秒"},halfAMinute:"30秒",lessThanXMinutes:{one:"1分未満",other:"{{count}}分未満",oneWithSuffix:"約1分",otherWithSuffix:"約{{count}}分"},xMinutes:{one:"1分",other:"{{count}}分"},aboutXHours:{one:"約1時間",other:"約{{count}}時間"},xHours:{one:"1時間",other:"{{count}}時間"},xDays:{one:"1日",other:"{{count}}日"},aboutXWeeks:{one:"約1週間",other:"約{{count}}週間"},xWeeks:{one:"1週間",other:"{{count}}週間"},aboutXMonths:{one:"約1か月",other:"約{{count}}か月"},xMonths:{one:"1か月",other:"{{count}}か月"},aboutXYears:{one:"約1年",other:"約{{count}}年"},xYears:{one:"1年",other:"{{count}}年"},overXYears:{one:"1年以上",other:"{{count}}年以上"},almostXYears:{one:"1年近く",other:"{{count}}年近く"}},Xi=(t,a,n)=>{n=n||{};let s;const r=Ki[t];return typeof r=="string"?s=r:a===1?n.addSuffix&&r.oneWithSuffix?s=r.oneWithSuffix:s=r.one:n.addSuffix&&r.otherWithSuffix?s=r.otherWithSuffix.replace("{{count}}",String(a)):s=r.other.replace("{{count}}",String(a)),n.addSuffix?n.comparison&&n.comparison>0?s+"後":s+"前":s},qi={full:"y年M月d日EEEE",long:"y年M月d日",medium:"y/MM/dd",short:"y/MM/dd"},Gi={full:"H時mm分ss秒 zzzz",long:"H:mm:ss z",medium:"H:mm:ss",short:"H:mm"},Zi={full:"{{date}} {{time}}",long:"{{date}} {{time}}",medium:"{{date}} {{time}}",short:"{{date}} {{time}}"},eo={date:U({formats:qi,defaultWidth:"full"}),time:U({formats:Gi,defaultWidth:"full"}),dateTime:U({formats:Zi,defaultWidth:"full"})},to={lastWeek:"先週のeeeeのp",yesterday:"昨日のp",today:"今日のp",tomorrow:"明日のp",nextWeek:"翌週のeeeeのp",other:"P"},ao=(t,a,n,s)=>to[t],no={narrow:["BC","AC"],abbreviated:["紀元前","西暦"],wide:["紀元前","西暦"]},so={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["第1四半期","第2四半期","第3四半期","第4四半期"]},ro={narrow:["1","2","3","4","5","6","7","8","9","10","11","12"],abbreviated:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"],wide:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"]},io={narrow:["日","月","火","水","木","金","土"],short:["日","月","火","水","木","金","土"],abbreviated:["日","月","火","水","木","金","土"],wide:["日曜日","月曜日","火曜日","水曜日","木曜日","金曜日","土曜日"]},oo={narrow:{am:"午前",pm:"午後",midnight:"深夜",noon:"正午",morning:"朝",afternoon:"午後",evening:"夜",night:"深夜"},abbreviated:{am:"午前",pm:"午後",midnight:"深夜",noon:"正午",morning:"朝",afternoon:"午後",evening:"夜",night:"深夜"},wide:{am:"午前",pm:"午後",midnight:"深夜",noon:"正午",morning:"朝",afternoon:"午後",evening:"夜",night:"深夜"}},lo={narrow:{am:"午前",pm:"午後",midnight:"深夜",noon:"正午",morning:"朝",afternoon:"午後",evening:"夜",night:"深夜"},abbreviated:{am:"午前",pm:"午後",midnight:"深夜",noon:"正午",morning:"朝",afternoon:"午後",evening:"夜",night:"深夜"},wide:{am:"午前",pm:"午後",midnight:"深夜",noon:"正午",morning:"朝",afternoon:"午後",evening:"夜",night:"深夜"}},co=(t,a)=>{const n=Number(t);switch(String(a?.unit)){case"year":return`${n}年`;case"quarter":return`第${n}四半期`;case"month":return`${n}月`;case"week":return`第${n}週`;case"date":return`${n}日`;case"hour":return`${n}時`;case"minute":return`${n}分`;case"second":return`${n}秒`;default:return`${n}`}},uo={ordinalNumber:co,era:R({values:no,defaultWidth:"wide"}),quarter:R({values:so,defaultWidth:"wide",argumentCallback:t=>Number(t)-1}),month:R({values:ro,defaultWidth:"wide"}),day:R({values:io,defaultWidth:"wide"}),dayPeriod:R({values:oo,defaultWidth:"wide",formattingValues:lo,defaultFormattingWidth:"wide"})},mo=/^第?\d+(年|四半期|月|週|日|時|分|秒)?/i,ho=/\d+/i,xo={narrow:/^(B\.?C\.?|A\.?D\.?)/i,abbreviated:/^(紀元[前後]|西暦)/i,wide:/^(紀元[前後]|西暦)/i},go={narrow:[/^B/i,/^A/i],any:[/^(紀元前)/i,/^(西暦|紀元後)/i]},fo={narrow:/^[1234]/i,abbreviated:/^Q[1234]/i,wide:/^第[1234一二三四１２３４]四半期/i},po={any:[/(1|一|１)/i,/(2|二|２)/i,/(3|三|３)/i,/(4|四|４)/i]},vo={narrow:/^([123456789]|1[012])/,abbreviated:/^([123456789]|1[012])月/i,wide:/^([123456789]|1[012])月/i},yo={any:[/^1\D/,/^2/,/^3/,/^4/,/^5/,/^6/,/^7/,/^8/,/^9/,/^10/,/^11/,/^12/]},bo={narrow:/^[日月火水木金土]/,short:/^[日月火水木金土]/,abbreviated:/^[日月火水木金土]/,wide:/^[日月火水木金土]曜日/},jo={any:[/^日/,/^月/,/^火/,/^水/,/^木/,/^金/,/^土/]},wo={any:/^(AM|PM|午前|午後|正午|深夜|真夜中|夜|朝)/i},ko={any:{am:/^(A|午前)/i,pm:/^(P|午後)/i,midnight:/^深夜|真夜中/i,noon:/^正午/i,morning:/^朝/i,afternoon:/^午後/i,evening:/^夜/i,night:/^深夜/i}},Mo={ordinalNumber:Le({matchPattern:mo,parsePattern:ho,valueCallback:function(t){return parseInt(t,10)}}),era:L({matchPatterns:xo,defaultMatchWidth:"wide",parsePatterns:go,defaultParseWidth:"any"}),quarter:L({matchPatterns:fo,defaultMatchWidth:"wide",parsePatterns:po,defaultParseWidth:"any",valueCallback:t=>t+1}),month:L({matchPatterns:vo,defaultMatchWidth:"wide",parsePatterns:yo,defaultParseWidth:"any"}),day:L({matchPatterns:bo,defaultMatchWidth:"wide",parsePatterns:jo,defaultParseWidth:"any"}),dayPeriod:L({matchPatterns:wo,defaultMatchWidth:"any",parsePatterns:ko,defaultParseWidth:"any"})},Do={code:"ja",formatDistance:Xi,formatLong:eo,formatRelative:ao,localize:uo,match:Mo,options:{weekStartsOn:0,firstWeekContainsDate:1}},No={lessThanXSeconds:{one:"1초 미만",other:"{{count}}초 미만"},xSeconds:{one:"1초",other:"{{count}}초"},halfAMinute:"30초",lessThanXMinutes:{one:"1분 미만",other:"{{count}}분 미만"},xMinutes:{one:"1분",other:"{{count}}분"},aboutXHours:{one:"약 1시간",other:"약 {{count}}시간"},xHours:{one:"1시간",other:"{{count}}시간"},xDays:{one:"1일",other:"{{count}}일"},aboutXWeeks:{one:"약 1주",other:"약 {{count}}주"},xWeeks:{one:"1주",other:"{{count}}주"},aboutXMonths:{one:"약 1개월",other:"약 {{count}}개월"},xMonths:{one:"1개월",other:"{{count}}개월"},aboutXYears:{one:"약 1년",other:"약 {{count}}년"},xYears:{one:"1년",other:"{{count}}년"},overXYears:{one:"1년 이상",other:"{{count}}년 이상"},almostXYears:{one:"거의 1년",other:"거의 {{count}}년"}},Co=(t,a,n)=>{let s;const r=No[t];return typeof r=="string"?s=r:a===1?s=r.one:s=r.other.replace("{{count}}",a.toString()),n?.addSuffix?n.comparison&&n.comparison>0?s+" 후":s+" 전":s},Eo={full:"y년 M월 d일 EEEE",long:"y년 M월 d일",medium:"y.MM.dd",short:"y.MM.dd"},So={full:"a H시 mm분 ss초 zzzz",long:"a H:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},To={full:"{{date}} {{time}}",long:"{{date}} {{time}}",medium:"{{date}} {{time}}",short:"{{date}} {{time}}"},Po={date:U({formats:Eo,defaultWidth:"full"}),time:U({formats:So,defaultWidth:"full"}),dateTime:U({formats:To,defaultWidth:"full"})},_o={lastWeek:"'지난' eeee p",yesterday:"'어제' p",today:"'오늘' p",tomorrow:"'내일' p",nextWeek:"'다음' eeee p",other:"P"},$o=(t,a,n,s)=>_o[t],Ao={narrow:["BC","AD"],abbreviated:["BC","AD"],wide:["기원전","서기"]},Wo={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1분기","2분기","3분기","4분기"]},Oo={narrow:["1","2","3","4","5","6","7","8","9","10","11","12"],abbreviated:["1월","2월","3월","4월","5월","6월","7월","8월","9월","10월","11월","12월"],wide:["1월","2월","3월","4월","5월","6월","7월","8월","9월","10월","11월","12월"]},Ho={narrow:["일","월","화","수","목","금","토"],short:["일","월","화","수","목","금","토"],abbreviated:["일","월","화","수","목","금","토"],wide:["일요일","월요일","화요일","수요일","목요일","금요일","토요일"]},Fo={narrow:{am:"오전",pm:"오후",midnight:"자정",noon:"정오",morning:"아침",afternoon:"오후",evening:"저녁",night:"밤"},abbreviated:{am:"오전",pm:"오후",midnight:"자정",noon:"정오",morning:"아침",afternoon:"오후",evening:"저녁",night:"밤"},wide:{am:"오전",pm:"오후",midnight:"자정",noon:"정오",morning:"아침",afternoon:"오후",evening:"저녁",night:"밤"}},Io={narrow:{am:"오전",pm:"오후",midnight:"자정",noon:"정오",morning:"아침",afternoon:"오후",evening:"저녁",night:"밤"},abbreviated:{am:"오전",pm:"오후",midnight:"자정",noon:"정오",morning:"아침",afternoon:"오후",evening:"저녁",night:"밤"},wide:{am:"오전",pm:"오후",midnight:"자정",noon:"정오",morning:"아침",afternoon:"오후",evening:"저녁",night:"밤"}},Ro=(t,a)=>{const n=Number(t);switch(String(a?.unit)){case"minute":case"second":return String(n);case"date":return n+"일";default:return n+"번째"}},Lo={ordinalNumber:Ro,era:R({values:Ao,defaultWidth:"wide"}),quarter:R({values:Wo,defaultWidth:"wide",argumentCallback:t=>t-1}),month:R({values:Oo,defaultWidth:"wide"}),day:R({values:Ho,defaultWidth:"wide"}),dayPeriod:R({values:Fo,defaultWidth:"wide",formattingValues:Io,defaultFormattingWidth:"wide"})},Vo=/^(\d+)(일|번째)?/i,zo=/\d+/i,Yo={narrow:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(기원전|서기)/i},Jo={any:[/^(bc|기원전)/i,/^(ad|서기)/i]},Uo={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234]사?분기/i},Bo={any:[/1/i,/2/i,/3/i,/4/i]},Qo={narrow:/^(1[012]|[123456789])/,abbreviated:/^(1[012]|[123456789])월/i,wide:/^(1[012]|[123456789])월/i},Ko={any:[/^1월?$/,/^2/,/^3/,/^4/,/^5/,/^6/,/^7/,/^8/,/^9/,/^10/,/^11/,/^12/]},Xo={narrow:/^[일월화수목금토]/,short:/^[일월화수목금토]/,abbreviated:/^[일월화수목금토]/,wide:/^[일월화수목금토]요일/},qo={any:[/^일/,/^월/,/^화/,/^수/,/^목/,/^금/,/^토/]},Go={any:/^(am|pm|오전|오후|자정|정오|아침|저녁|밤)/i},Zo={any:{am:/^(am|오전)/i,pm:/^(pm|오후)/i,midnight:/^자정/i,noon:/^정오/i,morning:/^아침/i,afternoon:/^오후/i,evening:/^저녁/i,night:/^밤/i}},el={ordinalNumber:Le({matchPattern:Vo,parsePattern:zo,valueCallback:t=>parseInt(t,10)}),era:L({matchPatterns:Yo,defaultMatchWidth:"wide",parsePatterns:Jo,defaultParseWidth:"any"}),quarter:L({matchPatterns:Uo,defaultMatchWidth:"wide",parsePatterns:Bo,defaultParseWidth:"any",valueCallback:t=>t+1}),month:L({matchPatterns:Qo,defaultMatchWidth:"wide",parsePatterns:Ko,defaultParseWidth:"any"}),day:L({matchPatterns:Xo,defaultMatchWidth:"wide",parsePatterns:qo,defaultParseWidth:"any"}),dayPeriod:L({matchPatterns:Go,defaultMatchWidth:"any",parsePatterns:Zo,defaultParseWidth:"any"})},tl={code:"ko",formatDistance:Co,formatLong:Po,formatRelative:$o,localize:Lo,match:el,options:{weekStartsOn:0,firstWeekContainsDate:1}};var W=(t=>(t.DAY="day",t.DAYS="days",t.WEEK="week",t.MONTH="month",t.YEAR="year",t))(W||{}),ee=(t=>(t.HOUR_12="12",t.HOUR_24="24",t))(ee||{}),se=(t=>(t.CALENDAR="calendar",t.LIST="list",t))(se||{});const Zt=()=>An(new Date,"Europe/Stockholm"),K=(t,a,n)=>{let s,r;if(typeof t=="string"?[s,r]=t.split(":").map(Number):(s=t,r=n),a==="12"){const o=s%12||12,i=s>=12?"PM":"AM";return r!==void 0?`${o}:${r.toString().padStart(2,"0")} ${i}`:`${o} ${i}`}else return r!==void 0?`${s.toString().padStart(2,"0")}:${r.toString().padStart(2,"0")}`:`${s.toString().padStart(2,"0")}:00`},ht=(t,a,n)=>n?.locale?_(t,a,{locale:n.locale}):_(t,a),ea=(t,a,n=60)=>{const s=[],r=new Date;r.setSeconds(0,0);for(let o=t;o<=a;o++)for(let i=0;i<60;i+=n){const u=new Date(r);u.setHours(o,i),s.push(u)}return s},ot=(t,a,n="auto")=>{const s=De(t),r=De(a);if(r<s)throw new Error("End time cannot be earlier than start time");const o=r-s;if(n==="hours")return o/60;const i=Math.floor(o/60),u=o%60;return i===0?`${u}m`:u===0?`${i}h`:`${i}h ${u}m`},De=t=>{const[a,n]=t.split(":").map(Number);return a*60+n},al=(t,a)=>De(a)>De(t),Ma=t=>{if(!t)return new Date;if(typeof t=="string")try{return new Date(t)}catch(a){return console.error("Error parsing date string:",a),new Date}return t},Ie=(t,a)=>t.getDate()===a.getDate()&&t.getMonth()===a.getMonth()&&t.getFullYear()===a.getFullYear(),wt=new Map,nl=t=>{const a=t.code||"en-US";if(wt.has(a))return wt.get(a);const n=new Date(2023,0,1),s=[0,1,2,3,4,5,6].map(r=>{const o=new Date(n);return o.setDate(n.getDate()+r),{value:r,label:_(o,"EEEE",{locale:t})}});return wt.set(a,s),s},kt={START_TIME:"08:00",END_TIME:"10:00",COLOR:"blue"},Da=[{value:"red",label:"Red"},{value:"blue",label:"Blue"},{value:"yellow",label:"Yellow"},{value:"green",label:"Green"}];new Date(new Date().setHours(10,0,0,0)),new Date(new Date().setHours(11,30,0,0)),new Date(new Date().setHours(14,0,0,0)),new Date(new Date().setHours(15,0,0,0));const on=[{value:"en-US",label:"English (US)",locale:dt},{value:"en-GB",label:"English (UK)",locale:ur},{value:"id-ID",label:"Bahasa Indonesia",locale:Qi},{value:"es-ES",label:"Español",locale:Vr},{value:"fr-FR",label:"Français",locale:vi},{value:"de-DE",label:"Deutsch",locale:ir},{value:"ja-JP",label:"日本語",locale:Do},{value:"ko-KR",label:"한국어",locale:tl}];function ta(t,a,n,s=1){const r=d.useMemo(()=>Rt(t,{weekStartsOn:s,locale:n}),[t,n,s]),o=d.useMemo(()=>Wn(t,{locale:n}),[t,n]),i=d.useMemo(()=>Array.from({length:a},(m,h)=>Qe(r,h)),[a,r]),u=d.useMemo(()=>{const m=new Date;return i.findIndex(h=>Ie(h,m))},[i]);return{weekStart:r,weekNumber:o,weekDays:i,todayIndex:u}}function ln(t,a){return d.useMemo(()=>{const n=[],s=[],r=[],[o,i]=[a[0],a[6]];return t.forEach(u=>{if(u.isAllDay){r.push(u);return}const m=new Date(u.startDate),h=new Date(u.endDate),p=On(h,m)<=1,c=m>=o&&m<=i||h>=o&&h<=i||m<o&&h>i;p?n.push(u):c&&s.push(u)}),{singleDayEvents:n,multiDayEvents:s,allDayEvents:r}},[t,a])}function cn(t,a,n,s=0){return d.useMemo(()=>{const r={},o={};return a.forEach((i,u)=>{o[u]=[]}),t.forEach(i=>{const u=new Date(i.startDate),m=a.findIndex(h=>Ie(h,u));m!==-1&&o[m].push({event:i,start:De(i.startTime),end:De(i.endTime)})}),Object.entries(o).forEach(([i,u])=>{const m=parseInt(i),h=[];u.sort((p,c)=>p.start-c.start),u.forEach(({event:p,start:c,end:x})=>{let v=0;for(;h[v]?.some(M=>c<M);)v++;h[v]||(h[v]=[]),h[v].push(x);const E=Math.max(c-s*60,0);r[`${m}-${p.id}`]={id:p.id,top:E/60*n,height:(x-c)/60*n,column:v,totalColumns:h.length,dayIndex:m}});const g=h.length;Object.keys(r).forEach(p=>{p.startsWith(`${m}-`)&&(r[p].totalColumns=g)})}),r},[a,t,n,s])}function dn(t,a){return d.useMemo(()=>{const n=[],[s,r]=[a[0],a[6]];return t.forEach(o=>{const i=new Date(o.startDate),u=new Date(o.endDate);if([i,u].forEach(h=>h.setHours(12,0,0,0)),i>=s&&i<=r||u>=s&&u<=r||i<s&&u>r){let h=a.findIndex(c=>Ie(c,i)),g=a.findIndex(c=>Ie(c,u));h=h===-1?0:h,g=g===-1?6:g;let p=0;for(;n.some(c=>c.row===p&&!(g<c.startIndex||h>c.endIndex));)p++;n.push({event:o,startIndex:h,endIndex:g,row:p})}}),n},[t,a])}function sl(t,a,n=0){return d.useMemo(()=>{const s={},r=t.map(u=>{const m=De(u.startTime),h=De(u.endTime);return{event:u,start:m,end:h}});r.sort((u,m)=>u.start-m.start);const o=[];r.forEach(({event:u,start:m,end:h})=>{let g=0;for(;;){if(o[g]||(o[g]=[]),!o[g].some(c=>m<c)){o[g].push(h);const x=Math.max(m-n*60,0)/60*a,v=(h-m)/60*a;s[u.id]={id:u.id,top:x,height:v,column:g,totalColumns:0};break}g++}});const i=o.length;return Object.values(s).forEach(u=>{u.totalColumns=i}),s},[t,a,n])}function rl(t,a,n){return d.useMemo(()=>{try{const{filterFn:s}=hn[n];return t.filter(r=>{const o=new Date(r.startDate);return s(o,a)})}catch(s){return console.error("Event filtering error:",s),[]}},[t,a,n])}function il(t,a,n,s){return d.useMemo(()=>{const{groupFormat:r,titleFormat:o}=hn[a],i=a===W.DAY,u=t.reduce((m,h)=>{const g=new Date(h.startDate),p=i?h.startTime:_(g,r,{locale:s}),c=i?K(p,n):_(g,o,{locale:s});return m[p]||(m[p]={key:p,title:c,events:[]}),m[p].events.push(h),m},{});return Object.values(u).sort((m,h)=>m.key.localeCompare(h.key))},[t,a,n,s])}function ol(t){const[a,n,s]=t.slice(1).match(/.{2}/g).map(o=>parseInt(o,16));return(.299*a+.587*n+.114*s)/255>.5?"#000000":"#ffffff"}function ll(t,a=[]){return a.find(n=>n.value===t)?.label??t}const Na={blue:{bg:"bg-blue-700/80 hover:bg-blue-800/90",border:"border-blue-800 hover:border-blue-700",text:"text-blue-800 hover:text-blue-700",badge:{bg:"bg-blue-700 dark:bg-blue-900/20",text:"text-blue-800 dark:text-blue-200"}},red:{bg:"bg-red-700/80 hover:bg-red-800/90",border:"border-red-800 hover:border-red-700",text:"text-red-800 hover:text-red-700",badge:{bg:"bg-red-700 dark:bg-red-900/20",text:"text-red-800 dark:text-red-200"}},lime:{bg:"bg-lime-700/80 hover:bg-lime-800/90",border:"border-lime-800 hover:border-lime-700",text:"text-lime-800 hover:text-lime-700",badge:{bg:"bg-lime-700 dark:bg-lime-900/20",text:"text-lime-800 dark:text-lime-900"}},green:{bg:"bg-green-700/80 hover:bg-green-800/90",border:"border-green-800 hover:border-green-700",text:"text-green-800 hover:text-green-700",badge:{bg:"bg-green-700 dark:bg-green-900/20",text:"text-green-800 dark:text-green-200"}},amber:{bg:"bg-amber-700/80 hover:bg-amber-800/90",border:"border-amber-800 hover:border-amber-700",text:"text-amber-800 hover:text-amber-700",badge:{bg:"bg-amber-700 dark:bg-amber-900/20",text:"text-amber-800 dark:text-amber-900"}},yellow:{bg:"bg-yellow-700/80 hover:bg-yellow-800/90",border:"border-yellow-800 hover:border-yellow-700",text:"text-yellow-800 hover:text-yellow-700",badge:{bg:"bg-yellow-700 dark:bg-yellow-900/20",text:"text-yellow-800 dark:text-yellow-900"}},purple:{bg:"bg-purple-700/80 hover:bg-purple-800/90",border:"border-purple-800 hover:border-purple-700",text:"text-purple-800 hover:text-purple-700",badge:{bg:"bg-purple-700 dark:bg-purple-900/20",text:"text-purple-800 dark:text-purple-200"}},pink:{bg:"bg-pink-700/80 hover:bg-pink-800/90",border:"border-pink-800 hover:border-pink-700",text:"text-pink-800 hover:text-pink-700",badge:{bg:"bg-pink-700 dark:bg-pink-900/20",text:"text-pink-800 dark:text-pink-200"}},indigo:{bg:"bg-indigo-700/80 hover:bg-indigo-800/90",border:"border-indigo-800 hover:border-indigo-700",text:"text-indigo-800 hover:text-indigo-700",badge:{bg:"bg-indigo-700 dark:bg-indigo-900/20",text:"text-indigo-800 dark:text-indigo-200"}},teal:{bg:"bg-teal-700/80 hover:bg-teal-800/90",border:"border-teal-800 hover:border-teal-700",text:"text-teal-800 hover:text-teal-700",badge:{bg:"bg-teal-700 dark:bg-teal-900/20",text:"text-teal-800 dark:text-teal-200"}}},$e=t=>Na[t]?Na[t]:{bg:"",border:"border-white/20 hover:border-white/30",text:"text-white hover:text-white",badge:{bg:"",text:""}},fe=t=>on.find(a=>a.value===t)?.locale||dt,un=d.memo(({currentDate:t,currentView:a,locale:n})=>{const s=()=>{switch(a){case W.DAY:return`Tidak ada acara pada ${_(t,"EEEE, d MMMM yyyy",{locale:n})}`;case W.WEEK:const r=_(Rt(t,{locale:n}),"d MMM",{locale:n}),o=_(Ba(t,{locale:n}),"d MMM yyyy",{locale:n});return`Tidak ada acara pada minggu ${r} - ${o}`;case W.MONTH:return`Tidak ada acara pada ${_(t,"MMMM yyyy",{locale:n})}`;case W.YEAR:return`Tidak ada acara pada tahun ${_(t,"yyyy",{locale:n})}`;default:return"Tidak ada acara"}};return e.jsxs("div",{className:"text-muted-foreground flex h-[calc(100vh-12rem)] flex-col items-center justify-center","data-testid":"no-events-message",children:[e.jsx(Ve,{className:"mb-2 h-12 w-12 opacity-20"}),e.jsx("p",{children:s()})]})});un.displayName="NoEvents";const aa=({event:t,timeFormat:a,onClick:n})=>{const{bg:s,badge:r}=$e(t.color),o=t.color&&t.color.startsWith("#");return e.jsxs(H,{"data-testid":`event-item-${t.id}`,className:P("group/event relative z-0 flex h-auto w-full flex-col items-start justify-start gap-3 px-4 py-3 text-left text-white hover:cursor-pointer","transition-all duration-200","focus-visible:ring-ring last:border-b-0 focus-visible:ring-1 focus-visible:ring-offset-0",o?"":s),style:o?{backgroundColor:t.color,opacity:.8}:{},onClick:()=>n(t),children:[e.jsxs("div",{className:"flex w-full items-start justify-between gap-2 group-hover/event:opacity-50",children:[e.jsx("span",{className:"line-clamp-1 text-base font-medium",children:t.title}),e.jsx(me,{variant:"default",className:`${r.bg}`,children:t.category})]}),e.jsxs("div",{className:"flex w-full flex-wrap items-center gap-x-4 gap-y-1 text-xs text-white group-hover/event:opacity-50",children:[e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx(ze,{className:"h-3 w-3"}),e.jsxs("span",{children:[K(t.startTime,a)," -"," ",K(t.endTime,a)]})]}),t.location&&e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx(nn,{className:"h-3 w-3"}),e.jsx("span",{className:"line-clamp-1",children:t.location})]})]})]},t.id)},mn=d.memo(({timeKey:t,events:a,timeFormat:n,onClick:s})=>e.jsx("div",{className:"gap-0 overflow-hidden rounded-md py-0","data-testid":`event-group-${t}`,children:e.jsx("div",{className:"gap-1.3 flex flex-col gap-2",children:a.map(r=>e.jsx(aa,{event:r,timeFormat:n,onClick:s},r.id))})},t));mn.displayName="EventGroup";const Ca=t=>{let a;const n=new Set,s=(h,g)=>{const p=typeof h=="function"?h(a):h;if(!Object.is(p,a)){const c=a;a=g??(typeof p!="object"||p===null)?p:Object.assign({},a,p),n.forEach(x=>x(a,c))}},r=()=>a,u={setState:s,getState:r,getInitialState:()=>m,subscribe:h=>(n.add(h),()=>n.delete(h))},m=a=t(s,r,u);return u},cl=(t=>t?Ca(t):Ca),dl=t=>t;function ul(t,a=dl){const n=Ue.useSyncExternalStore(t.subscribe,Ue.useCallback(()=>a(t.getState()),[t,a]),Ue.useCallback(()=>a(t.getInitialState()),[t,a]));return Ue.useDebugValue(n),n}const Ea=t=>{const a=cl(t),n=s=>ul(a,s);return Object.assign(n,a),n},ml=(t=>t?Ea(t):Ea);function hl(t,a){let n;try{n=t()}catch{return}return{getItem:r=>{var o;const i=m=>m===null?null:JSON.parse(m,void 0),u=(o=n.getItem(r))!=null?o:null;return u instanceof Promise?u.then(i):i(u)},setItem:(r,o)=>n.setItem(r,JSON.stringify(o,void 0)),removeItem:r=>n.removeItem(r)}}const Ht=t=>a=>{try{const n=t(a);return n instanceof Promise?n:{then(s){return Ht(s)(n)},catch(s){return this}}}catch(n){return{then(s){return this},catch(s){return Ht(s)(n)}}}},xl=(t,a)=>(n,s,r)=>{let o={storage:hl(()=>window.localStorage),partialize:M=>M,version:0,merge:(M,S)=>({...S,...M}),...a},i=!1,u=0;const m=new Set,h=new Set;let g=o.storage;if(!g)return t((...M)=>{console.warn(`[zustand persist middleware] Unable to update item '${o.name}', the given storage is currently unavailable.`),n(...M)},s,r);const p=()=>{const M=o.partialize({...s()});return g.setItem(o.name,{state:M,version:o.version})},c=r.setState;r.setState=(M,S)=>(c(M,S),p());const x=t((...M)=>(n(...M),p()),s,r);r.getInitialState=()=>x;let v;const E=()=>{var M,S;if(!g)return;const k=++u;i=!1,m.forEach(j=>{var w;return j((w=s())!=null?w:x)});const b=((S=o.onRehydrateStorage)==null?void 0:S.call(o,(M=s())!=null?M:x))||void 0;return Ht(g.getItem.bind(g))(o.name).then(j=>{if(j)if(typeof j.version=="number"&&j.version!==o.version){if(o.migrate){const w=o.migrate(j.state,j.version);return w instanceof Promise?w.then(y=>[!0,y]):[!0,w]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,j.state];return[!1,void 0]}).then(j=>{var w;if(k!==u)return;const[y,f]=j;if(v=o.merge(f,(w=s())!=null?w:x),n(v,!0),y)return p()}).then(()=>{k===u&&(b?.(v,void 0),v=s(),i=!0,h.forEach(j=>j(v)))}).catch(j=>{k===u&&b?.(void 0,j)})};return r.persist={setOptions:M=>{o={...o,...M},M.storage&&(g=M.storage)},clearStorage:()=>{g?.removeItem(o.name)},getOptions:()=>o,rehydrate:()=>E(),hasHydrated:()=>i,onHydrate:M=>(m.add(M),()=>{m.delete(M)}),onFinishHydration:M=>(h.add(M),()=>{h.delete(M)})},o.skipHydration||E(),v||x},gl=xl,fl={day:{showCurrentTimeIndicator:!0,showHoverTimeIndicator:!0,enableTimeSlotClick:!0},days:{highlightToday:!0,showCurrentTimeIndicator:!0,showHoverTimeIndicator:!0,enableTimeSlotClick:!0,enableTimeBlockClick:!0,expandMultiDayEvents:!0},week:{highlightToday:!0,showCurrentTimeIndicator:!0,showHoverTimeIndicator:!0,enableTimeSlotClick:!0,enableTimeBlockClick:!0,expandMultiDayEvents:!0},month:{eventLimit:3,showMoreEventsIndicator:!0,hideOutsideDays:!0},year:{showMonthLabels:!0,quarterView:!1,highlightCurrentMonth:!0,showMoreEventsIndicator:!0,enableEventPreview:!0,previewEventsPerMonth:1}},ae=ml()(gl((t,a)=>({selectedEvent:null,currentView:W.WEEK,viewMode:se.CALENDAR,timeFormat:ee.HOUR_24,locale:"en-US",firstDayOfWeek:1,daysCount:7,loading:!1,error:null,viewSettings:fl,isDialogOpen:!1,eventDialogPosition:null,isSubmitting:!1,dayEventsDialog:{open:!1,date:null,events:[]},quickAddData:{date:null,startTime:void 0,endTime:void 0,position:void 0,service_user_id:void 0,booking_calendar_id:void 0,google_event_id:void 0},quickAddDefaults:{service_user_id:void 0,booking_calendar_id:void 0,google_event_id:void 0},isQuickAddDialogOpen:!1,setLoading:n=>t({loading:n}),updateDayViewConfig:n=>t(s=>({viewSettings:{...s.viewSettings,day:{...s.viewSettings.day,...n}}})),updateDaysViewConfig:n=>t(s=>({viewSettings:{...s.viewSettings,days:{...s.viewSettings.days,...n}}})),updateWeekViewConfig:n=>t(s=>({viewSettings:{...s.viewSettings,week:{...s.viewSettings.week,...n}}})),updateMonthViewConfig:n=>t(s=>({viewSettings:{...s.viewSettings,month:{...s.viewSettings.month,...n}}})),updateYearViewConfig:n=>t(s=>({viewSettings:{...s.viewSettings,year:{...s.viewSettings.year,...n}}})),selectCurrentViewConfig:()=>{const{currentView:n,viewSettings:s}=a();return s[n]},openEventDialog:(n,s)=>{t({selectedEvent:n,isDialogOpen:!0,eventDialogPosition:s})},closeEventDialog:()=>{t({isDialogOpen:!1,selectedEvent:null,eventDialogPosition:null})},openDayEventsDialog:(n,s)=>{t({dayEventsDialog:{open:!0,date:n,events:s}})},closeDayEventsDialog:()=>{t({dayEventsDialog:{open:!1,date:null,events:[]}})},openQuickAddDialog:n=>{const s=a().quickAddDefaults;t({quickAddData:{date:n.date||new Date,startTime:n.startTime||"12:00",endTime:n.endTime||"13:00",position:n.position,service_user_id:n.service_user_id??s.service_user_id,booking_calendar_id:n.booking_calendar_id??s.booking_calendar_id,google_event_id:n.google_event_id??s.google_event_id},isQuickAddDialogOpen:!0})},closeQuickAddDialog:()=>{t({quickAddData:{date:null,startTime:void 0,endTime:void 0,position:void 0,service_user_id:void 0,booking_calendar_id:void 0,google_event_id:void 0},isQuickAddDialogOpen:!1})},setQuickAddDefaults:n=>{t({quickAddDefaults:{service_user_id:n.service_user_id,booking_calendar_id:n.booking_calendar_id,google_event_id:n.google_event_id}})},setView:n=>t({currentView:n}),setMode:n=>t({viewMode:n}),setTimeFormat:n=>t({timeFormat:n}),setLocale:n=>t({locale:n}),setFirstDayOfWeek:n=>t({firstDayOfWeek:n}),setDaysCount:n=>t({daysCount:n})}),{name:"event-calendar",version:2,migrate:(t,a)=>((a===0||a===1)&&(t.firstDayOfWeek=1),t),partialize:t=>({currentView:t.currentView,viewMode:t.viewMode,timeFormat:t.timeFormat,locale:t.locale,firstDayOfWeek:t.firstDayOfWeek,daysCount:t.daysCount,viewSettings:t.viewSettings})})),Sa=t=>Symbol.iterator in t,Ta=t=>"entries"in t,Pa=(t,a)=>{const n=t instanceof Map?t:new Map(t.entries()),s=a instanceof Map?a:new Map(a.entries());if(n.size!==s.size)return!1;for(const[r,o]of n)if(!s.has(r)||!Object.is(o,s.get(r)))return!1;return!0},pl=(t,a)=>{const n=t[Symbol.iterator](),s=a[Symbol.iterator]();let r=n.next(),o=s.next();for(;!r.done&&!o.done;){if(!Object.is(r.value,o.value))return!1;r=n.next(),o=s.next()}return!!r.done&&!!o.done};function vl(t,a){return Object.is(t,a)?!0:typeof t!="object"||t===null||typeof a!="object"||a===null||Object.getPrototypeOf(t)!==Object.getPrototypeOf(a)?!1:Sa(t)&&Sa(a)?Ta(t)&&Ta(a)?Pa(t,a):pl(t,a):Pa({entries:()=>Object.entries(t)},{entries:()=>Object.entries(a)})}function de(t){const a=Ue.useRef(void 0);return n=>{const s=t(n);return vl(a.current,s)?a.current:a.current=s}}const hn={[W.DAY]:{groupFormat:"HH:mm",titleFormat:"EEEE, d MMMM yyyy",filterFn:(t,a)=>_e(t,a)},[W.DAYS]:{groupFormat:"EEEE, d MMMM",titleFormat:"d MMMM yyyy",filterFn:(t,a,n=7)=>{const s=Hn(a),r=Fn(Qe(a,n-1));return In(t,{start:s,end:r})}},[W.WEEK]:{groupFormat:"yyyy-MM-dd",titleFormat:"EEEE, d MMMM yyyy",filterFn:(t,a)=>Ua(t,a)},[W.MONTH]:{groupFormat:"yyyy-MM-dd",titleFormat:"EEEE, d MMMM yyyy",filterFn:(t,a)=>lt(t,a)},[W.YEAR]:{groupFormat:"yyyy-MM-dd",titleFormat:"EEEE, d MMMM yyyy",filterFn:(t,a)=>ct(t,a)}},yl=({title:t,timeKey:a,events:n,timeFormat:s,onEventClick:r})=>e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:"text-muted-foreground text-sm font-medium",children:t}),e.jsx(mn,{timeKey:a,events:n,timeFormat:s,onClick:r})]});function bl({events:t,currentDate:a}){const{timeFormat:n,currentView:s,locale:r,openEventDialog:o}=ae(de(g=>({timeFormat:g.timeFormat,currentView:g.currentView,locale:g.locale,openEventDialog:g.openEventDialog}))),i=fe(r),u=rl(t,a,s),m=il(u,s,n,i),h=d.useCallback(g=>{o(g)},[o]);return m.length===0?e.jsx(un,{currentDate:a,currentView:s,locale:i}):e.jsx("div",{className:"h-full w-full space-y-4","data-testid":"events-list",children:e.jsx(te,{className:"h-[calc(100vh-12rem)] pr-3",children:e.jsx("div",{className:"space-y-3 px-5 py-4",children:m.map(({key:g,title:p,events:c})=>e.jsx(yl,{title:p,timeKey:g,events:c,onEventClick:h,timeFormat:n},g))})})})}const na=({event:t,position:a,leftOffset:n,rightOffset:s,onClick:r})=>{console.log("EventDialogTrigger called with event:",t),console.log("Event color:",t.color);const o=$e(t.color),i=t.color&&t.color.startsWith("#"),u=m=>{m.preventDefault(),m.stopPropagation(),r(t,a,n,s)};return i&&t.color,i&&t.color,e.jsx(G,{children:e.jsx(I.div,{initial:{opacity:0,y:10,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-10,scale:.95},transition:{duration:.2},style:{position:"absolute",top:`${a?.top}px`,height:`${a?.height}px`,left:`calc(${n}% + 4px)`,right:`calc(${s}% + 4px)`,zIndex:5},children:e.jsxs(H,{variant:"ghost",className:P("group absolute flex h-full w-full cursor-pointer flex-col items-start justify-start gap-0 overflow-hidden rounded p-2 text-white shadow-sm","border-2 border-white dark:border-gray-800","transition-all duration-200",i?"":o.bg),style:i?{backgroundColor:t.color,opacity:.8}:{},onMouseEnter:m=>{i&&Object.assign(m.currentTarget.style,{backgroundColor:t.color,opacity:.9})},onMouseLeave:m=>{i&&Object.assign(m.currentTarget.style,{backgroundColor:t.color,opacity:.8})},onClick:u,children:[e.jsx("div",{className:"text-xs font-medium sm:truncate hidden",children:t.title}),e.jsxs("div",{className:"text-xs sm:truncate",children:[K(t.startTime,"24")," -"," ",K(t.endTime,"24")]}),a?.height&&a.height>40&&e.jsxs("div",{className:"mt-1 text-xs sm:truncate",children:[ot?.(t.startTime,t.endTime,"auto")," Hour"]})]})})})},sa=({currentHour:t,currentMinute:a,timeFormat:n,hourHeight:s,className:r,formattedTime:o})=>e.jsx("div",{className:P("pointer-events-none absolute right-0 left-30 z-20 border-t-2 border-red-500",r),style:{top:`${t*s+a/60*s}px`},children:e.jsx("div",{className:"absolute -top-2.5 -left-10 bg-red-500 px-2 py-0.5 text-xs text-white shadow-sm",children:o??K(t,n,a)})}),ra=({hour:t,minute:a,timeFormat:n,hourHeight:s,className:r})=>e.jsx("div",{className:P("pointer-events-none absolute right-0 left-30 z-20 border-t-2 border-blue-400",r),style:{top:`${t*s+a/60*s}px`},children:e.jsx("div",{className:"absolute -top-2.5 -left-10 bg-blue-400 px-2 py-0.5 text-xs text-white shadow-sm",children:K(t,n,a)})}),jl=us("flex h-16 w-full cursor-pointer ",{variants:{variant:{day:"text-muted-foreground pr-2 text-right justify-end text-xs sm:text-sm",week:"text-muted-foreground justify-center border-border px-2 text-xs sm:text-sm"}},defaultVariants:{variant:"week"}}),xt=d.forwardRef(({timeSlots:t,timeFormat:a,onTimeHover:n,onPreciseHover:s,onLeave:r,onTimeSlotClick:o,variant:i="week",className:u},m)=>{const h=d.useCallback(g=>{const p=g.getHours();if(a==="12"){const c=p%12||12,x=p>=12?"PM":"AM";return`${c} ${x}`}return`${p.toString().padStart(2,"0")}:00`},[a]);return e.jsx("div",{ref:m,className:P("z-20 flex-shrink-0 shadow-sm",u),children:t.map((g,p)=>e.jsx("button",{className:jl({variant:i}),onClick:o,onMouseEnter:()=>n(g.getHours()),onMouseMove:c=>s(c,g.getHours()),onMouseLeave:r,"aria-label":`Time slot ${h(g)}`,children:h(g)},`time-slot-${p}`))})});xt.displayName="TimeColumn";const Mt=64,_a=7,wl=19,$a=99.5;function Aa({events:t,currentDate:a}){const{timeFormat:n,viewSettings:s,openQuickAddDialog:r,openEventDialog:o}=ae(de(y=>({timeFormat:y.timeFormat,viewSettings:y.viewSettings,openQuickAddDialog:y.openQuickAddDialog,openEventDialog:y.openEventDialog}))),[i,u]=d.useState(void 0),m=d.useRef(null),h=Zt(),g=h.getUTCHours(),p=h.getUTCMinutes(),c=K(h.getHours(),n,h.getMinutes()),x=d.useMemo(()=>t.filter(y=>{const f=new Date(y.startDate),A=new Date(y.endDate);return _e(f,a)||_e(A,a)||a>f&&a<A}),[t,a]),{singleDayEvents:v,allDayEvents:E}=d.useMemo(()=>{const y=[],f=[];return x.forEach(A=>{A.isAllDay?f.push(A):y.push(A)}),{singleDayEvents:y,allDayEvents:f}},[x]),M=d.useMemo(()=>ea(_a,wl),[]),S=sl(v,Mt,_a),k=d.useCallback(y=>{u(f=>({...f,hour:y,minute:0,dayIndex:-1}))},[]),b=d.useCallback((y,f)=>{if(!m.current)return;const A=y.currentTarget.getBoundingClientRect(),T=y.clientY-A.top,V=Math.floor(T/A.height*60);u({hour:f,minute:Math.max(0,Math.min(59,V)),dayIndex:-1})},[]),j=d.useCallback(()=>{u(void 0)},[]),w=d.useCallback(()=>{!s.day.enableTimeSlotClick||!i||r({date:a,position:i})},[a,i,r,s.day.enableTimeSlotClick]);return e.jsxs("div",{className:"flex h-full flex-col py-3",children:[E.length>0&&e.jsxs("div",{className:"bg-background border-border mb-2 flex border-b px-4",children:[e.jsx("div",{className:"flex h-[32px] w-13 items-center justify-center text-xs font-medium text-muted-foreground",children:"All Day"}),e.jsx("div",{className:"relative flex-1",children:e.jsxs("div",{className:"flex flex-wrap gap-0.5 mb-1 text-center truncate max-w-full w-full justify-center",children:[E.slice(0,2).map(y=>e.jsx("div",{className:"bg-muted rounded px-1 pb-1 mt-1 pt-1 text-sm truncate max-w-full font-bold pl-2 pr-2 w-full text-[#434343] dark:text-[#d3d3d3]",title:y.title,children:y.title},y.id)),E.length>2&&e.jsxs("div",{className:"text-muted-foreground text-xs",children:["+",E.length-2]})]})})]}),e.jsx(te,{className:"h-full w-full rounded-md px-4",children:e.jsxs("div",{className:"relative mt-2 mb-2",children:[e.jsx("div",{className:"absolute left-0 z-10 w-13",children:e.jsx(xt,{ref:m,timeSlots:M,timeFormat:n,onTimeHover:k,onPreciseHover:b,onLeave:j,onTimeSlotClick:w,variant:"day"})}),e.jsxs("div",{className:"relative ml-14",children:[s.day.showCurrentTimeIndicator&&e.jsx(sa,{currentHour:g,currentMinute:p,timeFormat:n,hourHeight:Mt,className:"left-0",formattedTime:c}),i&&s.day.showHoverTimeIndicator&&e.jsx(ra,{hour:i.hour,minute:i.minute,timeFormat:n,hourHeight:Mt,className:"left-0"}),M.map((y,f)=>e.jsx("div",{"data-testid":`time-grid-${f}`,className:P("border-border h-16 border-t")},f)),v.map(y=>{const f=S[y.id];if(!f)return null;const A=$a/f.totalColumns,T=f.column*A,V=$a-(T+A);return e.jsx(na,{event:y,position:f,leftOffset:T,rightOffset:V,onClick:o},y.id)})]})]})})]})}function ia({weekNumber:t,daysInWeek:a,formatDate:n,locale:s,firstDayOfWeek:r,showWeekNumber:o=!1,showDayNumber:i=!1,className:u,dayNumberClassName:m,highlightToday:h=!0}){const g=new Date,p=d.useMemo(()=>{if(r===0)return a;const c=[...a];return c.slice(r).concat(c.slice(0,r))},[a,r]);return e.jsxs("div",{className:P("flex w-full items-center justify-around",u),children:[o&&e.jsxs(I.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{duration:.3},className:"flex w-14 flex-shrink-0 items-center justify-center gap-2 p-2 text-center font-medium sm:w-32",children:[e.jsx("div",{className:"text-muted-foreground text-xs sm:text-sm",children:"v."}),e.jsx("div",{className:"text-muted-foreground text-xs sm:text-sm",children:t})]}),p.map((c,x)=>{const v=h&&_e(c,g);return e.jsxs(I.div,{className:P("flex flex-1 items-center justify-center gap-2 p-0 font-medium sm:p-2  border-l border-r border-t"),initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{duration:.3,delay:x*.05},children:[i&&e.jsx("span",{className:P("flex h-5 w-5 items-center justify-center rounded-full text-xs font-semibold text-muted-foreground sm:h-6 sm:w-6",v&&"bg-blue-500 text-white",m),children:n(c,"d",{locale:s})}),e.jsx("span",{className:"text-muted-foreground text-xs sm:text-sm",children:n(c,"EEE",{locale:s})})]},x)})]})}const oa=d.memo(t=>{const{highlightToday:a,timeSlots:n,daysInWeek:s,todayIndex:r,onTimeBlockClick:o}=t,i="dynamicWidth"in t&&t.dynamicWidth;return e.jsx("div",{className:"relative",children:n.map((u,m)=>e.jsx("div",{className:"border-border flex h-16 border-t",children:s.map((h,g)=>e.jsx("button",{className:P("hover:bg-primary/10 relative flex items-center justify-center border-r last:border-r-0 border-l hover:cursor-pointer",r===g&&a&&"bg-muted/20",i?"flex-none":"flex-1"),style:i?{width:`${t.dayWidthPercent}%`}:void 0,onClick:()=>{const p=_(u,"HH:mm"),c=_(new Date(u.getTime()+3600*1e3),"HH:mm");o({date:h,startTime:p,endTime:c})}},`${m}-${g}`))},m))})});oa.displayName="TimeGrid";const xn=({event:t,startIndex:a,endIndex:n,row:s,onClick:r,daysCount:o,multiDayRowHeight:i})=>{const u=100/o,m=a*u,h=(n-a+1)*u,{bg:g}=$e(t.color),p=t.color&&t.color.startsWith("#");return e.jsx(I.div,{initial:{opacity:0,y:10,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-10,scale:.95},transition:{duration:.2},className:"absolute",style:{left:`calc(${m}% + 1px)`,width:`calc(${h}% - 2px)`,top:`${s*i}px`,height:`${i-1}px`},children:e.jsxs(H,{className:P("group absolute flex h-full w-full cursor-pointer flex-col items-start justify-start gap-0 overflow-hidden rounded bg-transparent p-2 text-white hover:bg-transparent","border-2 border-gray-400 dark:border-gray-500 shadow-sm","transition-colors",p?"":g),style:p?{backgroundColor:t.color,opacity:.8}:{},onClick:()=>r(t),children:[e.jsx("div",{className:"text-xs font-medium sm:truncate",children:t.title}),e.jsxs("div",{className:"text-xs sm:truncate",children:[K(t.startTime,"12")," -"," ",K(t.endTime,"12")]}),e.jsx("div",{className:"mt-1 text-xs sm:truncate",children:ot(t.startTime,t.endTime,"auto")})]})})};xn.displayName="MultiDayEvent";const la=d.memo(({rows:t,daysInWeek:a,showEventDetail:n,multiDayRowHeight:s,isExpanded:r=!1})=>{const o=r?t:t.filter(({row:i})=>i===0);return e.jsx("div",{className:"absolute inset-0 overflow-hidden",children:e.jsx(G,{initial:!1,children:o.map(({event:i,startIndex:u,endIndex:m,row:h})=>e.jsx(xn,{event:i,startIndex:u,endIndex:m,row:h,onClick:n,daysCount:a.length,multiDayRowHeight:s},i.id))})})});la.displayName="MultiDayEventSection";const Dt=64,Wa=7,kl=18,gn=7,Oa=100/gn,Nt=64,Ml=t=>{if(!t.location)return t.title;const a=t.technicianName||"";if(!a)return t.location;const n=a.charAt(0).toUpperCase(),s=a.charAt(a.length-1).toUpperCase();return`${`${n}${s}`} @ ${t.location}`};function Dl({events:t,currentDate:a}){const{timeFormat:n,locale:s,firstDayOfWeek:r,viewSettings:o,openQuickAddDialog:i,openEventDialog:u}=ae(de(l=>({timeFormat:l.timeFormat,viewSettings:l.viewSettings,locale:l.locale,firstDayOfWeek:l.firstDayOfWeek,openDayEventsDialog:l.openDayEventsDialog,openQuickAddDialog:l.openQuickAddDialog,openEventDialog:l.openEventDialog}))),[m,h]=d.useState(void 0),[g,p]=d.useState(!1),c=d.useRef(null),x=Zt(),v=x.getUTCHours(),E=x.getUTCMinutes(),M=K(x.getHours(),n,x.getMinutes()),S=fe(s),{weekNumber:k,weekDays:b,todayIndex:j}=ta(a,gn,S,r),{singleDayEvents:w,multiDayEvents:y,allDayEvents:f}=ln(t,b),A=cn(w,b,Dt,Wa),T=dn(y,b),V=d.useMemo(()=>ea(Wa,kl),[]),B=d.useMemo(()=>{const l={};return b.forEach(D=>{l[_(D,"yyyy-MM-dd")]=[]}),f.forEach(D=>{const N=_(D.startDate,"yyyy-MM-dd");l[N]&&l[N].push(D)}),l},[f,b]),ne=T.length>0?Math.max(...T.map(l=>l.row))+1:1,Z=d.useCallback(l=>{h(D=>({...D,hour:l,minute:0,dayIndex:-1}))},[]),Q=d.useCallback((l,D)=>{if(!c.current)return;const N=l.currentTarget.getBoundingClientRect(),C=l.clientY-N.top,F=Math.floor(C/N.height*60);h({hour:D,minute:Math.max(0,Math.min(59,F)),dayIndex:-1})},[]),X=d.useCallback(()=>{h(void 0)},[]),q=d.useCallback(()=>{!o.week.enableTimeSlotClick||!m||i({date:a,position:m})},[a,m,i,o.week.enableTimeSlotClick]),ue=d.useCallback(l=>{u(l)},[u]),he=d.useCallback(l=>{o.week.enableTimeBlockClick&&i({date:l.date,startTime:l.startTime,endTime:l.endTime,position:m})},[m,i,o.week.enableTimeBlockClick]),pe=d.useCallback(()=>{p(l=>!l)},[]);return e.jsxs("div",{className:"flex h-full flex-col border relative",children:[e.jsx("div",{className:"bg-background border-border sticky top-0 z-30 flex flex-col items-center justify-center absolute w-full",style:{marginBottom:"36px"},children:e.jsx(ia,{weekNumber:k,daysInWeek:b,formatDate:ht,locale:S,firstDayOfWeek:0,showWeekNumber:!0,showDayNumber:!0,highlightToday:!0})}),T.length>0&&o.week.expandMultiDayEvents&&e.jsxs("div",{className:"bg-background border-border sticky top-18 z-50 flex border-b pr-4",children:[e.jsx("div",{className:"flex h-[64px] w-14 items-center justify-center sm:w-32",children:e.jsxs(we,{children:[e.jsx(ke,{asChild:!0,children:e.jsxs(H,{variant:"ghost",size:"icon",className:"text-muted-foreground hover:text-primary h-10 w-10",onClick:pe,children:[e.jsxs("span",{className:"sr-only",children:[g?"Collapse":"Expand"," multi-day"]}),g?e.jsx(Qa,{}):e.jsx(it,{})]})}),e.jsxs(Me,{children:[g?"Collapse":"Expand"," multi-day"]})]})}),e.jsxs("div",{className:"relative flex-1",style:{height:g?`${ne*Nt}px`:`${Nt}px`,transition:"height 0.3s ease"},children:[e.jsx("div",{className:"absolute inset-0",children:e.jsx("div",{className:"relative",children:Array.from({length:g?ne:1}).map((l,D)=>e.jsx("div",{className:"border-border flex h-16 border-t",children:b.map((N,C)=>e.jsx("div",{"data-testid":`multi-day-cell-${D}-${C}`,className:P("relative flex items-center justify-center border-r last:border-r-0 border-l",j===C&&"bg-primary/10","flex-1")},`multi-day-cell-${D}-${C}`))},`multi-day-row-${D}`))})}),e.jsx(la,{rows:T,daysInWeek:b,multiDayRowHeight:Nt,showEventDetail:ue,isExpanded:g})]})]}),e.jsxs("div",{className:"bg-background border-border sticky z-40 mb-2 flex w-full",style:{position:"absolute",top:"40px"},children:[e.jsx("div",{className:"flex h-[32px] w-14 items-center justify-center text-xs font-medium text-muted-foreground sm:w-32",children:"All Day"}),e.jsx("div",{className:"relative flex-1",children:e.jsx("div",{className:"flex daily-location-events",children:b.map((l,D)=>{const N=_(l,"yyyy-MM-dd"),C=B[N]||[],F=C.length>0;return e.jsx("div",{className:P("relative table items-center justify-center px-1 border-b border-t relative overflow-hidden min-h-[40px]",j===D&&"border-t border-2 rounded border-[#619af780] dark:border-[#619af780]","flex-1"),children:F&&e.jsxs("div",{className:"flex flex-wrap gap-0.5 mb-1 text-center truncate max-w-full w-full justify-center",style:{height:"32px"},children:[C.slice(0,2).map(z=>e.jsx("div",{className:"bg-muted rounded px-1 pb-1 mt-1 pt-1 text-sm truncate max-w-full font-bold absolute ml-2 mr-2 pl-2 pr-2 w-full text-[#434343] dark:text-[#d3d3d3]",children:Ml(z)},z.id)),C.length>2&&e.jsxs("div",{className:"text-muted-foreground text-xs",children:["+",C.length-2]})]})},`all-day-cell-${D}`)})})})]}),e.jsx("div",{className:"h-full",children:e.jsx(te,{className:"h-full w-full",children:e.jsxs("div",{className:"relative flex flex-1 overflow-hidden",children:[e.jsx(xt,{ref:c,timeSlots:V,timeFormat:n,onTimeHover:Z,onPreciseHover:Q,onLeave:X,onTimeSlotClick:q,variant:"week",className:"p w-14 sm:w-32"}),o.week.showCurrentTimeIndicator&&e.jsx(sa,{currentHour:v,currentMinute:E,timeFormat:n,hourHeight:Dt,formattedTime:M}),m&&o.week.showHoverTimeIndicator&&e.jsx(ra,{hour:m.hour,minute:m.minute,timeFormat:n,hourHeight:Dt}),e.jsxs("div",{className:"relative flex-1 overflow-y-auto",children:[e.jsx(oa,{highlightToday:o.week.highlightToday,timeSlots:V,daysInWeek:b,todayIndex:j,onTimeBlockClick:he}),e.jsx("div",{className:"pointer-events-none absolute inset-0",children:w.map(l=>{const D=new Date(l.startDate),N=b.findIndex(et=>_e(et,D));if(N===-1)return null;const C=A[`${N}-${l.id}`];if(!C)return null;const F=.5,z=(Oa+F/C.totalColumns)/C.totalColumns,xe=N*Oa+C.column*z-F/(C.totalColumns*2),ve=100-(xe+z);return e.jsx(na,{event:l,position:C,leftOffset:xe,rightOffset:ve,onClick:u},l.id)})})]})]})})})]})}const Nl=({isOpen:t,onOpenChange:a,onConfirm:n,title:s="Are you sure?",description:r="Are you sure you want to delete this event? This action cannot be undone.",cancelText:o="Cancel",confirmText:i="Delete"})=>e.jsxs(Rn,{open:t,onOpenChange:a,children:[e.jsx(Ln,{asChild:!0,children:e.jsxs(H,{variant:"destructive",className:"cursor-pointer",children:[e.jsx(Cs,{className:"h-4 w-4"}),i]})}),e.jsxs(Vn,{children:[e.jsxs(zn,{children:[e.jsx(Yn,{children:s}),e.jsx(Jn,{children:r})]}),e.jsxs(Un,{children:[e.jsx(Bn,{children:o}),e.jsx(Qn,{onClick:n,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:i})]})]})]}),Cl=({onCancel:t,onSave:a,isSubmitting:n,cancelText:s="Cancel",saveText:r="Save",savingText:o="Saving..."})=>e.jsxs("div",{className:"flex flex-row gap-2",children:[e.jsxs(H,{variant:"outline",onClick:t,className:"cursor-pointer",children:[e.jsx(Be,{className:"h-4 w-4"}),s]}),e.jsxs(H,{onClick:a,className:"cursor-pointer",disabled:n,children:[e.jsx(sn,{className:"h-4 w-4"}),n?o:r]})]}),Re=/^(0[0-9]|1[0-9]|2[0-3]):[0-5][0-9]$/,El=ut({id:$().uuid(),title:$().min(1).max(256),description:$().min(1),startDate:Ke(),endDate:Ke(),startTime:$().regex(Re),endTime:$().regex(Re),location:$().min(1).max(256),category:$().min(1).max(100),color:$().min(1).max(25),createdAt:$().datetime(),updatedAt:$().datetime()}),fn=ut({title:$().min(1).max(256),description:$().min(1),startDate:Ke(),endDate:Ke(),startTime:$().regex(Re),endTime:$().regex(Re),location:$().min(1).max(256),category:$().min(1).max(100),isRepeating:Vt().default(!1).optional(),repeatingType:Lt(["daily","weekly","monthly"]).optional(),color:$().min(1).max(25),booking_client_id:$().optional(),service_id:$().optional(),service_user_id:$().optional(),booking_calendar_id:$().optional(),google_event_id:$().optional(),total_price:$().optional()}),Sl=El.omit({id:!0,createdAt:!0,updatedAt:!0}).extend({startTime:$().regex(Re),endTime:$().regex(Re),isRepeating:Vt().default(!1).optional(),repeatingType:Lt(["daily","weekly","monthly"]).optional(),booking_client_id:$().optional(),service_id:$().optional(),service_user_id:$().optional(),booking_calendar_id:$().optional(),google_event_id:$().optional(),total_price:$().optional()}).refine(t=>!t.isRepeating||t.repeatingType,{message:"Repeating type is required for repeating events",path:["repeatingType"]}).refine(t=>t.startDate.toDateString()!==t.endDate.toDateString()?t.endDate>t.startDate:al(t.startTime,t.endTime),{message:"End time must be later than start time.",path:["endTime"]});fn.partial();ut({title:$().optional(),categories:je($()).default([]),daysCount:Tt().optional(),view:Lt([W.DAY,W.DAYS,W.WEEK,W.MONTH,W.YEAR]).optional(),date:Ke(),colors:je($()).default([]),locations:je($()).default([]),repeatingTypes:je($()).default([]),isRepeating:Vt().optional()});ut({search:$().min(1,"Search query is required"),categories:je($()).default([]),colors:je($()).default([]),locations:je($()).default([]),repeatingTypes:je($()).default([]),isRepeating:$().optional(),limit:Tt().default(50),offset:Tt().default(0)});const Ha=({value:t,onChange:a,label:n,locale:s,required:r=!1})=>e.jsxs(Ne,{className:"flex flex-col",children:[e.jsxs(Ce,{children:[n," ",r&&e.jsx("span",{className:"text-destructive",children:"*"})]}),e.jsxs(Se,{children:[e.jsx(Te,{asChild:!0,children:e.jsx(re,{children:e.jsxs(H,{variant:"outline",className:P("w-full justify-start text-left font-normal",!t&&"text-muted-foreground"),children:[e.jsx(Ve,{className:"mr-2 h-4 w-4"}),t?_(t,"PPP",{locale:s}):e.jsx("span",{children:"Select a date"})]})})}),e.jsx(Pe,{className:"w-auto p-0",children:e.jsx(Kn,{mode:"single",selected:t,onSelect:o=>o&&a(o),initialFocus:!0})})]}),e.jsx(Ee,{})]}),Tl=Array.from({length:24},(t,a)=>String(a).padStart(2,"0")),Pl=Array.from({length:60},(t,a)=>String(a).padStart(2,"0")),Fa=({value:t,onChange:a,label:n,required:s=!1})=>{const[r,o]=(t??"00:00").split(":");return e.jsxs(Ne,{children:[e.jsxs(Ce,{children:[n," ",s&&e.jsx("span",{className:"text-destructive",children:"*"})]}),e.jsxs("div",{className:"flex items-center justify-between gap-2",children:[e.jsxs(ie,{value:r,onValueChange:i=>a(`${i}:${o||"00"}`),children:[e.jsx(re,{children:e.jsx(oe,{className:"w-full",children:e.jsx(le,{placeholder:"HH"})})}),e.jsx(ce,{className:"h-[150px]",children:Tl.map(i=>e.jsx(J,{value:i,children:i},i))})]}),e.jsx("span",{children:":"}),e.jsxs(ie,{value:o,onValueChange:i=>a(`${r||"00"}:${i}`),children:[e.jsx(re,{children:e.jsx(oe,{className:"w-full",children:e.jsx(le,{placeholder:"MM"})})}),e.jsx(ce,{className:"h-[150px]",children:Pl.map(i=>e.jsx(J,{value:i,children:i},i))})]})]}),e.jsx(Ee,{})]})},Ye="Location TBD",Ia="New Event",ye="__none__",ca=d.memo(({form:t,onSubmit:a,locale:n,clients:s=[],services:r=[],serviceUsers:o=[],calendars:i=[],categoryOptions:u=[]})=>{const m=t.watch("service_user_id"),h=t.watch("booking_client_id"),g=t.watch("service_id"),p=d.useMemo(()=>{const c={};return o.forEach(x=>{x.calendar_ids?.length&&(c[String(x.id)]=x.calendar_ids[0])}),c},[o]);return d.useEffect(()=>{if(!m)return;const c=p[m];!t.getValues("booking_calendar_id")&&c&&t.setValue("booking_calendar_id",String(c))},[t,p,m]),d.useEffect(()=>{if(u.length===0)return;const c=t.getValues("category"),x=u.some(v=>v.value===c);(!c||!x)&&t.setValue("category",u[0].value)},[u,t]),d.useEffect(()=>{if(!h){t.setValue("title",Ia);return}const c=s.find(x=>String(x.id)===h);if(c?.name){t.setValue("title",c.name);return}t.setValue("title",Ia)},[s,t,h]),d.useEffect(()=>{if(!g){t.setValue("total_price",void 0);return}const c=r.find(x=>String(x.id)===g);if(c?.price!==void 0&&c?.price!==null){t.setValue("total_price",Number(c.price).toFixed(2));return}t.setValue("total_price",void 0)},[t,g,r]),d.useEffect(()=>{const c=t.getValues("location");if(!h){(!c||c===Ye)&&t.setValue("location",Ye);return}const x=s.find(E=>String(E.id)===h);if(!x){(!c||c===Ye)&&t.setValue("location",Ye);return}const v=[x.address,x.city].filter(Boolean).map(E=>E?.toString().trim()).filter(Boolean);t.setValue("location",v.join(", ")||Ye)},[s,t,h]),e.jsx(Xn,{...t,children:e.jsxs("form",{onSubmit:t.handleSubmit(a),className:"grid gap-5 px-2 py-3","data-testid":"event-form",children:[e.jsx("input",{type:"hidden",...t.register("google_event_id")}),e.jsx("input",{type:"hidden",...t.register("title")}),e.jsx("input",{type:"hidden",...t.register("category")}),e.jsx("input",{type:"hidden",...t.register("color")}),e.jsx("input",{type:"hidden",...t.register("location")}),e.jsx("input",{type:"hidden",...t.register("total_price")}),e.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[e.jsx(ge,{control:t.control,name:"booking_client_id",render:({field:c})=>e.jsxs(Ne,{children:[e.jsx(Ce,{children:"Client"}),e.jsx(re,{children:e.jsxs(ie,{onValueChange:x=>c.onChange(x===ye?void 0:x),value:c.value,children:[e.jsx(re,{children:e.jsx(oe,{className:"w-full",children:e.jsx(le,{placeholder:"Select a client"})})}),e.jsxs(ce,{children:[e.jsx(J,{value:ye,children:"No client (optional)"}),s.length===0&&e.jsx(J,{value:"__no-clients__",disabled:!0,children:"No clients available yet"}),s.map(x=>e.jsxs(J,{value:String(x.id),children:[x.name,x.email&&` · ${x.email}`]},x.id))]})]})}),e.jsx(Ee,{})]})}),e.jsx(ge,{control:t.control,name:"service_id",render:({field:c})=>e.jsxs(Ne,{children:[e.jsx(Ce,{children:"Service"}),e.jsx(re,{children:e.jsxs(ie,{onValueChange:x=>c.onChange(x===ye?void 0:x),value:c.value,children:[e.jsx(re,{children:e.jsx(oe,{className:"w-full",children:e.jsx(le,{placeholder:"Select a service"})})}),e.jsxs(ce,{children:[e.jsx(J,{value:ye,children:"No service selected"}),r.length===0&&e.jsx(J,{value:"__no-services__",disabled:!0,children:"No services available yet"}),r.map(x=>e.jsxs(J,{value:String(x.id),children:[x.name,x.duration&&` · ${x.duration}m`,x.price&&` · ${x.price} SEK`]},x.id))]})]})}),e.jsx(Ee,{})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[e.jsx(ge,{control:t.control,name:"service_user_id",render:({field:c})=>e.jsxs(Ne,{children:[e.jsx(Ce,{children:"Technician"}),e.jsx(re,{children:e.jsxs(ie,{onValueChange:x=>c.onChange(x===ye?void 0:x),value:c.value,children:[e.jsx(re,{children:e.jsx(oe,{className:"w-full",children:e.jsx(le,{placeholder:"Select a technician"})})}),e.jsxs(ce,{children:[e.jsx(J,{value:ye,children:"No technician selected"}),o.length===0&&e.jsx(J,{value:"__no-technicians__",disabled:!0,children:"No technicians available"}),o.map(x=>e.jsxs(J,{value:String(x.id),children:[x.name,x.email&&` · ${x.email}`]},x.id))]})]})}),e.jsx(Ee,{})]})}),e.jsx(ge,{control:t.control,name:"booking_calendar_id",render:({field:c})=>e.jsxs(Ne,{children:[e.jsx(Ce,{children:"Calendar"}),e.jsx(re,{children:e.jsxs(ie,{onValueChange:x=>c.onChange(x===ye?void 0:x),value:c.value,children:[e.jsx(re,{children:e.jsx(oe,{className:"w-full",children:e.jsx(le,{placeholder:"Select a calendar"})})}),e.jsxs(ce,{children:[e.jsx(J,{value:ye,children:"No calendar selected"}),i.length===0&&e.jsx(J,{value:"__no-calendars__",disabled:!0,children:"No calendars configured"}),i.map(x=>e.jsxs(J,{value:String(x.id),children:[x.name,x.owner_id&&` · ${x.owner_id}`]},x.id))]})]})}),e.jsx(Ee,{})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[e.jsx(ge,{control:t.control,name:"startDate",render:({field:c})=>e.jsx(Ha,{value:c.value,onChange:c.onChange,label:"Start Date",locale:n,required:!0})}),e.jsx(ge,{control:t.control,name:"startTime",render:({field:c})=>e.jsx(Fa,{value:c.value,onChange:c.onChange,label:"Start Time",required:!0})})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[e.jsx(ge,{control:t.control,name:"endDate",render:({field:c})=>e.jsx(Ha,{value:c.value,onChange:c.onChange,label:"End Date",locale:n,required:!0})}),e.jsx(ge,{control:t.control,name:"endTime",render:({field:c})=>e.jsx(Fa,{value:c.value,onChange:c.onChange,label:"End Time",required:!0})})]}),e.jsx("div",{className:"grid grid-cols-1 gap-4",children:e.jsx(ge,{control:t.control,name:"description",render:({field:c})=>e.jsxs(Ne,{children:[e.jsx(Ce,{children:"Description"}),e.jsx(re,{children:e.jsx(qn,{placeholder:"Short description of the event",rows:3,...c,value:c.value||""})}),e.jsx(Ee,{})]})})})]})})});ca.displayName="EventDetailsForm";const da="/api/calendar/bookings",ua=()=>document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")??"",_l=t=>{if(t){if(t instanceof Date){const a=t.getFullYear(),n=String(t.getMonth()+1).padStart(2,"0"),s=String(t.getDate()).padStart(2,"0");return`${a}-${n}-${s}`}return t}},tt=t=>{if(t==null||t==="")return null;const a=Number(t);return Number.isNaN(a)?null:a},$l=t=>{if(t==null||t==="")return null;const a=Number(t);return Number.isNaN(a)?null:a},Al=t=>{if(t==null)return null;const a=String(t).trim();return a===""?null:a},pn=t=>({title:t.title,description:t.description,category:t.category,location:t.location,color:t.color,booking_client_id:tt(t.booking_client_id),service_id:tt(t.service_id),service_user_id:tt(t.service_user_id),booking_calendar_id:tt(t.booking_calendar_id),google_event_id:Al(t.google_event_id),total_price:$l(t.total_price),service_date:_l(t.startDate),start_time:t.startTime,end_time:t.endTime}),ma=t=>{typeof window<"u"&&window.dispatchEvent&&window.dispatchEvent(new CustomEvent("booking:mutated",{detail:{action:t}}))},ha=async t=>{let a=null;try{a=await t.json()}catch{throw new Error("An unexpected error occurred")}if(!t.ok||!a?.success){const n=a?.message||"API request failed";throw new Error(n)}return a};async function Wl(t){const a=pn(t),n=await fetch(da,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json","X-CSRF-TOKEN":ua()},body:JSON.stringify(a)}),s=await ha(n);return ma("create"),s}async function Ol(t,a){const n=pn(a),s=await fetch(`${da}/${t}`,{method:"PUT",headers:{"Content-Type":"application/json",Accept:"application/json","X-CSRF-TOKEN":ua()},body:JSON.stringify(n)}),r=await ha(s);return ma("update"),r}async function Hl(t){const a=await fetch(`${da}/${t}`,{method:"DELETE",headers:{Accept:"application/json","X-CSRF-TOKEN":ua()}}),n=await ha(a);return ma("delete"),n}async function Ra(t){return En.get("/events/search",t)}const at=async t=>{const a=await fetch(t,{headers:{Accept:"application/json"}});if(!a.ok){const n=await a.text();throw new Error(`${t} responded with ${a.status}: ${n}`)}return a.json()};function vn(){const[t,a]=d.useState({clients:[],services:[],technicians:[],calendars:[],loading:!0,error:null}),n=d.useRef(!0),s=d.useCallback(async()=>{a(r=>({...r,loading:!0,error:null}));try{const[r,o,i,u]=await Promise.all([at("/api/calendar/clients"),at("/api/calendar/services"),at("/api/calendar/service-users"),at("/api/calendar/calendars")]);if(!n.current)return;a({clients:r,services:o,technicians:i,calendars:u,loading:!1,error:null})}catch(r){if(!n.current)return;console.error("Error loading booking dropdowns:",r),a(o=>({...o,loading:!1,error:r instanceof Error?r:new Error("Failed to load dropdowns")}))}},[]);return d.useEffect(()=>(n.current=!0,s().catch(()=>{}),()=>{n.current=!1}),[s]),{...t,refetch:s}}const yn="07:00",bn="10:00",Fl="bg-red-600",jn="",Il={title:"",description:"",startDate:new Date,endDate:new Date,category:jn,startTime:yn,endTime:bn,location:"",color:Fl,service_user_id:void 0,booking_calendar_id:void 0,google_event_id:void 0};function Rl(){const[t,a]=d.useState(!1);return d.useEffect(()=>(a(!0),()=>a(!1)),[]),t}function Ll({categoryOptions:t=[]}){const{locale:a,selectedEvent:n,isDialogOpen:s,closeEventDialog:r,isSubmitting:o}=ae(de(k=>({locale:k.locale,selectedEvent:k.selectedEvent,isDialogOpen:k.isDialogOpen,closeEventDialog:k.closeEventDialog,isSubmitting:k.isSubmitting}))),i=fe(a),[u,m]=d.useState(!1),h=Rl(),{clients:g,services:p,technicians:c,calendars:x,error:v}=vn(),E=Ka({resolver:Xa(Sl),defaultValues:Il,mode:"onChange"});d.useEffect(()=>{if(n)try{const k=Ma(n.startDate),b=Ma(n.endDate);E.reset({title:n.title||"",description:n.description||"",startDate:k,endDate:b,category:n.category||jn,startTime:n.startTime||yn,endTime:n.endTime||bn,location:n.location||"",color:n.color,service_user_id:n.service_user_id,booking_calendar_id:n.booking_calendar_id,google_event_id:n.google_event_id})}catch(k){console.error("Error resetting form with event data:",k)}},[n,E]);const M=async k=>{n?.id&&Pt.promise(Ol(n.id,k),{loading:"Updating event...",success:b=>{if(!b.success)throw new Error(b.error||"Failed to update event");return r(),"Event updated successfully!"},error:b=>(console.error("Error:",b),b instanceof Error?b.message:"Ops! Something went wrong")})},S=async()=>{n?.id&&(m(!1),Pt.promise(Hl(n.id),{loading:"Deleting event...",success:k=>{if(!k.success)throw new Error(k.error||"Failed to delete event");return r(),"Event deleted successfully!"},error:k=>(console.error("Error:",k),k instanceof Error?k.message:"Ops! Something went wrong")}))};return h?e.jsx(Xe,{open:s,onOpenChange:r,modal:!1,children:e.jsxs(qe,{className:"sm:max-w-[550px]",children:[e.jsxs(Ge,{children:[e.jsx(Ze,{children:"Event Details"}),e.jsxs(mt,{children:["Event details ",n?.title]})]}),v&&e.jsx("div",{className:"mx-6 mt-2 rounded border border-destructive/40 bg-destructive/10 p-3 text-xs text-destructive",children:"Failed to load services and clients."}),e.jsx(te,{className:"h-[350px] w-full sm:h-[500px]",children:e.jsx(ca,{form:E,onSubmit:M,locale:i,categoryOptions:t,clients:g,services:p,serviceUsers:c,calendars:x})}),e.jsxs(qt,{className:"mt-2 flex flex-row",children:[e.jsx(Nl,{isOpen:u,onOpenChange:m,onConfirm:S}),e.jsx(Cl,{onCancel:r,onSave:E.handleSubmit(M),isSubmitting:o})]})]})}):null}const La=t=>{if(!t.location)return t.title;const a=t.technicianName||"";if(!a)return t.location;const n=a.charAt(0).toUpperCase(),s=a.charAt(a.length-1).toUpperCase();return`${`${n}${s}`} @ ${t.location}`};function Vl({date:t,baseDate:a,eventsByDate:n,locale:s,timeFormat:r,monthViewConfig:o,focusedDate:i,onQuickAdd:u,onFocusDate:m,onShowDayEvents:h,onOpenEvent:g}){const p=_(t,"yyyy-MM-dd"),c=n[p],x=c?.regular||[],v=c?.allDay||[],E=_e(t,new Date),M=lt(t,a),S=x.length===0&&v.length===0,k=x[0];i&&_e(t,i);const b=M&&(x.length>0||v.length>0),j=k?$e(k.color):null,w=k&&k.color&&k.color.startsWith("#");return e.jsxs("div",{"data-date":p,role:"gridcell",tabIndex:0,"aria-label":`${_(t,"EEEE, MMMM do")}. Press Enter to ${c.length===0?"add new event":"view events"}`,className:P("group relative z-20 flex h-[80px] cursor-pointer flex-col rounded border transition-all sm:h-[140px] sm:p-2","hover:border-primary focus:ring-primary hover:shadow-sm focus:ring-2 focus:outline-none",!M&&o.hideOutsideDays?"hidden":M?"":"bg-muted/20 opacity-50"),onClick:()=>{u(t),m(t)},onKeyDown:y=>{(y.key==="Enter"||y.key===" ")&&(u(t),m(t),y.preventDefault())},onFocus:()=>m(t),children:[e.jsxs("div",{className:"mb-0 flex items-center justify-between sm:mb-1",children:[e.jsx("span",{className:P("flex h-5 w-5 items-center justify-center rounded-full border text-xs font-medium sm:h-6 sm:w-6",E&&"bg-blue-500 text-white",!M&&"text-muted-foreground"),children:_(t,"d",{locale:s})}),!o.hideOutsideDays&&e.jsx("span",{className:"text-muted-foreground hidden text-xs md:block",children:_(t,"E",{locale:s})})]}),M&&e.jsxs("div",{className:"item flex flex-1 flex-col gap-1 overflow-hidden",children:[v.length>0&&e.jsxs("div",{className:"flex flex-wrap gap-0.5 mb-1 text-center truncate max-w-full w-full justify-center justify-center",children:[v.slice(0,2).map(y=>e.jsx("div",{className:"bg-muted rounded px-1 pb-1 mt-1 pt-1 text-sm truncate max-w-full font-bold  pl-2 pr-2 w-full text-[#434343] dark:text-[#d3d3d3]",title:La(y),children:La(y)},y.id)),v.length>2&&e.jsxs("div",{className:"text-muted-foreground text-xs",children:["+",v.length-2]})]}),b&&k&&e.jsxs("button",{className:P("relative z-0 flex cursor-pointer flex-col justify-start text-left","rounded p-2 text-xs","transition-colors hover:opacity-90","shadow-sm mb-1",w?"":j?.bg??"bg-primary"),style:w?{backgroundColor:k.color,opacity:.8}:{},onClick:y=>{y.stopPropagation(),g(k)},children:[e.jsx("span",{className:"truncate font-medium text-white hidden",children:k.title}),e.jsx("div",{className:"hidden items-center truncate text-white sm:flex",children:k.isAllDay?e.jsx("span",{className:"text-xs font-medium",children:"All Day"}):e.jsxs(e.Fragment,{children:[e.jsx(ze,{className:"mr-1 h-3 w-3"}),e.jsxs("span",{className:"truncate",children:[K(k.startTime,r)," -"," ",K(k.endTime,r)]})]})})]}),x.length>1?e.jsxs(H,{variant:"ghost",size:"sm",className:"bg-muted hover:bg-muted/90 h-1.5 w-full gap-1 truncate rounded p-2 text-xs sm:mt-auto sm:h-5 sm:p-5 sm:px-1",onClick:()=>h(t),children:[e.jsx(rt,{className:"h-1.5 w-1.5"}),e.jsxs("span",{className:"hidden sm:block",children:[x.length-1," more"]})]}):e.jsxs(H,{variant:"ghost",size:"sm",className:P("w-full cursor-pointer gap-1 truncate p-5 px-1 text-xs opacity-0 group-hover:opacity-100",S?"mb-2 bg-transparent !ring-0 hover:!bg-transparent":"h-5"),onClick:y=>{y.stopPropagation(),u(t)},children:[e.jsx(rt,{className:"h-3 w-3"}),e.jsx("span",{className:"hidden sm:block",children:"Add"})]})]})]})}const zl=7;function Yl({events:t,baseDate:a}){const{timeFormat:n,firstDayOfWeek:s,locale:r,weekStartDay:o,viewSettings:i,openDayEventsDialog:u,openEventDialog:m,openQuickAddDialog:h}=ae(de(b=>({timeFormat:b.timeFormat,firstDayOfWeek:b.firstDayOfWeek,viewSettings:b.viewSettings.month,locale:b.locale,weekStartDay:b.firstDayOfWeek,openDayEventsDialog:b.openDayEventsDialog,openEventDialog:b.openEventDialog,openQuickAddDialog:b.openQuickAddDialog}))),g=d.useRef(null),[p,c]=d.useState(null),x=fe(r),{weekNumber:v,weekDays:E}=ta(a,zl,x,s),M=d.useMemo(()=>{const b=qa(a),j=Ga(a),w=Rt(b,{weekStartsOn:o}),y=Ba(j,{weekStartsOn:o});return Za({start:w,end:y})},[a,o]),S=d.useMemo(()=>{const b={};return M.forEach(j=>{b[_(j,"yyyy-MM-dd")]={regular:[],allDay:[]}}),t.forEach(j=>{const w=_(j.startDate,"yyyy-MM-dd");b[w]&&(j.isAllDay?b[w].allDay.push(j):b[w].regular.push(j))}),b},[t,M]),k=b=>{const j=_(b,"yyyy-MM-dd"),w=S[j],y=[...w?.regular||[],...w?.allDay||[]];u(b,y)};return e.jsxs("div",{className:"flex flex-col border py-2",children:[e.jsx(ia,{weekNumber:v,daysInWeek:E,formatDate:ht,locale:x,firstDayOfWeek:0}),e.jsx("div",{ref:g,className:"grid grid-cols-7 gap-1 p-2 sm:gap-2",role:"grid","aria-label":"Month calendar grid",children:M.map((b,j)=>e.jsx(Vl,{date:b,baseDate:a,eventsByDate:S,locale:x,timeFormat:n,monthViewConfig:i,focusedDate:p,onQuickAdd:w=>h({date:w}),onFocusDate:c,onShowDayEvents:k,onOpenEvent:m},`day-cell-${j}`))})]})}const Jl=()=>e.jsx("div",{className:"text-muted-foreground py-12 text-center",children:"No events scheduled for this date"}),Ul=({events:t,timeFormat:a,onEventClick:n})=>e.jsx(te,{className:"h-[400px] w-full rounded-md",children:e.jsx("div",{className:"flex flex-col gap-2",children:t.length>0?t.map(s=>e.jsx(aa,{event:s,timeFormat:a,onClick:n},s.id)):e.jsx(Jl,{})})});function Bl(){const{openEventDialog:t,closeDayEventsDialog:a,timeFormat:n,dayEventsDialog:s,locale:r}=ae(de(u=>({openEventDialog:u.openEventDialog,closeDayEventsDialog:u.closeDayEventsDialog,timeFormat:u.timeFormat,dayEventsDialog:u.dayEventsDialog,locale:u.locale}))),o=fe(r),i=d.useMemo(()=>s.date&&ht(s.date,"EEEE, d MMMM yyyy",{locale:o}),[s.date,o]);return e.jsx(Xe,{open:s.open,onOpenChange:a,children:e.jsxs(qe,{children:[e.jsxs(Ge,{className:"mb-4",children:[e.jsxs(Ze,{children:["Events ",i&&e.jsx("span",{children:i})]}),e.jsx(mt,{children:"List of all events scheduled for this date"})]}),e.jsx(Ul,{events:s.events,timeFormat:n,onEventClick:t}),e.jsx(qt,{className:"",children:e.jsx(H,{variant:"outline",onClick:a,children:"Close"})})]})})}const wn=({watchedValues:t,locale:a,timeFormat:n,categoryOptions:s=[]})=>{const r=Array.from({length:7}).map((i,u)=>_(new Date(2023,0,u+2),"EEE",{locale:a})),o=Array.from({length:35}).map((i,u)=>({day:u%31+1,hasEvent:u===15}));return e.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-1 md:grid-cols-2 lg:grid-cols-1",children:[e.jsxs(pa,{className:"h-fit",children:[e.jsxs(va,{children:[e.jsx(ya,{children:"Calendar Preview"}),e.jsx(ba,{children:"How your event will appear in the calendar"})]}),e.jsx(ja,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"mb-2 text-sm font-medium",children:"Month View"}),e.jsx("div",{className:"overflow-hidden rounded-lg border",children:e.jsxs("div",{className:"bg-border grid grid-cols-7 gap-px",children:[r.map((i,u)=>e.jsx("div",{className:"bg-background text-muted-foreground p-2 text-center text-xs font-medium",children:i},`header-${u}`)),o.map(({day:i,hasEvent:u},m)=>e.jsxs("div",{className:P("bg-background relative h-16 p-1 text-sm",u?"bg-accent/10":""),children:[e.jsx("span",{className:P("inline-flex h-6 w-6 items-center justify-center rounded-full",u?"text-primary font-bold":"text-muted-foreground"),children:i}),u&&e.jsx("div",{className:"absolute right-1 bottom-1 left-1 truncate rounded px-1 py-0.5 text-xs",style:{backgroundColor:t.color,color:ol(t.color)},children:t.title})]},`day-${m}`))]})})]}),t.title&&e.jsxs("div",{children:[e.jsx("h3",{className:"mb-2 text-sm font-medium",children:"Event Tile"}),e.jsxs("div",{className:"rounded-lg border p-3 transition-all hover:shadow-sm",style:{backgroundColor:t.color+"20",borderColor:t.color},children:[e.jsx("div",{className:"font-medium",style:{color:t.color},children:t.title}),e.jsxs("div",{className:"text-muted-foreground mt-1 flex items-center text-xs",children:[e.jsx(ze,{className:"mr-1 h-3 w-3"}),e.jsxs("span",{children:[K(t.startTime,n)," -"," ",K(t.endTime,n),e.jsxs("span",{className:"ml-1",children:["(",ot(t.startTime,t.endTime),")"]})]})]})]})]})]})})]}),e.jsxs(pa,{children:[e.jsxs(va,{children:[e.jsx(ya,{children:"Event Details"}),e.jsx(ba,{children:"Complete event information"})]}),e.jsx(ja,{children:e.jsxs("div",{className:"space-y-4",children:[t.description&&e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold",children:t.title}),t.description&&e.jsx("p",{className:"text-muted-foreground mt-2 text-sm",children:t.description})]}),e.jsx(He,{}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(Ve,{className:"text-muted-foreground mt-0.5 h-4 w-4 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:t.startDate?_(t.startDate,"EEEE, MMMM d, yyyy",{locale:a}):"-"}),e.jsx("p",{className:"text-muted-foreground text-sm",children:t.startTime&&t.endTime?e.jsxs(e.Fragment,{children:[K(t.startTime,n)," ","- ",K(t.endTime,n),e.jsxs("span",{className:"ml-2",children:["(",ot(t.startTime,t.endTime)," ","Hour )"]})]}):"No time specified"})]})]}),t.location&&e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(nn,{className:"text-muted-foreground mt-0.5 h-4 w-4 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:t.location}),e.jsx("p",{className:"text-muted-foreground text-sm",children:"Event location"})]})]}),t.category&&e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(At,{className:"text-muted-foreground mt-0.5 h-4 w-4 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx(me,{variant:"outline",className:"capitalize",children:ll(t.category,s)}),e.jsx("p",{className:"text-muted-foreground mt-1 text-sm",children:"Category"})]})]})]})]})})]})]})};wn.displayName="EventPreviewCalendar";const Ct={title:"",description:"",startDate:new Date,endDate:new Date,category:"",startTime:kt.START_TIME,endTime:kt.END_TIME,location:"Location TBD",color:kt.COLOR,isRepeating:!1,booking_client_id:void 0,service_id:void 0,service_user_id:void 0,booking_calendar_id:void 0,google_event_id:void 0,total_price:void 0};function Ql({categoryOptions:t=[]}){const{isQuickAddDialogOpen:a,closeQuickAddDialog:n,timeFormat:s,locale:r,quickAddData:o}=ae(de(b=>({isQuickAddDialogOpen:b.isQuickAddDialogOpen,closeQuickAddDialog:b.closeQuickAddDialog,timeFormat:b.timeFormat,locale:b.locale,quickAddData:b.quickAddData}))),i=Ka({resolver:Xa(fn),defaultValues:Ct,mode:"onChange"}),[u,m]=d.useState(!1),h=fe(r),{clients:g,services:p,technicians:c,calendars:x,loading:v,error:E,refetch:M}=vn(),S=i.watch(),k=async b=>{m(!0),Pt.promise(Wl(b),{loading:"Creating Event...",success:j=>{if(!j.success)throw new Error(j.error||"Error Creating Event");return i.reset(Ct),m(!1),n(),"Event Succesfully created"},error:j=>(console.error("Error:",j),j instanceof Error?j.message:typeof j=="string"?j:j&&typeof j=="object"&&"message"in j?String(j.message):"Ops! something went wrong")})};return d.useEffect(()=>{a&&o.date&&i.reset({...Ct,startDate:o.date,endDate:o.date,startTime:o.startTime,endTime:o.endTime,service_user_id:o.service_user_id,booking_calendar_id:o.booking_calendar_id,google_event_id:o.google_event_id})},[a,o,i]),e.jsx(Xe,{open:a,onOpenChange:b=>!b&&n(),modal:!1,children:e.jsxs(qe,{className:"sm:max-w-[550px]",children:[e.jsxs(Ge,{children:[e.jsx(Ze,{children:"Add New Event"}),e.jsx(mt,{children:"Fill in the event details to add it to the calendar"})]}),E&&e.jsxs("div",{className:"rounded border border-destructive/40 bg-destructive/10 p-3 text-sm text-destructive",children:["Failed to load dropdown data."," ",e.jsx("button",{type:"button",className:"underline",onClick:()=>M(),children:"Retry"})]}),e.jsxs(gs,{className:"w-full",defaultValue:"edit",children:[e.jsxs(fs,{className:"grid w-full grid-cols-2",children:[e.jsx(ga,{value:"edit",children:"Edit"}),e.jsx(ga,{value:"preview",children:"Preview"})]}),e.jsx(fa,{value:"edit",className:"mt-4",children:e.jsx(te,{className:"h-[500px] w-full",children:e.jsx(ca,{form:i,onSubmit:k,locale:h,clients:g,services:p,serviceUsers:c,calendars:x,categoryOptions:t})})}),e.jsx(fa,{value:"preview",className:"mt-4",children:e.jsx(te,{className:"h-[500px] w-full",children:e.jsx(wn,{watchedValues:S,locale:h,timeFormat:s,categoryOptions:t})})})]}),e.jsx(qt,{className:"mt-2",children:e.jsxs(H,{onClick:i.handleSubmit(k),className:"cursor-pointer",disabled:u||v,children:[e.jsx(sn,{className:"mr-2 h-4 w-4"}),u?"Saving":"Save"]})})]})})}const kn=d.memo(({day:t,events:a,isToday:n,onClick:s})=>{const r=a.length>0,o=d.useMemo(()=>r?`${a.length} Event on ${_(t,"d MMMM yyyy")}`:_(t,"d MMMM yyyy"),[r,a.length,t]);return e.jsxs(we,{children:[e.jsx(ke,{asChild:!0,children:e.jsxs("button",{className:P("relative flex h-10 w-full items-center justify-center rounded-full p-0 text-[11px] transition-colors",n?"bg-blue-500 font-bold text-white":"",r&&!n?"bg-primary/10 font-medium":""),onClick:s,children:[rn(t),r&&!n&&e.jsx("span",{className:"bg-primary absolute -bottom-0.5 left-1/2 h-1 w-1 -translate-x-1/2 transform rounded-full"})]})}),e.jsx(Me,{side:"top",align:"center",children:o})]})});kn.displayName="DayCell";const Mn=d.memo(({month:t,eventsByDate:a,onDateClick:n})=>{const s=Za({start:qa(t),end:Ga(t)});return e.jsxs("div",{className:"grid grid-cols-7 gap-1 text-center text-xs",children:[["S","M","T","W","T","F","S"].map((r,o)=>e.jsx("div",{className:"text-muted-foreground mb-1 text-[10px] font-medium",children:r},o)),s.map(r=>{const o=_(r,"yyyy-MM-dd");return e.jsx(kn,{day:r,events:a[o]||[],isToday:Ie(r,new Date),onClick:()=>n(r)},o)})]})});Mn.displayName="MonthDaysGrid";const Dn=d.memo(({month:t,eventsByDate:a,eventCount:n,yearViewConfig:s,onMonthClick:r,onEventClick:o,onDateClick:i,onQuickAdd:u})=>{Fe(t);const m=new Date,h=lt(t,m)&&ct(t,m),g=n>0;return e.jsxs("div",{className:P("group flex flex-col rounded-lg border p-3 shadow-sm transition-all","hover:border-primary hover:shadow-md",h&&s.highlightCurrentMonth&&"border-blue-500 bg-blue-50/50 dark:bg-blue-950/10"),children:[e.jsxs("div",{className:"mb-3 flex items-center justify-between",children:[e.jsxs(we,{children:[e.jsx(ke,{asChild:!0,children:e.jsx(H,{variant:"ghost",className:P("text-md flex h-auto items-center gap-1 p-0 font-medium hover:cursor-pointer",h&&"text-blue-600 dark:text-blue-400","transition-all hover:translate-x-0.5"),onClick:()=>{r(t)},children:s.showMonthLabels&&e.jsx("span",{children:_(t,"MMMM")})})}),e.jsxs(Me,{side:"top",children:["View ",_(t,"MMMM yyyy")]})]}),e.jsxs(we,{children:[e.jsx(ke,{asChild:!0,children:e.jsx(H,{variant:"outline",size:"icon",className:"h-7 w-7 rounded-full opacity-0 transition-opacity group-hover:opacity-100",onClick:()=>u(t),children:e.jsx(rt,{className:"h-3.5 w-3.5"})})}),e.jsxs(Me,{side:"top",children:["Add event in ",_(t,"MMMM")]})]})]}),e.jsx(Mn,{month:t,eventsByDate:a,onDateClick:i}),g&&s.enableEventPreview?e.jsxs("div",{className:"space-y-1 pt-1",children:[Object.entries(a).filter(([p])=>p.startsWith(_(t,"yyyy-MM"))).slice(0,s.previewEventsPerMonth).flatMap(([p,c])=>c.slice(0,1).map(x=>{const v=$e(x.color);return e.jsx("button",{className:P("w-full truncate rounded-md px-2 py-1.5 text-left text-xs",v?.bg),onClick:()=>o(x),children:e.jsxs("span",{className:"flex items-center text-white",children:[e.jsx("span",{className:"mr-1 font-medium",children:_(new Date(p),"d")}),x.title]})},x.id)})),n>3&&s.showMoreEventsIndicator&&e.jsxs(H,{variant:"ghost",size:"sm",className:"hover:bg-accent/40 mt-1 h-7 w-full justify-between px-2 py-1 text-xs",onClick:()=>r(new Date(t.getFullYear(),t.getMonth(),30)),children:[e.jsxs("span",{children:["View all ",n," events"]}),e.jsx(tn,{className:"h-3 w-3"})]})]}):null]})});Dn.displayName="MonthCard";function Kl({events:t,currentDate:a}){const{openQuickAddDialog:n,openEventDialog:s,openDayEventsDialog:r,setView:o,viewSettings:i}=ae(de(v=>({openQuickAddDialog:v.openQuickAddDialog,openEventDialog:v.openEventDialog,openDayEventsDialog:v.openDayEventsDialog,setView:v.setView,viewSettings:v.viewSettings.year}))),[,u]=d.useState(new Date),m=d.useMemo(()=>{const v=Gn(a),E=Zn(a);return es({start:v,end:E})},[a]),{eventsByDate:h,eventCountByMonth:g}=d.useMemo(()=>{const v={},E=new Array(12).fill(0);return t.forEach(M=>{const S=new Date(M.startDate);if(ct(S,a)){const k=_(S,"yyyy-MM-dd"),b=Fe(S);(v[k]||=[]).push(M),E[b]++}}),{eventsByDate:v,eventCountByMonth:E}},[t,a]),p=d.useCallback(v=>{o(W.MONTH);const E=new Date(v.getFullYear(),v.getMonth(),a.getDate());u(E)},[u,o,a]),c=d.useCallback(v=>{const E=_(v,"yyyy-MM-dd"),M=h[E]||[];M.length>0?r(v,M):n({date:v})},[h,r,n]),x=d.useCallback(v=>n({date:v}),[n]);return e.jsx("div",{className:"grid grid-cols-1 gap-6 p-4 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4",children:m.map(v=>e.jsx(Dn,{month:v,eventsByDate:h,eventCount:g[Fe(v)],yearViewConfig:i,onMonthClick:p,onEventClick:s,onDateClick:c,onQuickAdd:x},Fe(v)))})}const Et=64,Va=7,Xl=18,nt=65,za=t=>{if(!t.location)return t.title;const a=t.technicianName||"";if(!a)return t.location;const n=a.charAt(0).toUpperCase(),s=a.charAt(a.length-1).toUpperCase();return`${`${n}${s}`} @ ${t.location}`};function ql({events:t,currentDate:a,daysCount:n=16}){const{timeFormat:s,locale:r,firstDayOfWeek:o,viewSettings:i,openEventDialog:u,openQuickAddDialog:m}=ae(de(N=>({timeFormat:N.timeFormat,locale:N.locale,viewSettings:N.viewSettings,firstDayOfWeek:N.firstDayOfWeek,openEventDialog:N.openEventDialog,openQuickAddDialog:N.openQuickAddDialog}))),[h,g]=d.useState(void 0),[p,c]=d.useState(!1),x=d.useRef(null),v=d.useRef(null),E=Zt(),M=E.getUTCHours(),S=E.getUTCMinutes(),k=K(E.getHours(),s,E.getMinutes()),b=fe(r),j=100/n,{weekDays:w,todayIndex:y}=ta(a,n,b,o),{singleDayEvents:f,multiDayEvents:A,allDayEvents:T}=ln(t,w),V=cn(f,w,Et,Va),B=dn(A,w),ne=d.useMemo(()=>ea(Va,Xl),[]),Z=d.useMemo(()=>{const N={};return w.forEach(C=>{N[_(C,"yyyy-MM-dd")]=[]}),T.forEach(C=>{const F=_(C.startDate,"yyyy-MM-dd");N[F]&&N[F].push(C)}),N},[T,w]),Q=B.length>0?Math.max(...B.map(N=>N.row))+1:1,X=d.useCallback(N=>{g(C=>({...C,hour:N,minute:0,dayIndex:-1}))},[]),q=d.useCallback((N,C)=>{if(!v.current)return;const F=N.currentTarget.getBoundingClientRect(),z=N.clientY-F.top,xe=Math.floor(z/F.height*60);g({hour:C,minute:Math.max(0,Math.min(59,xe)),dayIndex:-1})},[]),ue=d.useCallback(()=>{g(void 0)},[]),he=d.useCallback(()=>{!i.days.enableTimeSlotClick||!h||m({date:a,position:h})},[a,h,m,i.days.enableTimeSlotClick]),pe=d.useCallback(N=>{u(N)},[u]),l=d.useCallback(N=>{i.days.enableTimeBlockClick&&m({date:N.date,startTime:N.startTime,endTime:N.endTime,position:h})},[h,m,i.days.enableTimeBlockClick]),D=d.useCallback(()=>{c(N=>!N)},[]);return e.jsxs("div",{className:"flex h-full flex-col overflow-hidden border",children:[e.jsx("div",{className:"bg-background border-border sticky top-0 z-30",children:e.jsxs("div",{className:"flex py-2",children:[e.jsx("div",{className:"w-[52px]"}),e.jsx(ia,{daysInWeek:w,formatDate:ht,locale:b,firstDayOfWeek:0,highlightToday:!0,showDayNumber:!0})]})}),B.length>0&&i.days.expandMultiDayEvents&&e.jsxs("div",{className:"bg-background border-border sticky top-[48px] z-20 flex border-b",children:[e.jsx("div",{className:"flex h-[64px] w-[51px] items-center justify-center",children:B.length>1&&e.jsxs(we,{children:[e.jsx(ke,{asChild:!0,children:e.jsxs(H,{variant:"ghost",size:"icon",className:"text-muted-foreground hover:text-primary h-10 w-10",onClick:D,children:[e.jsxs("span",{className:"sr-only",children:[p?"Collapse":"Expand"," multi-day"]}),p?e.jsx(Qa,{}):e.jsx(it,{})]})}),e.jsxs(Me,{children:[p?"Collapse":"Expand"," multi-day"]})]})}),e.jsxs("div",{className:"relative flex-1",style:{height:p?`${Q*nt}px`:`${nt}px`,transition:"height 0.3s ease"},children:[e.jsx("div",{className:"absolute inset-0",children:e.jsx("div",{className:"relative",children:Array.from({length:p?Q:1}).map((N,C)=>e.jsx("div",{className:"border-border flex h-16 border-t",style:{height:`${nt}px`},children:w.map((F,z)=>e.jsx("div",{"data-testid":`multi-day-cell-${C}-${z}`,className:P("relative flex items-center justify-center border-r last:border-r-0",y===z&&"bg-primary/10","flex-none"),style:{width:`${j}%`}},`multi-day-cell-${C}-${z}`))},`multi-day-row-${C}`))})}),e.jsx(la,{rows:B,daysInWeek:w,multiDayRowHeight:nt,showEventDetail:pe,isExpanded:p})]})]}),e.jsxs("div",{className:"bg-background border-border sticky top-[48px] z-30 mb-2 flex border-b",children:[e.jsx("div",{className:"flex h-[32px] w-[51px] items-center justify-center text-xs font-medium text-muted-foreground",children:"All Day"}),e.jsx("div",{className:"relative flex-1",children:e.jsx("div",{className:"flex daily-location-events",children:w.map((N,C)=>{const F=_(N,"yyyy-MM-dd"),z=Z[F]||[],xe=z.length>0;return e.jsx("div",{className:P("relative table items-center justify-center border-r  border-l px-1 last:border-r-0 first:border-l-0",y===C&&"today","flex-none"),style:{width:`${j}%`},children:xe&&e.jsxs("div",{className:"flex flex-wrap gap-0.5 mb-1 text-center truncate max-w-full w-full",children:[z.slice(0,2).map(ve=>e.jsx("div",{className:"bg-muted rounded px-1 pb-1 mt-1 pt-1 text-sm truncate max-w-full font-bold  pl-2 pr-2 w-full text-[#434343] dark:text-[#d3d3d3]",title:za(ve),children:za(ve)},ve.id)),z.length>2&&e.jsxs("div",{className:"text-muted-foreground text-xs",children:["+",z.length-2]})]})},`all-day-cell-${C}`)})})})]}),e.jsx("div",{className:"h-full",children:e.jsx(te,{className:"h-full w-full",children:e.jsxs("div",{className:"flex flex-1 overflow-hidden",children:[e.jsx(xt,{ref:v,timeSlots:ne,timeFormat:s,onTimeHover:X,onPreciseHover:q,onLeave:ue,onTimeSlotClick:he,variant:"week"}),e.jsxs("div",{ref:x,className:"relative flex-1",children:[i.days.showCurrentTimeIndicator&&e.jsx(sa,{currentHour:M,currentMinute:S,timeFormat:s,hourHeight:Et,className:"left-0",formattedTime:k}),h&&i.days.showHoverTimeIndicator&&e.jsx(ra,{hour:h.hour,minute:h.minute,timeFormat:s,hourHeight:Et,className:"left-0"}),e.jsx(oa,{timeSlots:ne,daysInWeek:w,todayIndex:y,dayWidthPercent:j,dynamicWidth:!0,onTimeBlockClick:l,highlightToday:i.days.highlightToday}),e.jsx("div",{className:"pointer-events-none absolute inset-0",children:f.map(N=>{const C=new Date(N.startDate),F=w.findIndex(Cn=>Ie(Cn,C));if(F===-1)return null;const z=V[`${F}-${N.id}`];if(!z)return null;const xe=.5,ve=(j+xe/z.totalColumns)/z.totalColumns,et=F*j+z.column*ve-xe/(z.totalColumns*2),Nn=100-(et+ve);return e.jsx(na,{event:N,position:z,leftOffset:et,rightOffset:Nn,onClick:u},N.id)})})]})]})})})]})}function Gl({format:t=ee.HOUR_24,onChange:a,className:n="",tooltipDelay:s=300}){const[r,o]=d.useState(!1),[i,u]=d.useState(""),[m,h]=d.useState(t);d.useEffect(()=>{u(t===ee.HOUR_24?"Switch to 12-hour format (AM/PM)":"Switch to 24-hour format"),t!==m&&h(t)},[t,m]);const g=()=>{o(!0);const c=t===ee.HOUR_24?ee.HOUR_12:ee.HOUR_24;a(c),setTimeout(()=>o(!1),500)},p=()=>t===ee.HOUR_12&&m===ee.HOUR_24?1:t===ee.HOUR_24&&m===ee.HOUR_12?-1:0;return e.jsx(an,{delayDuration:s,children:e.jsxs(we,{children:[e.jsx(ke,{asChild:!0,children:e.jsx(I.div,{initial:{opacity:0,y:5},animate:{opacity:1,y:0},transition:{duration:.3},whileHover:{scale:1.03},children:e.jsx(H,{variant:"outline",size:"sm",onClick:g,className:`${n}`,"aria-label":`Time format: ${t===ee.HOUR_24?"24h":"12h"}`,children:e.jsxs(I.div,{className:"flex items-center",animate:r?{rotate:[0,15,-15,10,-10,5,-5,0]}:{},transition:{duration:.4},children:[e.jsx(I.div,{animate:r?{rotate:360}:{rotate:0},transition:{duration:.4},className:"mr-1",children:e.jsx(ze,{className:"h-4 w-4"})}),e.jsx(G,{mode:"wait",children:e.jsx(I.span,{initial:{y:p()*15,opacity:0},animate:{y:0,opacity:1},exit:{y:p()*-15,opacity:0},transition:{duration:.2},className:"text-xs",children:t===ee.HOUR_24?"24h":"12h"},t)})]})})})}),e.jsx(Me,{side:"bottom",align:"center",children:e.jsx("p",{children:i})})]})})}function Zl({viewType:t=W.DAY,className:a="",currentDate:n,onDateChange:s}){const[r,o]=d.useState(!1),[i,u]=d.useState(!1);d.useEffect(()=>{const g={[W.DAY]:xa,[W.DAYS]:xa,[W.WEEK]:Ts,[W.MONTH]:Ss,[W.YEAR]:Ps};o(g[t](n))},[n,t]);const m=()=>{r||(s(new Date),u(!0),setTimeout(()=>u(!1),500))},h=()=>({[W.DAY]:"•",[W.DAYS]:"•",[W.WEEK]:"•",[W.MONTH]:"•",[W.YEAR]:"•"})[t];return e.jsx(G,{children:e.jsx(I.div,{initial:{opacity:0,y:5},animate:{opacity:1,y:0},transition:{duration:.3},children:e.jsx(H,{variant:"outline",size:"sm",disabled:r,onClick:m,className:`${a}`,"aria-label":h(),children:e.jsxs(I.div,{className:"flex items-center text-sm",animate:i?{rotate:[0,15,-15,10,-10,5,-5,0]}:{},transition:{duration:.5},children:[e.jsx(Ve,{className:"mr-2 h-4 w-4"}),e.jsx(I.span,{animate:i?{y:[0,-4,0],transition:{duration:.3,times:[0,.5,1]}}:{},children:h()})]})})})})}function ec({mode:t,onChange:a,className:n="",tooltipDelay:s=300}){return e.jsx(an,{delayDuration:s,children:e.jsxs(I.div,{className:P("flex overflow-hidden rounded-md border",n),initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.3,delay:.1},children:[e.jsxs(we,{children:[e.jsx(ke,{asChild:!0,children:e.jsxs(H,{type:"button",variant:t===se.CALENDAR?"default":"ghost",className:P("group relative h-9 rounded-none rounded-l-md px-3 transition-all"),onClick:()=>a(se.CALENDAR),"aria-label":"Calendar view",children:[e.jsxs(I.div,{className:"flex items-center",whileTap:{scale:.9},transition:{duration:.2},children:[e.jsx(st,{className:`h-4 w-4 ${t===se.CALENDAR?"z-10 text-white":""}`}),e.jsx(G,{mode:"wait",children:t===se.CALENDAR&&e.jsx(I.span,{initial:{opacity:0,width:0,x:-5},animate:{opacity:1,width:"auto",x:0},exit:{opacity:0,width:0,x:-5},transition:{duration:.3},className:"z-10 ml-2 overflow-hidden text-sm whitespace-nowrap text-white hidden",children:"Kalender"})})]}),t===se.CALENDAR&&e.jsx(I.div,{className:"bg-secondary/20 absolute inset-0 rounded-l-md",layoutId:"viewModeHighlight",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.3}})]})}),e.jsx(Me,{side:"bottom",align:"center",children:e.jsx("p",{children:"Calendar View"})})]}),e.jsxs(we,{children:[e.jsx(ke,{asChild:!0,children:e.jsxs(H,{type:"button",variant:t===se.LIST?"default":"ghost",className:P("group relative h-9 rounded-none rounded-r-md px-3 transition-all"),onClick:()=>a(se.LIST),"aria-label":"List view",children:[e.jsxs(I.div,{className:"flex items-center",whileTap:{scale:.9},transition:{duration:.2},children:[e.jsx(ts,{className:`h-4 w-4 ${t===se.LIST?"z-10 text-white":""}`}),e.jsx(G,{mode:"wait",children:t===se.LIST&&e.jsx(I.span,{initial:{opacity:0,width:0,x:-5},animate:{opacity:1,width:"auto",x:0},exit:{opacity:0,width:0,x:-5},transition:{duration:.3},className:"z-10 ml-2 overflow-hidden text-sm whitespace-nowrap text-white hidden",children:"List"})})]}),t===se.LIST&&e.jsx(I.div,{className:"bg-secondary/20 absolute inset-0 rounded-r-md",layoutId:"viewModeHighlight",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.3}})]})}),e.jsx(Me,{side:"bottom",align:"center",children:e.jsx("p",{children:"List View"})})]})]})})}function tc({date:t,onDateChange:a,yearRange:n=10,className:s="",minYear:r,maxYear:o}){const[i,u]=d.useState(!1),[m,h]=d.useState(""),[g,p]=d.useState(""),[c,x]=d.useState(!1),[v,E]=d.useState(new Date),M=t||v,S=en(M),k=d.useMemo(()=>{const w=r??S-n,y=o??S+n,f=[];for(let A=w;A<=y;A++)f.push({value:A.toString(),label:A.toString()});return f},[S,n,r,o]),b=d.useMemo(()=>m?k.filter(w=>w.label.includes(m)):k,[k,m]),j=w=>{const y=parseInt(w),f=as(M,y);a?a(f):E(f),u(!1),h(""),x(!0),setTimeout(()=>x(!1),1e3)};return d.useEffect(()=>{i||(h(""),p(""))},[i]),e.jsxs(Se,{open:i,onOpenChange:u,children:[e.jsx(Te,{asChild:!0,children:e.jsx(I.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.3},whileHover:{scale:1.02},children:e.jsxs(H,{variant:"outline",role:"combobox","aria-expanded":i,className:P("w-[90px] justify-between text-sm font-normal",!S&&"text-muted-foreground",s),title:"Select year",children:[e.jsx(G,{mode:"wait",children:e.jsx(I.div,{initial:{y:c?10:0,opacity:c?0:1},animate:{y:0,opacity:1},exit:{y:-10,opacity:0},transition:{duration:.2},children:S||"Pilih tahun"},S)}),e.jsx(Xt,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})})}),e.jsx(Pe,{className:"w-[90px] p-0",align:"start",children:e.jsxs(zt,{shouldFilter:!1,children:[e.jsx(Yt,{placeholder:"Search year...",value:g,onValueChange:w=>{p(w),h(w)}}),e.jsxs(Jt,{children:[e.jsx(Ut,{children:"Year not found"}),e.jsx(Bt,{children:e.jsxs(te,{className:"h-[200px]",children:[b.map(w=>e.jsxs(Qt,{value:w.value,onSelect:j,className:"flex items-center justify-between",children:[w.label,e.jsx(Gt,{className:P("h-4 w-4",S===parseInt(w.value)?"opacity-100":"opacity-0")})]},w.value)),e.jsx(Kt,{orientation:"vertical"})]})})]})]})})]})}function ac({date:t,onDateChange:a,locale:n=dt,className:s="",monthFormat:r="MMM",placeholder:o="Select month"}){const[i,u]=d.useState(!1),[m,h]=d.useState(""),[g,p]=d.useState(""),[c,x]=d.useState(!1),[v,E]=d.useState(new Date),M=t||v,S=Fe(M),k=d.useMemo(()=>Array.from({length:12},(y,f)=>({value:f.toString(),label:_(new Date(2e3,f,1),r,{locale:n}),shortLabel:_(new Date(2e3,f,1),"MMM",{locale:n})})),[n,r]),b=d.useMemo(()=>m?k.filter(y=>y.label.toLowerCase().includes(m.toLowerCase())||y.shortLabel.toLowerCase().includes(m.toLowerCase())):k,[k,m]),j=k[S],w=y=>{const f=parseInt(y),A=ns(M,f);a?a(A):E(A),u(!1),h(""),x(!0),setTimeout(()=>x(!1),1e3)};return d.useEffect(()=>{i||(h(""),p(""))},[i]),e.jsxs(Se,{open:i,onOpenChange:u,children:[e.jsx(Te,{asChild:!0,children:e.jsx(I.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.3},whileHover:{scale:1.02},children:e.jsxs(H,{variant:"outline",role:"combobox","aria-expanded":i,className:P("w-[100px] justify-between text-sm font-normal",!j&&"text-muted-foreground",s),title:"Select month",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(Ve,{className:"mr-2 h-4 w-4"}),e.jsx(G,{mode:"wait",children:e.jsx(I.div,{initial:{y:c?11:0,opacity:c?0:1},animate:{y:0,opacity:1},exit:{y:-10,opacity:0},transition:{duration:.2},children:e.jsx("span",{className:"truncate",children:j?.label||o})},j?.label)})]}),e.jsx(Xt,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})})}),e.jsx(Pe,{className:"w-[200px] p-0",align:"start",children:e.jsxs(zt,{shouldFilter:!1,children:[e.jsx(Yt,{placeholder:"Search month...",value:g,onValueChange:y=>{p(y),h(y)}}),e.jsxs(Jt,{children:[e.jsx(Ut,{children:"Month not found"}),e.jsx(Bt,{children:e.jsxs(te,{className:"h-[200px]",children:[b.map(y=>e.jsxs(Qt,{value:y.value,onSelect:w,children:[e.jsx(Gt,{className:P("mr-2 h-4 w-4",S===parseInt(y.value)?"opacity-100":"opacity-0")}),e.jsx("span",{className:"flex-1",children:y.label})]},y.value)),e.jsx(Kt,{orientation:"vertical"})]})})]})]})})]})}function nc({date:t,onDateChange:a,locale:n=dt,className:s="",placeholder:r="Choose Day",weekStartsOn:o=1}){const[i,u]=d.useState(!1),[m,h]=d.useState(""),[g,p]=d.useState(""),[c,x]=d.useState(!1),[v,E]=d.useTransition(),[M,S]=d.useState(new Date),k=t||M,b=rn(k),j=d.useMemo(()=>T=>{if(T>=11&&T<=13)return"th";switch(T%10){case 1:return"st";case 2:return"nd";case 3:return"rd";default:return"th"}},[]),w=d.useMemo(()=>{const T=en(k),V=Fe(k),B=ss(new Date(T,V));return Array.from({length:B},(ne,Z)=>{const Q=Z+1,X=new Date(T,V,Q),q=_(X,"EEE",{locale:n,weekStartsOn:o}),ue=_(X,"EEEE",{locale:n,weekStartsOn:o}),he=j(Q);return{value:Q.toString(),day:Q,dayName:q,fullDayName:ue,daySuffix:he,formattedDate:_(X,"d MMMM",{locale:n}),label:`${q} ${Q}${he}`,searchableText:`${ue} ${Q} ${_(X,"d MMMM",{locale:n})}`.toLowerCase()}})},[k,n,o,j]),y=d.useMemo(()=>{if(!m)return w;const T=m.toLowerCase();return w.filter(V=>V.searchableText.includes(T)||V.day.toString().includes(T))},[w,m]),f=w.find(T=>T.day===b)||w[0],A=T=>{const V=parseInt(T),B=new Date(k);B.setDate(V),a?a(B):S(B),u(!1),h(""),x(!0),setTimeout(()=>{x(!1)},1e3)};return d.useEffect(()=>{i||(h(""),p(""))},[i]),e.jsxs(Se,{open:i,onOpenChange:u,children:[e.jsx(Te,{asChild:!0,children:e.jsx(I.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.3},whileHover:{scale:1.02},children:e.jsxs(H,{variant:"outline",role:"combobox","aria-expanded":i,className:P("w-[130px] justify-between text-sm font-normal",!f&&"text-muted-foreground",s),title:"Choose a day",children:[f?e.jsx(G,{mode:"wait",children:e.jsx(I.div,{initial:{y:c?11:0,opacity:c?0:1},animate:{y:0,opacity:1},exit:{y:-10,opacity:0},transition:{duration:.2},children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-muted-foreground italic",children:f.dayName}),e.jsxs("span",{children:[f.day,e.jsx("sup",{children:f.daySuffix})]})]})},f.label)}):r,e.jsx(Xt,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})})}),e.jsx(Pe,{className:"w-[130px] p-0",align:"start",children:e.jsxs(zt,{shouldFilter:!1,children:[e.jsx(Yt,{placeholder:"Välj dag...",value:g,onValueChange:T=>{p(T),h(T)}}),e.jsxs(Jt,{children:[e.jsx(Ut,{children:"Hari tidak ditemukan"}),e.jsx(Bt,{children:e.jsxs(te,{className:"h-[200px]",children:[y.map(T=>e.jsxs(Qt,{value:T.value,onSelect:A,className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-muted-foreground italic",children:T.dayName}),e.jsxs("span",{children:[T.day,e.jsx("sup",{children:T.daySuffix})]})]}),e.jsx(Gt,{className:P("h-4 w-4",f.day===T.day?"opacity-100":"opacity-0")})]},T.value)),e.jsx(Kt,{orientation:"vertical"})]})})]})]})})]})}const St=[{label:"Day",value:W.DAY},{label:"",value:W.DAYS,hasDropdown:!0},{label:"Week",value:W.WEEK},{label:"Month",value:W.MONTH},{label:"Year",value:W.YEAR}],Ya=[3,5,7,10,14,31],Je={type:"tween",ease:"easeOut",duration:.15},We=(t,a)=>({x:t.left-a.left-10,y:t.top-a.top-4,width:t.width+20,height:t.height+8});function sc({viewType:t,onChange:a,className:n="",disabledViews:s=[]}){const r=d.useRef(new Array(St.length).fill(null)),o=d.useRef(new Array(St.length).fill(null)),i=d.useRef(null),u=d.useRef(null),m=d.useRef(null),[h,g]=d.useState(null),[p,c]=d.useState(null),[,x]=d.useTransition(),{daysCount:v,setDaysCount:E}=ae(),[,M]=d.useState(7),[,S]=d.useState(""),k=St.filter(l=>!s.includes(l.value)),b=k.findIndex(l=>l.value===t),[j,w]=d.useMemo(()=>{const l=k.slice(0,2),D=k.slice(2);return[l,D]},[k]),y=w.length>0,f=j.findIndex(l=>l.value===t),A=w.some(l=>l.value===t),T=i.current?.getBoundingClientRect(),V=u.current?.getBoundingClientRect(),B=r.current[b]?.getBoundingClientRect(),ne=o.current[f]?.getBoundingClientRect(),Z=h!==null?r.current[h]?.getBoundingClientRect():null,Q=p!==null?o.current[p]?.getBoundingClientRect():null,X=m.current?.getBoundingClientRect(),q=l=>{s.includes(l)||(a(l),S(l))},ue=l=>{l.preventDefault();const D=l.currentTarget.dataset.value;l.currentTarget.dataset.dropdown!=="true"&&q(D)},he=l=>{l.preventDefault();const D=l.currentTarget.dataset.value;q(D)},pe=async l=>{E(l);try{await M(l),q(W.DAYS)}catch(D){console.error("Failed to update URL state:",D)}};return e.jsxs("div",{className:P("border-border relative",n),children:[e.jsxs("div",{ref:i,className:"relative z-0 hidden items-center justify-start py-2 md:flex",onPointerLeave:()=>g(null),children:[k.map((l,D)=>{const N=t===l.value;return l.hasDropdown?e.jsxs(ft,{children:[e.jsx(pt,{asChild:!0,children:e.jsxs("button",{ref:C=>{C&&(r.current[D]=C)},disabled:s.includes(l.value),"data-value":l.value,"data-dropdown":"true",onPointerEnter:()=>g(D),onFocus:()=>g(D),className:P("relative z-20 flex h-8 cursor-pointer items-center gap-1 rounded-md bg-transparent px-4 text-sm select-none",N?"text-foreground font-medium":"text-muted-foreground",s.includes(l.value)&&"cursor-not-allowed opacity-50"),"aria-selected":N,role:"tab",children:[l.label," (",v,")",e.jsx(it,{className:"h-3 w-3"})]})}),e.jsx(vt,{align:"start",children:Ya.map(C=>e.jsxs(yt,{onClick:()=>pe(C),className:P("cursor-pointer",v===C&&"bg-muted font-medium"),children:[C," days"]},C))})]},l.value):e.jsx("button",{ref:C=>{C&&(r.current[D]=C)},disabled:s.includes(l.value),onClick:ue,"data-value":l.value,onPointerEnter:()=>g(D),onFocus:()=>g(D),className:P("relative z-20 flex h-8 cursor-pointer items-center rounded-md bg-transparent px-3 text-sm select-none",N?"text-foreground font-medium":"text-muted-foreground",s.includes(l.value)&&"cursor-not-allowed opacity-50"),"aria-selected":N,role:"tab",children:l.label},l.value)}),e.jsx(G,{children:Z&&T&&e.jsx(I.div,{className:"bg-muted absolute top-0 left-0 z-10 rounded-md",initial:{...We(Z,T),opacity:0},animate:{...We(Z,T),opacity:1},exit:{...We(Z,T),opacity:0},transition:Je},"hover")}),e.jsx(G,{children:B&&T&&e.jsx(I.div,{className:"bg-foreground absolute bottom-0 left-0 z-10 h-[2px]",initial:!1,animate:{width:B.width-16,x:B.left-T.left+8,opacity:1},transition:Je})})]}),e.jsxs("div",{ref:u,className:"relative z-0 flex items-center justify-start py-2 md:hidden",onPointerLeave:()=>c(null),children:[j.map((l,D)=>{const N=t===l.value;return l.hasDropdown?e.jsxs(ft,{children:[e.jsx(pt,{asChild:!0,children:e.jsxs("button",{ref:C=>{C&&(o.current[D]=C)},"data-value":l.value,"data-dropdown":"true",disabled:s.includes(l.value),onPointerEnter:()=>c(D),onFocus:()=>c(D),className:P("relative z-20 flex h-8 cursor-pointer items-center gap-1 rounded-md bg-transparent px-4 text-sm select-none",N?"text-foreground font-medium":"text-muted-foreground",s.includes(l.value)&&"cursor-not-allowed opacity-50"),"aria-selected":N,role:"tab",children:[l.label," (",v,")",e.jsx(it,{className:"h-3 w-3"})]})}),e.jsx(vt,{align:"start",children:Ya.map(C=>e.jsxs(yt,{onClick:()=>pe(C),className:P("cursor-pointer",v===C&&"bg-muted font-medium"),children:[C," days"]},C))})]},l.value):e.jsx("button",{ref:C=>{C&&(o.current[D]=C)},"data-value":l.value,disabled:s.includes(l.value),onClick:ue,onPointerEnter:()=>c(D),onFocus:()=>c(D),className:P("relative z-20 flex h-8 cursor-pointer items-center rounded-md bg-transparent px-4 text-sm select-none",N?"text-foreground font-medium":"text-muted-foreground",s.includes(l.value)&&"cursor-not-allowed opacity-50"),"aria-selected":N,role:"tab",children:l.label},l.value)}),e.jsx(G,{children:Q&&V&&e.jsx(I.div,{className:"bg-muted absolute top-0 left-0 z-10 rounded-md",initial:{...We(Q,V),opacity:0},animate:{...We(Q,V),opacity:1},exit:{...We(Q,V),opacity:0},transition:Je},"hover-mobile")}),e.jsx(G,{children:ne&&V&&!A&&e.jsx(I.div,{className:"bg-foreground absolute bottom-0 left-0 z-10 h-[2px]",initial:!1,animate:{width:ne.width-16,x:ne.left-V.left+8,opacity:1},transition:Je})}),y&&e.jsxs(ft,{children:[e.jsx(pt,{asChild:!0,children:e.jsx(I.button,{ref:m,className:P("text-muted-foreground relative z-20 ml-3 flex items-center justify-center rounded-md px-3 py-2 text-sm",A&&"text-foreground font-medium"),whileHover:{backgroundColor:"var(--muted)",transition:{duration:.2}},children:e.jsx(bs,{className:"h-4 w-4"})})}),e.jsx(vt,{align:"end",children:w.map(l=>e.jsx(yt,{"data-value":l.value,onClick:he,disabled:s.includes(l.value),className:P("cursor-pointer",t===l.value&&"bg-muted font-medium"),children:l.label},l.value))})]}),e.jsx(G,{children:X&&V&&A&&e.jsx(I.div,{className:"bg-foreground absolute bottom-0 left-0 z-10 h-[2px]",initial:!1,animate:{width:X.width-16,x:X.left-V.left+8,opacity:1},transition:Je})})]})]})}const rc=[{value:"day",label:"Day View"},{value:"days",label:"Days View"},{value:"week",label:"Week View"},{value:"month",label:"Month View"},{value:"year",label:"Year View"}],ic=[{value:"calendar",label:"Calendar Mode"},{value:"list",label:"List Mode"}],oc=[{id:"general",label:"General",icon:_t},{id:"calendar",label:"Calendar Views",icon:Ve},{id:"integration",label:"Integration",icon:Wt}],O=({label:t,description:a,children:n})=>e.jsxs("div",{className:"flex items-center justify-between py-3",children:[e.jsxs("div",{className:"min-w-0 flex-1 pr-4",children:[e.jsx("div",{className:"text-foreground text-sm font-medium",children:t}),a&&e.jsx("div",{className:"text-muted-foreground mt-1 text-xs",children:a})]}),e.jsx("div",{className:"flex-shrink-0",children:n})]}),be=({title:t,icon:a,children:n})=>e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"text-foreground flex items-center gap-2 text-sm font-semibold",children:[e.jsx(a,{className:"h-4 w-4"}),t]}),e.jsx("div",{className:"space-y-1",children:n})]});function lc(){const{currentView:t,viewMode:a,timeFormat:n,locale:s,firstDayOfWeek:r,viewSettings:o,setView:i,setMode:u,setTimeFormat:m,setLocale:h,setFirstDayOfWeek:g,updateDayViewConfig:p,updateDaysViewConfig:c,updateWeekViewConfig:x,updateMonthViewConfig:v,updateYearViewConfig:E}=ae(de(f=>({currentView:f.currentView,viewMode:f.viewMode,timeFormat:f.timeFormat,locale:f.locale,firstDayOfWeek:f.firstDayOfWeek,daysCount:f.daysCount,viewSettings:f.viewSettings,setView:f.setView,setMode:f.setMode,setTimeFormat:f.setTimeFormat,setLocale:f.setLocale,setFirstDayOfWeek:f.setFirstDayOfWeek,setDaysCount:f.setDaysCount,updateDayViewConfig:f.updateDayViewConfig,updateDaysViewConfig:f.updateDaysViewConfig,updateWeekViewConfig:f.updateWeekViewConfig,updateMonthViewConfig:f.updateMonthViewConfig,updateYearViewConfig:f.updateYearViewConfig}))),[M,S]=d.useState(!1),[k,b]=d.useState("general"),[,j]=d.useTransition(),[,w]=d.useState(""),y=f=>{w(f),i(f)};return e.jsxs(Xe,{open:M,onOpenChange:S,children:[e.jsx(ps,{asChild:!0,children:e.jsx(H,{variant:"outline",className:"flex items-center gap-2",children:e.jsx(_t,{className:"h-4 w-4"})})}),e.jsx(qe,{className:"max-h-[85vh] overflow-hidden p-0 sm:max-w-3xl",children:e.jsxs("div",{className:"flex h-full",children:[e.jsx("div",{className:"bg-muted/20 w-56 border-r p-4",children:e.jsx("div",{className:"space-y-1",children:oc.map(f=>{const A=f.icon;return e.jsxs("button",{onClick:()=>b(f.id),className:`flex w-full items-center gap-2 rounded-md px-3 py-2 text-left transition-colors ${k===f.id?"bg-primary text-primary-foreground":"hover:bg-muted/50 text-foreground"}`,children:[e.jsx(A,{className:"h-4 w-4"}),e.jsx("span",{className:"text-sm",children:f.label})]},f.id)})})}),e.jsxs("div",{className:"flex flex-1 flex-col",children:[e.jsxs(Ge,{className:"p-6 pb-4",children:[e.jsxs(Ze,{className:"flex items-center gap-2",children:[e.jsx(_t,{className:"h-5 w-5"}),"Calendar Settings"]}),e.jsx(mt,{children:"Customize your calendar experience and behavior"})]}),e.jsx("div",{className:"flex-1 overflow-y-auto px-6 pb-6",children:e.jsxs(te,{className:"h-[400px] w-full pr-4",children:[k==="general"&&e.jsx(cc,{currentView:t,viewMode:a,timeFormat:n,locale:s,firstDayOfWeek:r,handleViewChange:y,setMode:u,setTimeFormat:m,setLocale:h,setFirstDayOfWeek:g}),k==="calendar"&&e.jsx(dc,{viewSettings:o,updateDayViewConfig:p,updateDaysViewConfig:c,updateWeekViewConfig:x,updateMonthViewConfig:v,updateYearViewConfig:E}),k==="integration"&&e.jsx(uc,{})]})})]})]})})]})}const cc=({currentView:t,viewMode:a,timeFormat:n,locale:s,firstDayOfWeek:r,handleViewChange:o,setMode:i,setTimeFormat:u,setLocale:m,setFirstDayOfWeek:h})=>{const g=fe(s),p=nl(g);return e.jsxs("div",{className:"space-y-8",children:[e.jsxs(be,{title:"Display & Format",icon:vs,children:[e.jsx(O,{label:"Default view",description:"Choose which view opens by default",children:e.jsxs(ie,{value:t,onValueChange:o,children:[e.jsx(oe,{className:"w-40",children:e.jsx(le,{})}),e.jsx(ce,{children:rc.map(c=>e.jsx(J,{value:c.value,children:c.label},c.value))})]})}),e.jsx(O,{label:"View mode",description:"Default display mode for calendar",children:e.jsxs(ie,{value:a,onValueChange:c=>i(c),children:[e.jsx(oe,{className:"w-40",children:e.jsx(le,{})}),e.jsx(ce,{children:ic.map(c=>e.jsx(J,{value:c.value,children:c.label},c.value))})]})}),e.jsx(O,{label:"Time format",description:"Choose between 12-hour or 24-hour format",children:e.jsxs(ie,{value:n,onValueChange:c=>u(c),children:[e.jsx(oe,{className:"w-40",children:e.jsx(le,{})}),e.jsxs(ce,{children:[e.jsx(J,{value:"12",children:"12-hour (AM/PM)"}),e.jsx(J,{value:"24",children:"24-hour"})]})]})})]}),e.jsx(He,{}),e.jsxs(be,{title:"Regional Settings",icon:ws,children:[e.jsx(O,{label:"Language & Region",description:"Set your preferred language and locale",children:e.jsxs(ie,{value:s,onValueChange:m,children:[e.jsx(oe,{className:"w-40",children:e.jsx(le,{placeholder:"Select language"})}),e.jsx(ce,{children:on.map(c=>e.jsx(J,{value:c.value,children:c.label},c.value))})]})}),e.jsx(O,{label:"Start week on",description:"Choose the first day of the week",children:e.jsxs(ie,{value:r.toString(),onValueChange:c=>h(parseInt(c)),children:[e.jsx(oe,{className:"w-40",children:e.jsx(le,{})}),e.jsx(ce,{children:p.map(c=>e.jsx(J,{value:c.value.toString(),children:c.label},c.value))})]})})]})]})},dc=({viewSettings:t,updateDayViewConfig:a,updateDaysViewConfig:n,updateWeekViewConfig:s,updateMonthViewConfig:r,updateYearViewConfig:o})=>e.jsxs("div",{className:"space-y-8",children:[e.jsxs(be,{title:"Day View",icon:ze,children:[e.jsx(O,{label:"Current time indicator",description:"Show red line at current time",children:e.jsx(Y,{checked:t.day.showCurrentTimeIndicator,onCheckedChange:i=>a({showCurrentTimeIndicator:i})})}),e.jsx(O,{label:"Hover time indicator",description:"Show time when hovering over time slots",children:e.jsx(Y,{checked:t.day.showHoverTimeIndicator,onCheckedChange:i=>a({showHoverTimeIndicator:i})})}),e.jsx(O,{label:"Click to create events",description:"Allow clicking time slots to create new events",children:e.jsx(Y,{checked:t.day.enableTimeSlotClick,onCheckedChange:i=>a({enableTimeSlotClick:i})})})]}),e.jsx(He,{}),e.jsxs(be,{title:"Days View",icon:st,children:[e.jsx(O,{label:"Highlight today",description:"Highlight the current day column",children:e.jsx(Y,{checked:t.days.highlightToday,onCheckedChange:i=>n({highlightToday:i})})}),e.jsx(O,{label:"Current time indicator",description:"Show red line at current time",children:e.jsx(Y,{checked:t.days.showCurrentTimeIndicator,onCheckedChange:i=>n({showCurrentTimeIndicator:i})})}),e.jsx(O,{label:"Hover time indicator",description:"Show time when hovering over time slots",children:e.jsx(Y,{checked:t.days.showHoverTimeIndicator,onCheckedChange:i=>n({showHoverTimeIndicator:i})})}),e.jsx(O,{label:"Click time slots to create events",description:"Allow clicking time slots to create new events",children:e.jsx(Y,{checked:t.days.enableTimeSlotClick,onCheckedChange:i=>n({enableTimeSlotClick:i})})}),e.jsx(O,{label:"Click time blocks to create events",description:"Allow clicking time blocks to create new events",children:e.jsx(Y,{checked:t.days.enableTimeBlockClick,onCheckedChange:i=>n({enableTimeBlockClick:i})})}),e.jsx(O,{label:"Expand multi-day events",description:"Show multi-day events across multiple columns",children:e.jsx(Y,{checked:t.days.expandMultiDayEvents,onCheckedChange:i=>n({expandMultiDayEvents:i})})})]}),e.jsx(He,{}),e.jsxs(be,{title:"Week View",icon:st,children:[e.jsx(O,{label:"Highlight today",description:"Highlight the current day column",children:e.jsx(Y,{checked:t.week.highlightToday,onCheckedChange:i=>s({highlightToday:i})})}),e.jsx(O,{label:"Current time indicator",description:"Show red line at current time",children:e.jsx(Y,{checked:t.week.showCurrentTimeIndicator,onCheckedChange:i=>s({showCurrentTimeIndicator:i})})}),e.jsx(O,{label:"Hover time indicator",description:"Show time when hovering over time slots",children:e.jsx(Y,{checked:t.week.showHoverTimeIndicator,onCheckedChange:i=>s({showHoverTimeIndicator:i})})}),e.jsx(O,{label:"Click time slots to create events",description:"Allow clicking time slots to create new events",children:e.jsx(Y,{checked:t.week.enableTimeSlotClick,onCheckedChange:i=>s({enableTimeSlotClick:i})})}),e.jsx(O,{label:"Click time blocks to create events",description:"Allow clicking time blocks to create new events",children:e.jsx(Y,{checked:t.week.enableTimeBlockClick,onCheckedChange:i=>s({enableTimeBlockClick:i})})}),e.jsx(O,{label:"Expand multi-day events",description:"Show multi-day events across multiple columns",children:e.jsx(Y,{checked:t.week.expandMultiDayEvents,onCheckedChange:i=>s({expandMultiDayEvents:i})})})]}),e.jsx(He,{}),e.jsxs(be,{title:"Month View",icon:st,children:[e.jsx(O,{label:"Events per day limit",description:"Maximum events shown before +more indicator",children:e.jsx($t,{type:"number",value:t.month.eventLimit,onChange:i=>r({eventLimit:parseInt(i.target.value)}),className:"w-20 text-center",min:1,max:10})}),e.jsx(O,{label:"Show more events indicator",description:"Display +X more when events exceed limit",children:e.jsx(Y,{checked:t.month.showMoreEventsIndicator,onCheckedChange:i=>r({showMoreEventsIndicator:i})})}),e.jsx(O,{label:"Hide outside days",description:"Hide days from previous/next month",children:e.jsx(Y,{checked:t.month.hideOutsideDays,onCheckedChange:i=>r({hideOutsideDays:i})})})]}),e.jsx(He,{}),e.jsxs(be,{title:"Year View",icon:ms,children:[e.jsx(O,{label:"Show month labels",description:"Display month names in year view",children:e.jsx(Y,{checked:t.year.showMonthLabels,onCheckedChange:i=>o({showMonthLabels:i})})}),e.jsx(O,{label:"Quarter view mode",description:"Group months by quarters instead of 12-month grid",children:e.jsx(Y,{checked:t.year.quarterView,onCheckedChange:i=>o({quarterView:i})})}),e.jsx(O,{label:"Highlight current month",description:"Emphasize the current month in year view",children:e.jsx(Y,{checked:t.year.highlightCurrentMonth,onCheckedChange:i=>o({highlightCurrentMonth:i})})}),e.jsx(O,{label:"Enable event preview",description:"Show event indicators in year view",children:e.jsx(Y,{checked:t.year.enableEventPreview,onCheckedChange:i=>o({enableEventPreview:i})})}),t.year.enableEventPreview&&e.jsxs(e.Fragment,{children:[e.jsx(O,{label:"Preview events per month",description:"Max events shown per month in year view",children:e.jsx($t,{type:"number",value:t.year.previewEventsPerMonth,onChange:i=>o({previewEventsPerMonth:parseInt(i.target.value)}),className:"w-20 text-center",min:1,max:10})}),e.jsx(O,{label:"Show more events indicator",description:"Display +X more when events exceed limit",children:e.jsx(Y,{checked:t.year.showMoreEventsIndicator,onCheckedChange:i=>o({showMoreEventsIndicator:i})})})]})]})]}),uc=()=>e.jsx("div",{className:"space-y-8",children:e.jsxs(be,{title:"External Integrations",icon:Wt,children:[e.jsxs("div",{className:"text-muted-foreground bg-muted/30 rounded-lg p-4 text-sm",children:[e.jsxs("div",{className:"mb-2 flex items-center gap-2",children:[e.jsx(Wt,{className:"h-4 w-4"}),e.jsx("span",{className:"font-medium",children:"Coming Soon"})]}),e.jsx("p",{children:"Integration settings for Google Calendar, Outlook, and other calendar services will be available here."})]}),e.jsx(O,{label:"Google Calendar Sync",description:"Sync events with your Google Calendar",children:e.jsx(me,{variant:"success",children:"OK!"})}),e.jsx(O,{label:"Whatsapp Integration",description:"Connect with Facebook Whatsapp calendar",children:e.jsx(me,{variant:"success",children:"OK!"})}),e.jsx(O,{label:"CalDAV Support",description:"Connect to CalDAV compatible calendar servers",children:e.jsx(me,{variant:"success",children:"OK!"})}),e.jsx(O,{label:"Telavox Support",description:"Connect to Telavox api communication servers",children:e.jsx(me,{variant:"success",children:"OK!"})})]})}),mc=({open:t,onOpenChange:a,searchQuery:n,onSearchQueryChange:s,onEventSelect:r,timeFormat:o})=>{const[i,u]=d.useState(!1),[m,h]=d.useState([]),[g,p]=d.useState(null),[c,x]=d.useState(!1),[v,E]=d.useState(0),M=d.useRef(null),S=d.useRef(null),k=d.useCallback(async(j,w)=>{if(M.current&&clearTimeout(M.current),S.current&&S.current.abort(),j.trim().length<2){h([]),p(null),E(0),x(!1);return}M.current=setTimeout(async()=>{try{u(!0),p(null),S.current=new AbortController;const y={search:j.trim(),categories:w?.categories??[],colors:w?.colors??[],locations:w?.locations??[],repeatingTypes:w?.repeatingTypes??[],limit:20,offset:0,isRepeating:w?.isRepeating},f=await Ra(y);if(S.current?.signal.aborted)return;f.success?(h(f.events),E(f.totalCount),x(f.hasMore)):(p(f.error||"Failed to search events"),h([]))}catch(y){y instanceof Error&&y.name!=="AbortError"&&(p("An error occurred while searching events"),h([]))}finally{u(!1)}},300)},[]);d.useEffect(()=>{t&&k(n)},[n,t,k]),d.useEffect(()=>(t||(M.current&&clearTimeout(M.current),S.current&&S.current.abort(),h([]),p(null),u(!1),E(0),x(!1)),()=>{M.current&&clearTimeout(M.current),S.current&&S.current.abort()}),[t]);const b=d.useCallback(async()=>{if(!(!c||i||n.trim().length<2))try{u(!0);const j={search:n.trim(),categories:[],colors:[],locations:[],repeatingTypes:[],limit:20,offset:m.length},w=await Ra(j);w.success&&(h(y=>[...y,...w.events]),x(w.hasMore))}catch(j){console.error(j),p("Failed to load more events")}finally{u(!1)}},[c,i,n,m.length]);return e.jsx(Xe,{open:t,onOpenChange:a,children:e.jsxs(qe,{className:"flex max-h-[80vh] max-w-2xl flex-col",children:[e.jsx(Ge,{children:e.jsx(Ze,{children:"Sök Bokningar"})}),e.jsxs("div",{className:"flex-1 space-y-4 overflow-hidden",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Oe,{className:"text-muted-foreground absolute top-1/2 left-3 h-4 w-4 -translate-y-1/2 transform"}),e.jsx($t,{placeholder:"Search events by title, description, location, or category...",value:n,onChange:j=>s(j.target.value),className:"pl-10"})]}),n.trim().length>=2&&!i&&e.jsx("div",{className:"text-muted-foreground text-sm",children:v>0?e.jsxs(e.Fragment,{children:["Found ",v," event",v!==1?"s":"",' matching "',n,'"',c&&` • Showing first ${m.length}`]}):`No events found matching "${n}"`}),v>0?e.jsx(te,{className:"h-[400px] flex-1",children:g?e.jsxs("div",{className:"text-destructive py-8 text-center",children:[e.jsx(Oe,{className:"mx-auto mb-2 h-8 w-8 opacity-50"}),e.jsx("p",{children:g})]}):i&&m.length===0?e.jsxs("div",{className:"flex items-center justify-center py-8",children:[e.jsx(wa,{className:"h-6 w-6 animate-spin"}),e.jsx("span",{className:"text-muted-foreground ml-2 text-sm",children:"Searching events..."})]}):m.length>0?e.jsxs("div",{className:"space-y-2 pr-4",children:[m.map(j=>e.jsx(aa,{event:j,onClick:r,timeFormat:o},j.id)),c&&e.jsx("div",{className:"pt-4",children:e.jsx("button",{onClick:b,disabled:i,className:"hover:bg-muted/50 flex w-full items-center justify-center rounded-lg border p-3 text-sm transition-colors disabled:opacity-50",children:i?e.jsxs(e.Fragment,{children:[e.jsx(wa,{className:"mr-2 h-4 w-4 animate-spin"}),"Loading more..."]}):"Load more events"})})]}):n.trim().length>=2&&!i?e.jsxs("div",{className:"text-muted-foreground py-8 text-center",children:[e.jsx(Oe,{className:"mx-auto mb-2 h-8 w-8 opacity-50"}),e.jsxs("p",{children:['No events found matching "',n,'"']}),e.jsx("p",{className:"mt-1 text-xs",children:"Try different keywords or check your spelling"})]}):e.jsxs("div",{className:"text-muted-foreground py-8 text-center",children:[e.jsx(Oe,{className:"mx-auto mb-2 h-8 w-8 opacity-50"}),e.jsx("p",{children:"Start typing to search events..."}),e.jsx("p",{className:"mt-1 text-xs",children:"Enter at least 2 characters"})]})}):null]})]})})},Ja={categories:[],locations:[],colors:[],isRepeating:"",repeatingTypes:[],dateStart:"",dateEnd:"",search:""};function hc({users:t,selectedTechnicianId:a,onTechnicianChange:n,totalEvents:s,categoryOptions:r,currentDate:o,onDateChange:i}){const[u,m]=d.useState({}),{viewMode:h,locale:g,timeFormat:p,currentView:c,setView:x,setTimeFormat:v,setMode:E,openQuickAddDialog:M,setQuickAddDefaults:S,openEventDialog:k,daysCount:b}=ae(de(l=>({viewMode:l.viewMode,locale:l.locale,timeFormat:l.timeFormat,currentView:l.currentView,setView:l.setView,setTimeFormat:l.setTimeFormat,setMode:l.setMode,openQuickAddDialog:l.openQuickAddDialog,setQuickAddDefaults:l.setQuickAddDefaults,openEventDialog:l.openEventDialog,daysCount:l.daysCount}))),j=fe(g),[w,y]=d.useState(!1),[f,A]=d.useState(Ja),T=()=>{let l=0;return l+=f.categories.length,l+=f.locations.length,l+=f.colors.length,l+=f.repeatingTypes.length,f.isRepeating&&(l+=1),(f.dateStart||f.dateEnd)&&(l+=1),f.search&&(l+=1),l},V=(l,D)=>{const N=f[l],C=N.includes(D)?N.filter(F=>F!==D):[...N,D];A(F=>({...F,[l]:C}))},B=(l,D)=>{A(N=>({...N,[l]:D}))},ne=()=>{A(Ja)},Z=(l,D)=>{const C=f[l].filter(F=>F!==D);A(F=>({...F,[l]:C}))},Q=T(),X=d.useCallback(()=>{let l=new Date(o);switch(c){case"day":l=Qe(l,1);break;case"days":l=Qe(l,b||1);break;case"week":l=os(l,1);break;case"month":l=is(l,1);break;case"year":l=rs(l,1);break;default:l=Qe(l,1);break}i(l)},[o,c,b,i]),q=d.useCallback(()=>{let l=new Date(o);switch(c){case"day":l=gt(l,1);break;case"days":l=gt(l,b||1);break;case"week":l=ds(l,1);break;case"month":l=cs(l,1);break;case"year":l=ls(l,1);break;default:l=gt(l,1);break}i(l)},[o,c,b,i]),ue=d.useCallback(l=>{v(l)},[v]),he=d.useCallback(l=>{E(l)},[E]),pe=d.useCallback(l=>{x(l)},[x]);return d.useEffect(()=>{const l=D=>{D.key==="ArrowLeft"&&q(),D.key==="ArrowRight"&&X()};return window.addEventListener("keydown",l),()=>window.removeEventListener("keydown",l)},[q,X]),d.useEffect(()=>{(async()=>{try{const D=await fetch("/api/calendar/service-users");if(!D.ok)throw new Error("Failed to fetch technicians");const N=await D.json(),C={};N.forEach(F=>{C[String(F.id)]=F}),m(C)}catch(D){console.error("Error fetching technicians:",D)}})()},[]),d.useEffect(()=>{if(!a||a==="all"){S({service_user_id:void 0,booking_calendar_id:void 0,google_event_id:void 0});return}const D=u[a]?.calendar_ids?.[0];S({service_user_id:a,booking_calendar_id:D?String(D):void 0,google_event_id:void 0})},[a,u,S]),e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("div",{className:"bg-muted/30 flex flex-col",children:[e.jsxs("div",{className:"flex flex-wrap items-center justify-center lg:justify-between gap-x-4 gap-y-0 px-2",children:[e.jsx("div",{className:"flex flex-wrap items-center justify-center lg:justify-start gap-2",children:e.jsxs("div",{className:"flex flex-wrap items-center justify-center lg:justify-start gap-1 sm:gap-2",children:[e.jsx("div",{className:"min-w-[120px]",children:t&&t.length>0&&n&&e.jsxs(ie,{value:a,onValueChange:n,children:[e.jsx(oe,{className:"h-9 w-[120px] gap-2 text-sm font-medium",children:e.jsx(le,{placeholder:"Tekniker"})}),e.jsxs(ce,{children:[e.jsx(J,{value:"all",className:"text-sm",children:"Tekniker"}),t.map(l=>e.jsx(J,{value:l.id,className:"text-sm",children:l.name},l.id))]})]})}),e.jsxs("div",{className:"flex flex-wrap items-center justify-center gap-2 lg:gap-4 min-w-[270px] max-w-[320px] relative min-[768px]:max-[1024px]:min-w-[250px]",children:[f.isRepeating==="repeating"&&e.jsxs(Se,{children:[e.jsx(Te,{asChild:!0,children:e.jsxs(H,{variant:f.repeatingTypes.length>0?"default":"outline",size:"sm",className:"h-9 gap-2 px-3 text-sm font-medium transition-all absolute l-0",children:[e.jsx(ze,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Repeat"}),f.repeatingTypes.length>0&&e.jsx(me,{variant:"secondary",className:"px-1.5 py-0",children:f.repeatingTypes.length})]})}),e.jsx(Pe,{className:"w-52 p-4",children:e.jsxs("div",{className:"space-y-3",children:[e.jsx("h4",{className:"text-sm font-medium",children:"Repeat Frequency"}),e.jsx("div",{className:"space-y-3",children:["daily","weekly","monthly"].map(l=>e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(jt,{id:`repeat-${l}`,checked:f.repeatingTypes.includes(l),onCheckedChange:()=>V("repeatingTypes",l)}),e.jsx(bt,{htmlFor:`repeat-${l}`,className:"cursor-pointer text-sm font-normal capitalize",children:l})]},l))})]})})]}),Q>0&&e.jsxs(H,{variant:"ghost",onClick:ne,size:"sm",className:"h-8 gap-1 px-2 text-xs font-medium text-muted-foreground hover:text-foreground",children:[e.jsx(Be,{className:"h-3 w-3"}),"Clear"]}),e.jsx(H,{variant:"ghost",size:"icon",className:"hover:bg-muted h-9 w-9 rounded-full   absolute left-0 min-[768px]:max-[1024px]:hidden",onClick:q,children:e.jsx(hs,{className:"h-4 w-4"})}),e.jsxs("div",{className:"flex items-center space-x-1",children:[c==="day"&&e.jsx(nc,{date:o,onDateChange:i,locale:j,weekStartsOn:0,placeholder:"Select day"}),c!=="year"&&e.jsx(ac,{date:o,onDateChange:i,locale:j,monthFormat:"LLL"}),e.jsx(tc,{date:o,onDateChange:i,yearRange:20,minYear:2e3,maxYear:2030})]}),e.jsx(H,{variant:"ghost",size:"icon",className:"hover:bg-muted h-9 w-9 rounded-full   absolute right-0 min-[768px]:max-[1024px]:hidden",onClick:X,children:e.jsx(tn,{className:"h-4 w-4"})})]})]})}),e.jsx(sc,{viewType:c,onChange:pe}),e.jsxs("div",{className:"flex flex-wrap items-center justify-center lg:justify-end gap-2 min-[768px]:max-[1024px]:hidden",children:[e.jsxs("div",{className:" flex min-w-[240px] min-[768px]:max-[1320px]:hidden gap-2",children:[e.jsx(xs,{}),e.jsx(Zl,{viewType:c,currentDate:o,onDateChange:i}),e.jsxs(Se,{children:[e.jsx(Te,{asChild:!0,children:e.jsxs(H,{variant:f.categories.length>0?"default":"outline",size:"icon",className:"relative h-8 w-9 transition-all w-[50px]",children:[e.jsx(At,{className:"h-4 w-4"}),f.categories.length>0&&e.jsx("span",{className:"absolute -right-1 -top-1 flex h-4 w-4 items-center justify-center rounded-full bg-primary text-[10px] text-primary-foreground",children:f.categories.length})]})}),e.jsx(Pe,{className:"w-64 p-4",children:e.jsxs("div",{className:"space-y-3",children:[e.jsx("h4",{className:"text-sm font-medium",children:"Välj Kategori"}),e.jsx("div",{className:"max-h-48 space-y-3 overflow-y-auto",children:r&&r.length>0?r.map(l=>e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(jt,{id:`category-${l.value}`,checked:f.categories.includes(l.value),onCheckedChange:()=>V("categories",l.value)}),e.jsx(bt,{htmlFor:`category-${l.value}`,className:"cursor-pointer text-sm font-normal",children:l.label})]},l.value)):e.jsx("div",{className:"text-sm text-muted-foreground",children:"No categories configured"})})]})})]}),e.jsx(Gl,{format:p,onChange:ue}),e.jsxs(Se,{children:[e.jsx(Te,{asChild:!0,children:e.jsxs(H,{variant:f.colors.length>0?"default":"outline",size:"icon",className:"relative h-9 w-9 transition-all hidden",children:[e.jsx("div",{className:"h-4 w-4 rounded-full bg-green-500 ring-2 ring-white"}),f.colors.length>0&&e.jsx("span",{className:"absolute -right-1 -top-1 flex h-4 w-4 items-center justify-center rounded-full bg-primary text-[10px] text-primary-foreground",children:f.colors.length})]})}),e.jsx(Pe,{className:"w-64 p-4",children:e.jsxs("div",{className:"space-y-3",children:[e.jsx("h4",{className:"text-sm font-medium",children:"Filter Status"}),e.jsx("div",{className:"grid grid-cols-2 gap-3",children:Da.map(l=>{const D=$e(l.value);return e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(jt,{id:`color-${l.value}`,checked:f.colors.includes(l.value),onCheckedChange:()=>V("colors",l.value)}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:`h-4 w-4 rounded-full border border-white shadow-sm ${D.bg}`}),e.jsx(bt,{htmlFor:`color-${l.value}`,className:"cursor-pointer text-sm font-normal",children:l.label})]})]},l.value)})})]})})]})]}),e.jsx("div",{className:"min-[768px]:max-[1024px]:hidden",children:e.jsx(ec,{mode:h,onChange:he})}),e.jsxs(H,{variant:f.search?"default":"outline",onClick:()=>y(!0),className:"h-9 gap-2 px-3 text-sm font-medium transition-all",children:[e.jsx(Oe,{className:"h-4 w-4"}),f.search&&e.jsx(me,{variant:"secondary",className:"ml-1 px-1.5 py-0",children:"1"})]}),e.jsx(H,{onClick:()=>M({date:new Date}),className:"h-9 gap-2 px-3 text-sm font-medium transition-all hidden",children:e.jsx(rt,{className:"lucide lucide-plus h-4 w-4"})}),e.jsx(lc,{})]})]}),Q>0&&e.jsxs("div",{className:"flex flex-wrap items-center gap-2 px-4 pb-2",children:[f.search&&e.jsxs(me,{variant:"outline",className:"h-6 gap-1 border-blue-200 bg-blue-50 px-2 text-blue-700",children:[e.jsx(Oe,{className:"h-3 w-3"}),e.jsxs("span",{className:"text-[10px]",children:['"',f.search,'"']}),e.jsx("button",{onClick:()=>B("search",""),className:"ml-1 rounded-full hover:bg-blue-200",children:e.jsx(Be,{className:"h-2.5 w-2.5"})})]}),f.categories.map(l=>e.jsxs(me,{variant:"outline",className:"h-6 gap-1 border-green-200 bg-green-50 px-2 text-green-700",children:[e.jsx(At,{className:"h-3 w-3"}),e.jsx("span",{className:"text-[10px]",children:r?.find(D=>D.value===l)?.label||l}),e.jsx("button",{onClick:()=>Z("categories",l),className:"ml-1 rounded-full hover:bg-green-200",children:e.jsx(Be,{className:"h-2.5 w-2.5"})})]},l)),f.colors.map(l=>e.jsxs(me,{variant:"outline",className:"h-6 gap-1 border-purple-200 bg-purple-50 px-2 text-purple-700",children:[e.jsx("div",{className:`h-2.5 w-2.5 rounded-full ${$e(l).bg}`}),e.jsx("span",{className:"text-[10px]",children:Da.find(D=>D.value===l)?.label||l}),e.jsx("button",{onClick:()=>Z("colors",l),className:"ml-1 rounded-full hover:bg-purple-200",children:e.jsx(Be,{className:"h-2.5 w-2.5"})})]},l))]})]}),e.jsx(mc,{open:w,onOpenChange:y,searchQuery:f.search,onSearchQueryChange:l=>B("search",l),onEventSelect:k,timeFormat:p})]})}function Ec({initialDate:t,events:a,users:n,selectedTechnicianId:s,onTechnicianChange:r,totalEvents:o,categoryOptions:i}){const{viewMode:u,currentView:m,daysCount:h}=ae(de(x=>({viewMode:x.viewMode,currentView:x.currentView,daysCount:x.daysCount}))),[g,p]=d.useState(t),c=d.useMemo(()=>{if(u==="list")return e.jsx(bl,{events:a,currentDate:g});switch(m){case"day":return e.jsx(Aa,{events:a,currentDate:g});case"days":return e.jsx(ql,{events:a,daysCount:h,currentDate:g});case"week":return e.jsx(Dl,{events:a,currentDate:g});case"month":return e.jsx(Yl,{events:a,baseDate:g});case"year":return e.jsx(Kl,{events:a,currentDate:g});default:return e.jsx(Aa,{events:a,currentDate:g})}},[m,h,a,g,u]);return e.jsxs(e.Fragment,{children:[e.jsx(Ll,{categoryOptions:i}),e.jsx(Bl,{}),e.jsx(Ql,{categoryOptions:i}),e.jsxs("div",{className:"bg-gray overflow-hidden rounded-xl border shadow-sm",children:[e.jsx(hc,{users:n,selectedTechnicianId:s,onTechnicianChange:r,totalEvents:o,categoryOptions:i,currentDate:g,onDateChange:p}),e.jsx("div",{className:"overflow-hidden p-0 bg-background",children:c})]})]})}export{Ec as E};
