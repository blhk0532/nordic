import{j as ae}from"./app-De-pmVM3.js";import{c as Ce,_ as c,w as T,x as a,aD as Ar,aE as He,j as Ut,aF as Vr,aG as qr,aw as Ze,D as Je,m as O,t as _,R as X,v as $,aH as Me,y as ge,z as jt,A as Gt,ax as Qe,V as et,H as v,I as L,G as de,F as qe,C as Ft,N as At,an as Vt,k as qt,ah as De,ao as Se,as as Xe,q as Xr,s as Xt,S as Yr,ae as Kr,ab as $r,B as M,L as I,ay as Zr,J as Y,$ as Jr,a0 as Qr,Z as tt,a1 as es,T as ts,aq as rs,ar as ss,af as rt,aI as ns,aJ as is,aK as os,aL as ls,aM as Pe,aN as as,g as Yt,Q as ds,U as Z,a5 as cs,a7 as me,a3 as us,ap as hs,a9 as fs,a2 as ee,ac as ps,Y as gs,aO as Fe,i as C,aP as Kt,aQ as st,aR as $t,aS as ms,aT as Ss,aU as nt,at as Zt,aV as Rs,aW as Cs,a as it,aX as ve,aY as vs,aZ as ys,al as ws,a_ as Jt,a$ as bs,b0 as Es,b1 as xs,b2 as Is,b3 as Hs,aj as Ds,b4 as Ee,b5 as Tt,b6 as he,b7 as Ae,a4 as Qt,b8 as er,aC as Ws,u as Ts,E as Ns,b as Ms,d as Ps,e as Os,h as zs}from"./event-calendar-views-CFG-p721.js";import{c as oe}from"./button-BdDmD3PX.js";const Bs="https://fullcalendar.io/docs/schedulerLicenseKey#invalid",ks="https://fullcalendar.io/docs/schedulerLicenseKey#outdated",Ls=["AGPL-My-Frontend-And-Backend-Are-Open-Source","CC-Attribution-NonCommercial-NoDerivatives"];function _s(r){const{options:e,pluginHooks:t}=r,s=e.schedulerLicenseKey,n=typeof window<"u"?window.location.href:"";if(!js(n)){const i=Us(s,t.premiumReleaseDate);let o,l;if(i==="outdated"?(o="Your license key is too old to work with this version.",l=ks):(o="Your license key is invalid.",l=Bs),i!=="valid")return c("div",{className:T(e.popoverClass,a.popoverZ,a.abs,a.noPadding),style:{bottom:0,left:0,minWidth:"auto"}},c("div",{style:{padding:"5px",fontSize:"12px",lineHeight:"1em"}},o," ",c("a",{href:l,target:"_blank",style:{textDecoration:"underline"}},"More info")))}return null}function Us(r,e){if(Ls.indexOf(r)!==-1)return"valid";const t=(r||"").match(/^(\d+)-fcs-(\d+)$/);if(t&&t[1].length===10){const s=new Date(parseInt(t[2],10)*1e3),n=He.mockSchedulerReleaseDate||e;if(Ar(n))return Ut(n,-372)<s?"valid":"outdated"}return"invalid"}function js(r){return/\w+:\/\/fullcalendar\.io\/|\/examples\/[\w-]+\.html$/.test(r)}const Gs={schedulerLicenseKey:String,virtualization:Boolean};var Oe=Ce({name:"@fullcalendar/premium-common",premiumReleaseDate:"2025-12-31",optionRefiners:Gs,viewContainerAppends:[_s]});let ce=[];function Fs(r){ce.length||As(),ce.push(r),r.calendarApi.on("_unmount",()=>{Vr(ce,r),ce.length||Vs()})}function As(){window.addEventListener("beforeprint",tr),window.addEventListener("afterprint",rr)}function Vs(){window.removeEventListener("beforeprint",tr),window.removeEventListener("afterprint",rr)}function tr(){for(let r of ce)r.emitter.trigger("_beforeprint")}function rr(){for(let r of ce)r.emitter.trigger("_afterprint")}var qs=Ce({name:"@fullcalendar/adaptive",premiumReleaseDate:"2025-12-31",deps:[Oe],contextInit:Fs});class Ie{constructor(e=!1){this.isHorizontal=e,this.emitter=new qr,this.scrollers=[],this.destroyFuncs=[],this.isPaused=!1}handleChildren(e){if(!Ze(this.scrollers,e)){this.destroy();for(const t of e)t&&(this.destroyFuncs.push(this.bindScroller(t)),this.scrollers.push(t))}}destroy(){for(let e of this.destroyFuncs)e();this.destroyFuncs=[],this.scrollers=[]}get x(){const{scrollers:e,masterScroller:t}=this;return(t||e[0]).x}get y(){const{scrollers:e,masterScroller:t}=this;return(t||e[0]).y}scrollTo(e){this.isPaused=!0;const{scrollers:t}=this;for(let s of t)s.scrollTo(e);this.isPaused=!1}addScrollListener(e){this.emitter.on("scroll",e)}removeScrollListener(e){this.emitter.off("scroll",e)}addScrollStartListener(e){this.emitter.on("scrollStart",e)}removeScrollStartListener(e){this.emitter.off("scrollStart",e)}addScrollEndListener(e){this.emitter.on("scrollEnd",e)}removeScrollEndListener(e){this.emitter.off("scrollEnd",e)}bindScroller(e){let{isHorizontal:t}=this;const s=i=>{if(!this.isPaused&&(this.masterScroller||this.emitter.trigger("scrollStart"),(!this.masterScroller||this.masterScroller!==e&&i)&&this.assignMaster(e),this.masterScroller===e)){for(let o of this.scrollers)o!==e&&(t?o.scrollTo({x:e.x}):o.scrollTo({y:e.y}));this.emitter.trigger("scroll",i,t?e.x:e.y)}},n=i=>{if(this.masterScroller===e){this.masterScroller=null;const{x:o,y:l}=this;let d=!1;this.isHorizontal?o!==this.prevX&&(this.prevX=o,d=!0):l!==this.prevY&&(this.prevY=l,d=!0),d&&this.emitter.trigger("scrollEnd",i)}};return e.listener.emitter.on("scroll",s),e.listener.emitter.on("scrollEnd",n),()=>{e.listener.emitter.off("scroll",s),e.listener.emitter.off("scrollEnd",n)}}assignMaster(e){this.masterScroller=e;for(let t of this.scrollers)t!==e&&t.endScroll()}}const Xs=18,We=6,Ys=200;He.MAX_TIMELINE_SLOTS=1e3;const Ye=[{years:1},{months:1},{days:1},{hours:1},{minutes:30},{minutes:15},{minutes:10},{minutes:5},{minutes:1},{seconds:30},{seconds:15},{seconds:10},{seconds:5},{seconds:1},{milliseconds:500},{milliseconds:100},{milliseconds:10},{milliseconds:1}];function sr(r,e,t,s){let n={labelInterval:t.slotHeaderInterval,slotDuration:t.slotDuration};$s(n,r,e),nr(n,r,e),Zs(n,r,e);let i=t.slotHeaderFormat,o=Array.isArray(i)?i:i!=null?[i]:Js(n,r,e,t);n.headerFormats=o.map(b=>qt(b)),n.isTimeScale=!!n.slotDuration.milliseconds;let l=null;if(!n.isTimeScale){const b=Me(n.slotDuration).unit;/year|month|week/.test(b)&&(l=b)}n.largeUnit=l;let d=t.snapDuration,u,h;d&&(u=De(d),h=Se(n.slotDuration,u)),h==null&&(u=n.slotDuration,h=1),n.snapDuration=u,n.snapsPerSlot=h;let p=Xe(r.slotMaxTime)-Xe(r.slotMinTime),f=Nt(r.renderRange.start,n,e),R=Nt(r.renderRange.end,n,e);n.isTimeScale&&(f=e.add(f,r.slotMinTime),R=e.add(Ut(R,-1),r.slotMaxTime)),n.timeWindowMs=p,n.normalizedRange={start:f,end:R};let g=[],S=[],m=f,y=Xr(r,e);for(;m<R;)Te(m,n,r,s)&&(g.push(m),S.push(Xt(m,y,e))),m=e.add(m,n.slotDuration);n.slotDates=g,n.slotDatesMajor=S;let w=-1,D=0;const x=[],E=[];for(m=f;m<R;)Te(m,n,r,s)?(w+=1,x.push(w),E.push(D)):x.push(w+.5),m=e.add(m,n.snapDuration),D+=1;return n.snapDiffToIndex=x,n.snapIndexToDiff=E,n.snapCnt=w+1,n.slotCnt=n.snapCnt/n.snapsPerSlot,n.cellRows=Qs(n,e,y),n.slotsPerLabel=Se(n.labelInterval,n.slotDuration),n}function Nt(r,e,t){let s=r;return e.isTimeScale||(s=rt(s),e.largeUnit&&(s=t.startOf(s,e.largeUnit))),s}function Ks(r,e,t){if(!e.isTimeScale&&(r=as(r),e.largeUnit)){let s=r;r={start:t.startOf(r.start,e.largeUnit),end:t.startOf(r.end,e.largeUnit)},(r.end.valueOf()!==s.end.valueOf()||r.end<=r.start)&&(r={start:r.start,end:t.add(r.end,e.slotDuration)})}return r}function Te(r,e,t,s){if(s.isHiddenDay(r))return!1;if(e.isTimeScale){let n=rt(r),o=r.valueOf()-n.valueOf()-Xe(t.slotMinTime);return o=(o%864e5+864e5)%864e5,o<e.timeWindowMs}return!0}function $s(r,e,t){const{currentRange:s}=e;if(r.labelInterval&&t.countDurationsBetween(s.start,s.end,r.labelInterval)>He.MAX_TIMELINE_SLOTS&&(console.warn("slotHeaderInterval results in too many cells"),r.labelInterval=null),r.slotDuration&&t.countDurationsBetween(s.start,s.end,r.slotDuration)>He.MAX_TIMELINE_SLOTS&&(console.warn("slotDuration results in too many cells"),r.slotDuration=null),r.labelInterval&&r.slotDuration){const n=Se(r.labelInterval,r.slotDuration);(n===null||n<1)&&(console.warn("slotHeaderInterval must be a multiple of slotDuration"),r.slotDuration=null)}}function nr(r,e,t){const{currentRange:s}=e;let{labelInterval:n}=r;if(!n){let i;if(r.slotDuration){for(i of Ye){const o=De(i),l=Se(o,r.slotDuration);if(l!==null&&l<=We){n=o;break}}n||(n=r.slotDuration)}else for(i of Ye)if(n=De(i),t.countDurationsBetween(s.start,s.end,n)>=Xs)break;r.labelInterval=n}return n}function Zs(r,e,t){const{currentRange:s}=e;let{slotDuration:n}=r;if(!n){const i=nr(r,e,t);for(let o of Ye){const l=De(o),d=Se(i,l);if(d!==null&&d>1&&d<=We){n=l;break}}n&&t.countDurationsBetween(s.start,s.end,n)>Ys&&(n=null),n||(n=i),r.slotDuration=n}return n}function Js(r,e,t,s){let n,i;const{labelInterval:o}=r,{currentRange:l}=e;let d=Me(o).unit;const u=s.weekNumbers;let h=n=i=null;switch(d==="week"&&!u&&(d="day"),d){case"year":h={year:"numeric"};break;case"month":t.diffWholeYears(l.start,l.end)>1&&(h={year:"numeric"}),n={month:"short"};break;case"week":t.diffWholeYears(l.start,l.end)>1&&(h={year:"numeric"}),n={week:"narrow"};break;case"day":t.diffWholeYears(l.start,l.end)>1?h={year:"numeric",month:"long"}:t.diffWholeMonths(l.start,l.end)>1&&(h={month:"long"}),u&&(n={week:"short"}),i={weekday:"narrow",day:"numeric"};break;case"hour":u&&(h={week:"short"}),os(l.start,l.end)>1&&(n={weekday:"short",day:"numeric",month:"numeric",omitCommas:!0}),i={hour:"numeric",minute:"2-digit",omitZeroMinute:!0,meridiem:"short"};break;case"minute":is(o)/60>=We?(h={hour:"numeric",meridiem:"short"},n=p=>":"+Fe(p.date.minute,2)):h={hour:"numeric",minute:"numeric",meridiem:"short"};break;case"second":ns(o)/60>=We?(h={hour:"numeric",minute:"2-digit",meridiem:"lowercase"},n=p=>":"+Fe(p.date.second,2)):h={hour:"numeric",minute:"2-digit",second:"2-digit",meridiem:"lowercase"};break;case"millisecond":h={hour:"numeric",minute:"2-digit",second:"2-digit",meridiem:"lowercase"},n=p=>"."+Fe(p.millisecond,3);break}return[].concat(h||[],n||[],i||[])}function Qs(r,e,t){let s=r.slotDates,n=r.headerFormats,i=n.map(()=>[]),o=ls(r.slotDuration),l=o===7?"week":o===1?"day":null,d=n.map(u=>u.getSmallestUnit?u.getSmallestUnit():null);for(let u=0;u<s.length;u+=1){let h=s[u];for(let p=0;p<n.length;p+=1){let f=n[p],R=i[p],g=R[R.length-1],S=p===n.length-1,m=n.length>1&&!S,y=Xt(h,t,e),w=null,D=d[p]||(S?l:null);if(m){let[x]=e.format(h,f);!g||g.text!==x?w=Mt(h,y,x,D):g.colspan+=1}else if(!g||Pe(e.countDurationsBetween(r.normalizedRange.start,h,r.labelInterval))){let[x]=e.format(h,f);w=Mt(h,y,x,D)}else g.colspan+=1;w&&R.push(w)}}return i}function Mt(r,e,t,s){return{date:r,isMajor:e,text:t,rowUnit:s,colspan:1}}class en extends M{constructor(){super(...arguments),this.getDateMeta=O(Yt)}render(){let{props:e,context:t}=this,{dateEnv:s,options:n}=t,{date:i,tDateProfile:o,isMajor:l}=e,d=this.getDateMeta(e.date,s,e.dateProfile,e.todayRange,e.nowDate),u=o.isTimeScale&&!Pe(s.countDurationsBetween(o.normalizedRange.start,e.date,o.labelInterval)),h=Object.assign(Object.assign({},d),{isMajor:l,isMinor:u,view:t.viewApi});return c(Z,{tag:"div",className:v(a.tight,a.alignStart,e.borderStart?a.borderOnlyS:a.borderNone,a.internalTimelineSlot),attrs:Object.assign({"data-date":s.formatIso(i,{omitTimeZoneOffset:!0,omitTime:!o.isTimeScale})},d.isToday?{"aria-current":"date"}:{}),style:{width:e.width},renderProps:h,generatorName:void 0,classNameGenerator:n.slotLaneClass,didMount:n.slotLaneDidMount,willUnmount:n.slotLaneWillUnmount})}}class ot extends M{render(){var e;let{props:t}=this,{tDateProfile:s,slotWidth:n,slatStartIndex:i,slatCount:o}=t,{slotDates:l,slotDatesMajor:d}=s;return i=t.slatStartIndex||0,(i||o!==void 0)&&(l=l.slice(i,i+o)),c("div",{"aria-hidden":!0,className:v(a.flexRow,a.fillY),style:{height:t.height,width:((e=t.slotWidth)!==null&&e!==void 0?e:0)*l.length,insetInlineStart:0}},l.map((u,h)=>{let p=u.toISOString();return c(en,{key:p,date:u,dateProfile:t.dateProfile,tDateProfile:s,nowDate:t.nowDate,todayRange:t.todayRange,isMajor:d[i+h],borderStart:!!(i+h),width:n})}))}}class tn extends M{constructor(){super(...arguments),this.getDateMeta=O(Yt),this.innerWrapperElRef=_()}render(){let{props:e,state:t,context:s}=this,{dateEnv:n,options:i}=s,{cell:o,dateProfile:l,tDateProfile:d}=e,u=this.getDateMeta(o.date,n,l,e.todayRange,e.nowDate),h=i.navLinks&&!u.isDisabled&&o.rowUnit&&o.rowUnit!=="time",p=d.isTimeScale&&!e.rowLevel,f=Object.assign(Object.assign({},u),{level:e.rowLevel,isMajor:o.isMajor,isMinor:!1,isNarrow:!1,isTime:p,hasNavLink:h,text:o.text,isFirst:e.isFirst,view:s.viewApi});const{slotHeaderAlign:R}=i,g=this.align=typeof R=="function"?R({level:e.rowLevel,isTime:p}):R,S=this.isSticky=e.rowLevel&&i.slotHeaderSticky!==!1;let m;return S&&(g==="center"?t.innerWidth!=null&&(m=`calc(50% - ${t.innerWidth/2}px)`):m=typeof i.slotHeaderSticky=="number"||typeof i.slotHeaderSticky=="string"?i.slotHeaderSticky:0),c(Z,{tag:"div",className:T(a.tight,a.flexCol,e.isFirst?a.borderNone:a.borderOnlyS,g==="center"?a.alignCenter:g==="end"?a.alignEnd:a.alignStart,a.internalTimelineSlot),attrs:Object.assign({"data-date":n.formatIso(o.date,{omitTime:!d.isTimeScale,omitTimeZoneOffset:!0})},u.isToday?{"aria-current":"date"}:{}),style:{width:e.slotWidth!=null?e.slotWidth*o.colspan:void 0},renderProps:f,generatorName:"slotHeaderContent",customGenerator:i.slotHeaderContent,defaultGenerator:rn,classNameGenerator:i.slotHeaderClass,didMount:i.slotHeaderDidMount,willUnmount:i.slotHeaderWillUnmount},y=>c("div",{ref:this.innerWrapperElRef,className:v(a.flexCol,a.rigid,S&&a.sticky),style:{left:m,right:m}},c(y,{tag:"div",attrs:h?ds(s,o.date,o.rowUnit,void 0,!1):{},className:L(i.slotHeaderInnerClass,f)})))}componentDidMount(){const{props:e}=this,t=this.innerWrapperElRef.current;this.disconnectSize=cs(t,(s,n)=>{I(e.innerWidthRef,s),I(e.innerHeightRef,n),this.align==="center"&&this.isSticky&&this.setState({innerWidth:s})})}componentWillUnmount(){const{props:e}=this;this.disconnectSize(),I(e.innerWidthRef,null),I(e.innerHeightRef,null)}}function rn(r){return r.text}class lt extends M{constructor(){super(...arguments),this.innerWidthRefMap=new X(()=>{$(this.handleInnerWidths)}),this.innerHeightRefMap=new X(()=>{$(this.handleInnerHeights)}),this.handleInnerWidths=()=>{const e=this.innerWidthRefMap.current;let t=0;for(const s of e.values())t=Math.max(t,s);I(this.props.innerWidthRef,t)},this.handleInnerHeights=()=>{const e=this.innerHeightRefMap.current;let t=0;for(const s of e.values())t=Math.max(t,s);I(this.props.innerHeighRef,t),this.setState({innerHeight:t})}}render(){const{props:e,innerWidthRefMap:t,innerHeightRefMap:s,state:n,context:i}=this,{options:o}=i;let{cells:l,cellStartIndex:d,cellCount:u}=e;return d=d||0,(d||u!==void 0)&&(l=l.slice(d,d+u)),c("div",{className:T(e.className,o.slotHeaderRowClass,a.flexRow,a.grow,e.rowLevel?a.borderOnlyB:a.borderNone),style:{insetInlineStart:e.insetInlineStart,width:e.width,height:n.innerHeight}},l.map((h,p)=>{const f=h.rowUnit+":"+h.date.toISOString();return c(tn,{key:f,cell:h,rowLevel:e.rowLevel,dateProfile:e.dateProfile,tDateProfile:e.tDateProfile,todayRange:e.todayRange,nowDate:e.nowDate,isFirst:d+p===0,innerWidthRef:t.createRef(f),innerHeightRef:s.createRef(f),slotWidth:e.slotWidth})}))}componentWillUnmount(){I(this.props.innerWidthRef,null),I(this.props.innerHeighRef,null)}}const sn=30;function ir(r,e,t,s,n){if(s==null||n==null)return[void 0,void 0,!1];t=Math.max(t||0,(s+1)/e,sn);const i=n/r;let o,l;return i>=t?(o=!0,l=i):(o=!1,l=Math.max(t,i)),[l*r,l,o]}function or(r,e,t,s,n){let i=e.add(t.activeRange.start,r);return s.isTimeScale||(i=rt(i)),Re(i,e,s,n)}function Re(r,e,t,s){return nn(r,t,e)/t.snapsPerSlot*s}function nn(r,e,t){let s=t.countDurationsBetween(e.normalizedRange.start,r,e.snapDuration);if(s<0)return 0;if(s>=e.snapDiffToIndex.length)return e.snapCnt;let n=Math.floor(s),i=e.snapDiffToIndex[n];return Pe(i)?i+=s-n:i=Math.ceil(i),i}class at extends M{render(){const{props:e,context:t}=this,s=e.slotWidth==null?{}:{insetInlineStart:Re(e.nowDate,t.dateEnv,e.tDateProfile,e.slotWidth)};return c("div",{className:a.fill,style:{zIndex:2,pointerEvents:"none"}},c(ss,{className:v(a.fillY,a.noMarginY,a.borderlessY),style:s,date:e.nowDate}),c("div",{className:v(a.flexCol,a.fillY),style:s},c("div",{className:a.stickyT},c(rs,null))))}}class dt extends M{render(){const{props:e,context:t}=this,s=e.slotWidth==null?{}:{insetInlineStart:Re(e.nowDate,t.dateEnv,e.tDateProfile,e.slotWidth)};return c("div",{className:v(a.fill,a.crop),style:{zIndex:2,pointerEvents:"none"}},c(Zr,{className:a.abs,style:s,date:e.nowDate}))}}function lr(r,e){return r.querySelectorAll(`.${a.internalTimelineSlot}`)[e]}function Pt(r,e,t){let s=t.countDurationsBetween(e.normalizedRange.start,r,e.snapDuration);if(s<0)return 0;if(s>=e.snapDiffToIndex.length)return e.snapCnt;let n=Math.floor(s),i=e.snapDiffToIndex[n];return Pe(i)?i+=s-n:i=Math.ceil(i),i}class ct extends Yr{sliceRange(e,t,s,n,i){let o=Ks(e,n,i),l=[];if(Pt(o.start,n,i)<Pt(o.end,n,i)){let d=Kr(o,n.normalizedRange);d&&l.push({startDate:d.start,endDate:d.end,isStart:d.start.valueOf()===o.start.valueOf()&&Te(d.start,n,t,s),isEnd:d.end.valueOf()===o.end.valueOf()&&Te($r(d.end,-1),n,t,s)})}return l}}const on=qt({hour:"numeric",minute:"2-digit",omitZeroMinute:!0,meridiem:"narrow"});class ar extends M{render(){let{props:e}=this;return c(gs,Object.assign({},e,{display:"row",defaultTimeFormat:on,defaultDisplayEventTime:!e.isTimeScale}))}}class ln extends M{render(){let{props:e}=this,{hiddenSegs:t,resourceId:s}=e,n=s?{resourceId:s}:{};return c(ps,{display:"row",allDayDate:null,segs:t,hiddenSegs:t,dateProfile:e.dateProfile,todayRange:e.todayRange,dateSpanProps:n,isNarrow:!1,isMicro:!1,popoverContent:()=>c(Y,null,t.map(i=>{let{eventRange:o}=i,{instanceId:l}=o.instance,d=!!(e.eventDrag&&e.eventDrag.affectedInstances[l]),u=!!(e.eventResize&&e.eventResize.affectedInstances[l]);return c("div",{key:l,style:{visibility:d||u?"hidden":void 0}},c(ar,Object.assign({isTimeScale:e.isTimeScale,eventRange:o,isStart:i.isStart,isEnd:i.isEnd,isDragging:d,isResizing:u,isMirror:!1,isSelected:l===e.eventSelection},tt(o,e.todayRange,e.nowDate))))}))})}}function Ot(r,e,t,s,n,i=0,o=1/0){const l={};for(const d of r){const u=dr(d,e,t,s,n,i,o);u&&(l[me(d)]=u)}return l}function dr(r,e,t,s,n,i=0,o=1/0){let l=Re(r.startDate,t,s,n),d=Re(r.endDate,t,s,n);if(l=Math.max(l,i),d=Math.min(d,o),l<d){let u=d-l;return e&&(u=Math.max(u,e)),{start:l-i,size:u}}}function an(r,e,t,s,n,i){const o=[];for(const R of r){const g=e[me(R)];g&&o.push(Object.assign(Object.assign({},R),{start:g.start,end:g.start+g.size}))}const l=new us(o,R=>t.get(me(R)),n,void 0,i),d=new Map;l.traverseSegs((R,g)=>{d.set(me(R),g)});const{hiddenSegs:u}=l;let h=0;for(const R of o){const g=me(R),S=t.get(g),m=d.get(g);S!=null&&m!=null&&(h=Math.max(h,m+S))}const p=hs(u),f=new Map;l.strictOrder=!0;for(const R of p){const{levelCoord:g}=l.findInsertion(R,0),S=s.get(R.key)||0;f.set(R.key,g),h=Math.max(h,g+S)}return[d,p,f,h]}class zt extends fs{constructor(){super(...arguments),this.rootElRef=_()}render(){const{props:e}=this;return c("div",{className:a.abs,style:e.style,ref:this.rootElRef},e.children)}componentDidMount(){const e=this.rootElRef.current;this.disconnectHeight=ee(e,t=>{I(this.props.heightRef,t)})}componentWillUnmount(){this.disconnectHeight(),I(this.props.heightRef,null)}}class cr extends M{constructor(){super(...arguments),this.sortEventSegs=O(ts),this.segHeightRefMap=new X(()=>{$(this.handleSegHeights)}),this.moreLinkHeightRefMap=new X(()=>{$(this.handleMoreLinkHeights)}),this.handleMoreLinkHeights=()=>{this.setState({moreLinkHeightRev:this.moreLinkHeightRefMap.rev})},this.handleSegHeights=()=>{this.setState({segHeightRev:this.segHeightRefMap.rev})}}render(){let{props:e,context:t,segHeightRefMap:s,moreLinkHeightRefMap:n}=this,{options:i}=t,{tDateProfile:o}=e,l=(e.eventDrag?e.eventDrag.segs:null)||(e.eventResize?e.eventResize.segs:null)||[],d=this.sortEventSegs(e.fgEventSegs,i.eventOrder),u=e.slotWidth!=null?Ot(d,i.eventMinWidth,t.dateEnv,o,e.slotWidth,e.clipStart,e.clipEnd):{},[h,p,f,R]=an(d,u,s.current,n.current,i.eventOrderStrict,i.eventMaxStack);return this.totalHeight=R,c("div",{className:v(a.rel,a.noShrink),style:{height:R}},this.renderFgSegs(d,u,h,p,f,!1),this.renderFgSegs(l,e.slotWidth?Ot(l,i.eventMinWidth,t.dateEnv,o,e.slotWidth):{},h,[],new Map,!0))}renderFgSegs(e,t,s,n,i,o){const{props:l,segHeightRefMap:d,moreLinkHeightRefMap:u}=this;return c(Y,null,e.map(h=>{const{eventRange:p}=h,{instanceId:f}=p.instance,R=s.get(f),g=t[f],S=g||{},m=!!(l.eventDrag&&l.eventDrag.affectedInstances[f]),y=!!(l.eventResize&&l.eventResize.affectedInstances[f]),w=!o&&(m||y||!g||R==null);return c(zt,{key:f,style:{visibility:w?"hidden":void 0,zIndex:1,top:R||0,insetInlineStart:S.start,width:S.size},heightRef:o?void 0:d.createRef(f)},c(ar,Object.assign({isTimeScale:l.tDateProfile.isTimeScale,eventRange:p,isStart:h.isStart,isEnd:h.isEnd,isDragging:m,isResizing:y,isMirror:o,isSelected:f===l.eventSelection},tt(p,l.todayRange,l.nowDate))))}),n.map(h=>c(zt,{key:h.key,style:{top:i.get(h.key)||0,insetInlineStart:h.start,width:h.end-h.start},heightRef:u.createRef(h.key)},c(ln,{hiddenSegs:h.segs,dateProfile:l.dateProfile,nowDate:l.nowDate,todayRange:l.todayRange,isTimeScale:l.tDateProfile.isTimeScale,eventDrag:l.eventDrag,eventResize:l.eventResize,eventSelection:l.eventSelection,resourceId:l.resourceId}))))}componentDidUpdate(){this.totalHeight!==this.firedTotalHeight&&(this.firedTotalHeight=this.totalHeight,I(this.props.heightRef,this.totalHeight))}componentWillUnmount(){I(this.props.heightRef,null)}}class ze extends M{render(){let{props:e}=this,t=[].concat(e.eventResizeSegs||[],e.dateSelectionSegs);return c(Y,null,this.renderSegs(e.businessHourSegs||[],"non-business"),this.renderSegs(e.bgEventSegs||[],"bg-event"),this.renderSegs(t,"highlight"))}renderSegs(e,t){var s,n;const{props:i,context:o}=this,{dateEnv:l,options:d}=o,{tDateProfile:u,todayRange:h,nowDate:p,slotWidth:f}=i,R=(s=i.clipStart)!==null&&s!==void 0?s:0,g=(n=i.clipEnd)!==null&&n!==void 0?n:1/0;return c(Y,null,e.map(S=>{let{start:m,size:y}=dr(S,void 0,l,u,f),w=m+y;if(m=Math.max(m,R),w=Math.min(w,g),m<w)return c("div",{key:Jr(S.eventRange),className:a.fillY,style:{insetInlineStart:m-R,width:w-m}},t==="bg-event"?c(Qr,Object.assign({eventRange:S.eventRange,isStart:S.isStart,isEnd:S.isEnd,isVertical:!1},tt(S.eventRange,h,p))):es(t,d))}))}}class dn extends Je{constructor(){super(...arguments),this.buildTimelineDateProfile=O(sr),this.computeSlotWidth=O(ir),this.headerScrollerRef=_(),this.bodyScrollerRef=_(),this.footerScrollerRef=_(),this.headerRowInnerWidthMap=new X(()=>{$(this.handleSlotInnerWidths)}),this.scrollTime=null,this.slicer=new ct,this.handleSlotInnerWidths=()=>{const e=this.headerRowInnerWidthMap.current.get(this.tDateProfile.cellRows.length-1);e!=null&&e!==this.state.slotInnerWidth&&this.setState({slotInnerWidth:e})},this.handleTotalWidth=e=>{this.setState({totalWidth:e})},this.handleClientWidth=e=>{this.setState({clientWidth:e})},this.handleTimeScrollRequest=e=>{this.scrollTime=e,this.applyTimeScroll()},this.handleTimeScrollEnd=e=>{e&&(this.scrollTime=null)},this.handeBodyEl=e=>{this.bodyEl=e,e?this.context.registerInteractiveComponent(this,{el:e}):this.context.unregisterInteractiveComponent(this)}}render(){const{props:e,state:t,context:s}=this,{options:n}=s,{totalWidth:i,clientWidth:o}=t,l=i!=null&&o!=null?i-o:void 0,d=this.tDateProfile=this.buildTimelineDateProfile(e.dateProfile,s.dateEnv,n,s.dateProfileGenerator),{cellRows:u}=d,h=Me(d.slotDuration).unit,p=!e.forPrint&&!ge(n),f=!e.forPrint&&jt(n),R=!e.forPrint&&Gt(n),[g,S]=this.computeSlotWidth(d.slotCnt,d.slotsPerLabel,n.slotMinWidth,t.slotInnerWidth,o);this.slotWidth=S;let m=this.slicer.sliceProps(e,e.dateProfile,d.isTimeScale?null:n.nextDayThreshold,s,e.dateProfile,s.dateProfileGenerator,d,s.dateEnv);return c(At,{unit:h},(y,w)=>{const D=n.nowIndicator&&S!=null&&Qe(e.dateProfile.currentRange,y);return c(et,{viewSpec:s.viewSpec,className:T(!e.forPrint&&a.flexCol,e.className,n.tableClass,a.isolate),borderlessX:e.borderlessX,borderlessTop:e.borderlessTop,borderlessBottom:e.borderlessBottom,noEdgeEffects:e.noEdgeEffects},c("div",{className:v(L(n.tableHeaderClass,{isSticky:f}),e.borderlessX&&a.borderlessX,a.flexCol,f&&a.tableHeaderSticky),style:{zIndex:1}},c(de,{horizontal:!0,hideScrollbars:!0,className:a.flexRow,ref:this.headerScrollerRef},c("div",{className:v(a.rel,g==null&&a.liquid),style:{width:g}},u.map((x,E)=>{const b=u.length-E-1;return c(lt,{key:E,dateProfile:e.dateProfile,tDateProfile:d,nowDate:y,todayRange:w,rowLevel:b,cells:x,slotWidth:S,innerWidthRef:this.headerRowInnerWidthMap.createRef(E)})}),D&&c(dt,{tDateProfile:d,nowDate:y,slotWidth:S})),!!l&&c("div",{className:T(L(n.fillerClass,{isHeader:!0}),a.borderOnlyS),style:{minWidth:l}})),c("div",{className:L(n.slotHeaderDividerClass,{isHeader:!0,options:{dayMinWidth:n.dayMinWidth}})})),c(de,{vertical:p,horizontal:!0,hideScrollbars:R||e.forPrint,className:T(n.tableBodyClass,e.borderlessX&&a.borderlessX,f&&a.borderlessTop,(f||e.noEdgeEffects)&&a.noEdgeEffects,a.flexCol,p&&a.liquid),style:{zIndex:0},ref:this.bodyScrollerRef,clientWidthRef:this.handleClientWidth},c("div",{"aria-label":n.eventsHint,className:v(a.rel,a.grow),style:{width:g},ref:this.handeBodyEl},c(ot,{dateProfile:e.dateProfile,tDateProfile:d,nowDate:y,todayRange:w,slotWidth:S}),c(ze,{tDateProfile:d,nowDate:y,todayRange:w,bgEventSegs:m.bgEventSegs,businessHourSegs:m.businessHourSegs,dateSelectionSegs:m.dateSelectionSegs,eventResizeSegs:m.eventResize?m.eventResize.segs:null,slotWidth:S}),c("div",{className:T(n.timelineTopClass)}),c(cr,{dateProfile:e.dateProfile,tDateProfile:d,nowDate:y,todayRange:w,fgEventSegs:m.fgEventSegs,eventDrag:m.eventDrag,eventResize:m.eventResize,eventSelection:m.eventSelection,slotWidth:S}),c("div",{className:T(n.timelineBottomClass)}),D&&c(at,{tDateProfile:d,nowDate:y,slotWidth:S}))),!!R&&c(qe,{isSticky:!0,canvasWidth:g,scrollerRef:this.footerScrollerRef}),c(Ft,{widthRef:this.handleTotalWidth}))})}componentDidMount(){this.syncedScroller=new Ie(!0),this.updateSyncedScroller(),this.resetScroll(),this.context.emitter.on("_timeScrollRequest",this.handleTimeScrollRequest),this.syncedScroller.addScrollEndListener(this.handleTimeScrollEnd)}componentDidUpdate(e){this.updateSyncedScroller(),e.dateProfile!==this.props.dateProfile&&this.context.options.scrollTimeReset?this.resetScroll():this.applyTimeScroll()}componentWillUnmount(){this.syncedScroller.destroy(),this.context.emitter.off("_timeScrollRequest",this.handleTimeScrollRequest),this.syncedScroller.removeScrollEndListener(this.handleTimeScrollEnd)}updateSyncedScroller(){this.syncedScroller.handleChildren([this.headerScrollerRef.current,this.bodyScrollerRef.current,this.footerScrollerRef.current])}resetScroll(){this.handleTimeScrollRequest(this.context.options.scrollTime)}applyTimeScroll(){const{props:e,context:t,tDateProfile:s,scrollTime:n,slotWidth:i}=this;if(n!=null&&i!=null){let o=or(n,t.dateEnv,e.dateProfile,s,i);o&&(o+=1),this.syncedScroller.scrollTo({x:o})}}queryHit(e,t,s,n,i){const{props:o,context:l,tDateProfile:d,slotWidth:u}=this,{dateEnv:h}=l;if(u){const p=e?n-t:t,f=Math.floor(p/u),R=f*u,g=(p-R)/u,S=Math.floor(g*d.snapsPerSlot);let m=h.add(d.slotDates[f],Vt(d.snapDuration,S)),y=h.add(m,d.snapDuration),w=u/d.snapsPerSlot,D=f*u+w*S,x=D+w,E,b;return e?(E=n-x,b=n-D):(E=D,b=x),{dateProfile:o.dateProfile,dateSpan:{range:{start:m,end:y},allDay:!d.isTimeScale},rect:{left:E,right:b,top:0,bottom:i},getDayEl:()=>lr(this.bodyEl,f),layer:0}}return null}}const cn={timelineTopClass:C,timelineBottomClass:C};var un=Ce({name:"@fullcalendar/timeline",premiumReleaseDate:"2025-12-31",deps:[Oe],initialView:"timelineDay",optionRefiners:cn,views:{timeline:{component:dn,usesMinMaxTime:!0,eventResizableFromStart:!0},timelineDay:{type:"timeline",duration:{days:1}},timelineWeek:{type:"timeline",duration:{weeks:1}},timelineMonth:{type:"timeline",duration:{months:1}},timelineYear:{type:"timeline",duration:{years:1}}}});const ur="_fc:",hn={id:String,parentId:String,children:C,title:String,businessHours:C,extendedProps:C,eventEditable:Boolean,eventStartEditable:Boolean,eventDurationEditable:Boolean,eventConstraint:C,eventOverlap:Boolean,eventAllow:C,eventClass:C,eventColor:String,eventContrastColor:String};function ut(r,e="",t,s){let{refined:n,extra:i}=$t(r,hn),o={id:n.id||ur+nt(),parentId:n.parentId||e,title:n.title||"",businessHours:n.businessHours?Ss(n.businessHours,s):null,ui:ms({editable:n.eventEditable,startEditable:n.eventStartEditable,durationEditable:n.eventDurationEditable,constraint:n.eventConstraint,overlap:n.eventOverlap,allow:n.eventAllow,className:n.eventClass,color:n.eventColor,contrastColor:n.eventContrastColor},s),extendedProps:Object.assign(Object.assign({},i),n.extendedProps)};if(Object.freeze(o.ui.className),Object.freeze(o.extendedProps),!t[o.id]){if(t[o.id]=o,n.children)for(let l of n.children)ut(l,o.id,t,s)}return o}function hr(r){return r.indexOf(ur)===0?"":r}class q{constructor(e,t){this._context=e,this._resource=t}setProp(e,t){let s=this._resource;this._context.dispatch({type:"SET_RESOURCE_PROP",resourceId:s.id,propName:e,propValue:t}),this.sync(s)}setExtendedProp(e,t){let s=this._resource;this._context.dispatch({type:"SET_RESOURCE_EXTENDED_PROP",resourceId:s.id,propName:e,propValue:t}),this.sync(s)}sync(e){let t=this._context,s=e.id;this._resource=t.getCurrentData().resourceStore[s],t.emitter.trigger("resourceChange",{oldResource:new q(t,e),resource:this,revert(){t.dispatch({type:"ADD_RESOURCE",resourceHash:{[s]:e}})}})}remove(){let e=this._context,t=this._resource,s=t.id;e.dispatch({type:"REMOVE_RESOURCE",resourceId:s}),e.emitter.trigger("resourceRemove",{resource:this,revert(){e.dispatch({type:"ADD_RESOURCE",resourceHash:{[s]:t}})}})}getParent(){let e=this._context,t=this._resource.parentId;return t?new q(e,e.getCurrentData().resourceStore[t]):null}getChildren(){let e=this._resource.id,t=this._context,{resourceStore:s}=t.getCurrentData(),n=[];for(let i in s)s[i].parentId===e&&n.push(new q(t,s[i]));return n}getEvents(){let e=this._resource.id,t=this._context,{defs:s,instances:n}=t.getCurrentData().eventStore,i=[];for(let o in n){let l=n[o],d=s[l.defId];d.resourceIds.indexOf(e)!==-1&&i.push(new st(t,d,l))}return i}get id(){return hr(this._resource.id)}get title(){return this._resource.title}get eventConstraint(){return this._resource.ui.constraints[0]||null}get eventOverlap(){return this._resource.ui.overlap}get eventAllow(){return this._resource.ui.allows[0]||null}get eventColor(){return this._resource.ui.color}get eventContrastColor(){return this._resource.ui.contrastColor}get eventClass(){return this._resource.ui.className}get extendedProps(){return this._resource.extendedProps}toPlainObject(e={}){let t=this._resource,{ui:s}=t,n=this.id,i={};return n&&(i.id=n),t.title&&(i.title=t.title),s.contrastColor&&(i.eventContrastColor=s.contrastColor),s.contrastColor&&(i.eventContrastColor=s.contrastColor),s.className&&(i.eventClass=s.className),Object.keys(t.extendedProps).length&&(e.collapseExtendedProps?Object.assign(i,t.extendedProps):i.extendedProps=t.extendedProps),i}toJSON(){return this.toPlainObject()}}function fn(r,e){let t=[];for(let s in r)t.push(new q(e,r[s]));return t}class fr extends Zt{getKeyInfo(e){return Object.assign({"":{}},e.resourceStore)}getKeysForDateSpan(e){return[e.resourceId||""]}getKeysForEventDef(e){let t=e.resourceIds;return t.length?t:[""]}}const pn=Kt("id,title");function gn(r,e){let{emitter:t}=e;t.hasHandlers("resourcesSet")&&t.trigger("resourcesSet",fn(r,e))}class mn{constructor(e){let t={},s=[];for(let n=0;n<e.length;n+=1){let i=e[n].id;s.push(i),t[i]=n}this.ids=s,this.indicesById=t,this.length=e.length}}class pr{constructor(e,t,s,n){this.dayTableModel=e,this.resources=t,this.rowCount=s,this.colCount=n,this.resourceIndex=new mn(t),this.cells=this.buildCells()}}class eo extends pr{constructor(e){super(e,[],e.rowCount,e.colCount)}computeCol(e,t){return e}computeColRanges(e,t,s){return[{start:e,end:t,isStart:!0,isEnd:!0}]}buildCells(){return this.dayTableModel.buildCells()}}class gr extends pr{constructor(e,t,s){super(e,t,e.rowCount,e.colCount*t.length),this.context=s}buildCells(){let{rowCount:e,dayTableModel:t,resources:s}=this,n=[],i=s.length>1&&t.colCount>1;for(let o=0;o<e;o+=1){let l=[];for(let d=0;d<t.colCount;d+=1)for(let u=0;u<s.length;u+=1){let h=s[u],p=t.cellRows[o][d].date,f={resource:new q(this.context,h)},R={"data-resource-id":h.id},g={resourceId:h.id},S=this.computeCol(d,u);l[S]={key:h.id+":"+p.toISOString(),date:p,isMajor:i&&this.colIsMajor(S),renderProps:f,attrs:R,className:"",dateSpanProps:g}}n.push(l)}return n}}class to extends gr{computeCol(e,t){return t*this.dayTableModel.colCount+e}colIsMajor(e){const t=this.dayTableModel.colCount;return t>1&&!(e%t)}computeColRanges(e,t,s){return[{start:this.computeCol(e,s),end:this.computeCol(t,s),isStart:!0,isEnd:!0}]}}class ro extends gr{computeCol(e,t){return e*this.resources.length+t}colIsMajor(e){const t=this.resources.length;return t>1&&!(e%t)}computeColRanges(e,t,s){let n=[];for(let i=e;i<t;i+=1){let o=this.computeCol(i,s);n.push({start:o,end:o+1,isStart:i===e,isEnd:i===t-1})}return n}}const Bt=[];class so{constructor(){this.joinDateSelection=O(this.joinSegs),this.joinBusinessHours=O(this.joinSegs),this.joinFgEvents=O(this.joinSegs),this.joinBgEvents=O(this.joinSegs),this.joinEventDrags=O(this.joinInteractions),this.joinEventResizes=O(this.joinInteractions)}joinProps(e,t){let s=[],n=[],i=[],o=[],l=[],d=[],u="",h=t.resourceIndex.ids.concat([""]);for(let p of h){let f=e[p];s.push(f.dateSelectionSegs),n.push(p?f.businessHourSegs:Bt),i.push(p?f.fgEventSegs:Bt),o.push(f.bgEventSegs),l.push(f.eventDrag),d.push(f.eventResize),u=u||f.eventSelection}return{dateSelectionSegs:this.joinDateSelection(t,...s),businessHourSegs:this.joinBusinessHours(t,...n),fgEventSegs:this.joinFgEvents(t,...i),bgEventSegs:this.joinBgEvents(t,...o),eventDrag:this.joinEventDrags(t,...l),eventResize:this.joinEventResizes(t,...d),eventSelection:u}}joinSegs(e,...t){let s=e.resources.length,n=[];for(let i=0;i<s;i+=1){for(let o of t[i])n.push(...this.transformSeg(o,e,i));for(let o of t[s])n.push(...this.transformSeg(o,e,i))}return n}expandSegs(e,t){let s=e.resources.length,n=[];for(let i=0;i<s;i+=1)for(let o of t)n.push(...this.transformSeg(o,e,i));return n}joinInteractions(e,...t){let s=e.resources.length,n={},i=[],o=!1,l=!1;for(let d=0;d<s;d+=1){let u=t[d];if(u){o=!0;for(let h of u.segs)i.push(...this.transformSeg(h,e,d));Object.assign(n,u.affectedInstances),l=l||u.isEvent}if(t[s])for(let h of t[s].segs)i.push(...this.transformSeg(h,e,d))}return o?{affectedInstances:n,segs:i,isEvent:l}:null}}class no extends Zt{getKeyInfo(e){let{resourceDayTableModel:t}=e,s=it(t.resourceIndex.indicesById,n=>t.resources[n]);return s[""]={},s}getKeysForDateSpan(e){return[e.resourceId||""]}getKeysForEventDef(e){let t=e.resourceIds;return t.length?t:[""]}}function mr(r,e,t=[],s=0){const n=Sn(r,e),i=[];for(let o in n){let l=n[o];l.entity.parentId||Sr(l,e,t,s,i)}return i}function Sn(r,e){let t={};for(let s in r){let n=r[s];t[s]={entity:n,resourceFields:Cn(n),children:[]}}for(let s in r){let n=r[s];if(n.parentId){let i=t[n.parentId];i&&Rr(t[s],e,i.children)}}return t}function Sr(r,e,t,s,n){if(t.length){let i=Rn(r,t[0],s<=0,n);Sr(r,e,t.slice(1),s-1,i.children)}else Rr(r,e,n)}function Rn(r,e,t,s){let n=r.resourceFields[e.field],i,o;if(e.order)for(o=0;o<s.length;o+=1){let l=s[o],d=l.entity,u=Cs(n,d.value)*e.order;if(u===0){i=l;break}else if(u<0)break}else for(o=0;o<s.length;o+=1){let l=s[o],d=l.entity;if(d&&n===d.value){i=l;break}}return i||(i={entity:{value:n,spec:e},pooledHeight:t,children:[]},s.splice(o,0,i)),i}function Rr(r,e,t){let s;for(s=0;s<t.length&&!(Rs(t[s].resourceFields,r.resourceFields,e)>0);s+=1);t.splice(s,0,r)}function Cn(r){let e=Object.assign(Object.assign(Object.assign({},r.extendedProps),r.ui),r);return delete e.ui,delete e.extendedProps,e}function io(r,e){const t=mr(r,e),s=[];return Cr(t,s),s}function Cr(r,e){for(const t of r)e.push(t.entity),Cr(t.children,e)}function fe(r){return vr(r)?re(r):r.id}function re(r){return r.spec.field+":"+r.value}function vr(r){return!!r.spec}function vn(r,e){return r.spec===e.spec&&r.value===e.value}function yn(r,e,t){let s=e.dateSpan.resourceId,n=t.dateSpan.resourceId;s&&n&&s!==n&&(r.resourceMutation={matchResourceId:s,setResourceId:n})}function wn(r,e,t){let s=e.resourceMutation;if(s&&yr(r,t)){let n=r.resourceIds.indexOf(s.matchResourceId);if(n!==-1){let i=r.resourceIds.slice();i.splice(n,1),i.indexOf(s.setResourceId)===-1&&i.push(s.setResourceId),r.resourceIds=i}}}function yr(r,e){let{resourceEditable:t}=r;if(t==null){let s=r.sourceId&&e.getCurrentData().eventSources[r.sourceId];s&&(t=s.extendedProps.resourceEditable),t==null&&(t=e.options.eventResourceEditable,t==null&&(t=e.options.editable))}return t}function bn(r,e){let{resourceMutation:t}=r;if(t){let{calendarApi:s}=e;return{oldResource:s.getResourceById(t.matchResourceId),newResource:s.getResourceById(t.setResourceId)}}return{oldResource:null,newResource:null}}class En{constructor(){this.filterResources=O(xn)}transform(e,t){return t.viewSpec.optionDefaults.needsResourceData?{resourceStore:this.filterResources(t.resourceStore,t.options.filterResourcesWithEvents,t.eventStore,t.dateProfile.activeRange),resourceEntityExpansions:t.resourceEntityExpansions}:null}}function xn(r,e,t,s){if(e){let n=In(t.instances,s),i=Hn(n,t.defs);return Object.assign(i,Dn(i,r)),Jt(r,(o,l)=>i[l])}return r}function In(r,e){return Jt(r,t=>bs(t.range,e))}function Hn(r,e){let t={};for(let s in r){let n=r[s];for(let i of e[n.defId].resourceIds)t[i]=!0}return t}function Dn(r,e){let t={};for(let s in r){let n;for(;(n=e[s])&&(s=n.parentId,s);)t[s]=!0}return t}function Wn(r,e,t,s){if(!r){let n=s.getCurrentData();if(n.viewSpecs[n.currentViewType].optionDefaults.needsResourceData&&yr(e,s))return!0}return r}class Tn{constructor(){this.buildResourceEventUis=O(Nn,ws),this.injectResourceEventUis=O(Mn)}transform(e,t){return t.viewSpec.optionDefaults.needsResourceData?null:{eventUiBases:this.injectResourceEventUis(e.eventUiBases,e.eventStore.defs,this.buildResourceEventUis(t.resourceStore))}}}function Nn(r){return it(r,e=>e.ui)}function Mn(r,e,t){return it(r,(s,n)=>n?Pn(s,e[n],t):s)}function Pn(r,e,t){let s=[];for(let n of e.resourceIds)t[n]&&s.unshift(t[n]);return s.unshift(r),Es(s)}let ht=[];function ft(r){ht.push(r)}function wr(r){return ht[r]}function On(){return ht}const zn={id:String,resources:C,url:String,method:String,startParam:String,endParam:String,timeZoneParam:String,extraParams:C};function Bn(r){let e;if(typeof r=="string"?e={url:r}:typeof r=="function"||Array.isArray(r)?e={resources:r}:typeof r=="object"&&r&&(e=r),e){let{refined:t,extra:s}=$t(e,zn);Ln(s);let n=kn(t);if(n)return{_raw:r,sourceId:nt(),sourceDefId:n.sourceDefId,meta:n.meta,publicId:t.id||"",isFetching:!1,latestFetchId:"",fetchRange:null}}return null}function kn(r){let e=On();for(let t=e.length-1;t>=0;t-=1){let n=e[t].parseMeta(r);if(n)return{meta:n,sourceDefId:t}}return null}function Ln(r){for(let e in r)console.warn(`Unknown resource prop '${e}'`)}function _n(r,e,t){let{options:s,dateProfile:n}=t;if(!r||!e)return kt(s.initialResources||s.resources,n.activeRange,s.refetchResourcesOnNavigate,t);switch(e.type){case"RESET_RESOURCE_SOURCE":return kt(e.resourceSourceInput,n.activeRange,s.refetchResourcesOnNavigate,t);case"PREV":case"NEXT":case"CHANGE_DATE":case"CHANGE_VIEW_TYPE":return Un(r,n.activeRange,s.refetchResourcesOnNavigate,t);case"RECEIVE_RESOURCES":case"RECEIVE_RESOURCE_ERROR":return Gn(r,e.fetchId,e.fetchRange);case"REFETCH_RESOURCES":return pt(r,n.activeRange,t);default:return r}}function kt(r,e,t,s){if(r){let n=Bn(r);return n=pt(n,t?e:null,s),n}return null}function Un(r,e,t,s){return t&&!jn(r)&&(!r.fetchRange||!xs(r.fetchRange,e))?pt(r,e,s):r}function jn(r){return!!wr(r.sourceDefId).ignoreRange}function pt(r,e,t){let s=wr(r.sourceDefId),n=nt();return s.fetch({resourceSource:r,range:e,context:t},i=>{t.dispatch({type:"RECEIVE_RESOURCES",fetchId:n,fetchRange:e,rawResources:i.rawResources})},i=>{t.dispatch({type:"RECEIVE_RESOURCE_ERROR",fetchId:n,fetchRange:e,error:i})}),Object.assign(Object.assign({},r),{isFetching:!0,latestFetchId:n})}function Gn(r,e,t){return e===r.latestFetchId?Object.assign(Object.assign({},r),{isFetching:!1,fetchRange:t}):r}function Fn(r,e,t,s){if(!r||!e)return{};switch(e.type){case"RECEIVE_RESOURCES":return An(r,e.rawResources,e.fetchId,t,s);case"ADD_RESOURCE":return Vn(r,e.resourceHash);case"REMOVE_RESOURCE":return qn(r,e.resourceId);case"SET_RESOURCE_PROP":return Xn(r,e.resourceId,e.propName,e.propValue);case"SET_RESOURCE_EXTENDED_PROP":return Yn(r,e.resourceId,e.propName,e.propValue);default:return r}}function An(r,e,t,s,n){if(s.latestFetchId===t){let i={};for(let o of e)ut(o,"",i,n);return i}return r}function Vn(r,e){return Object.assign(Object.assign({},r),e)}function qn(r,e){let t=Object.assign({},r);delete t[e];for(let s in t)t[s].parentId===e&&(t[s]=Object.assign(Object.assign({},t[s]),{parentId:""}));return t}function Xn(r,e,t,s){let n=r[e];return n?Object.assign(Object.assign({},r),{[e]:Object.assign(Object.assign({},n),{[t]:s})}):r}function Yn(r,e,t,s){let n=r[e];return n?Object.assign(Object.assign({},r),{[e]:Object.assign(Object.assign({},n),{extendedProps:Object.assign(Object.assign({},n.extendedProps),{[t]:s})})}):r}function Kn(r,e){return!r||!e?{}:e.type==="SET_RESOURCE_ENTITY_EXPANDED"?Object.assign(Object.assign({},r),{[e.id]:e.isExpanded}):r}function $n(r,e,t){let s=_n(r&&r.resourceSource,e,t),n=Fn(r&&r.resourceStore,e,s,t),i=Kn(r&&r.resourceEntityExpansions,e);return{resourceSource:s,resourceStore:n,resourceEntityExpansions:i}}const Zn={resourceId:String,resourceIds:C,resourceEditable:Boolean};function Jn(r){return{resourceIds:Qn(r.resourceIds).concat(r.resourceId?[r.resourceId]:[]),resourceEditable:r.resourceEditable}}function Qn(r){return(r||[]).map(e=>String(e))}function ei(r,e){let t=r.dateSpan.resourceId,s=e.dateSpan.resourceId;return t&&s?{resourceId:t}:null}ve.prototype.addResource=function(r,e=!0){let t=this.getCurrentData(),s,n;r instanceof q?(n=r._resource,s={[n.id]:n}):(s={},n=ut(r,"",s,t)),this.dispatch({type:"ADD_RESOURCE",resourceHash:s}),e&&this.trigger("_resourceScrollRequest",n.id);let i=new q(t,n);return t.emitter.trigger("resourceAdd",{resource:i,revert:()=>{this.dispatch({type:"REMOVE_RESOURCE",resourceId:n.id})}}),i};ve.prototype.getResourceById=function(r){r=String(r);let e=this.getCurrentData();if(e.resourceStore){let t=e.resourceStore[r];if(t)return new q(e,t)}return null};ve.prototype.getResources=function(){let r=this.getCurrentData(),{resourceStore:e}=r,t=[];if(e)for(let s in e)t.push(new q(r,e[s]));return t};ve.prototype.getTopLevelResources=function(){let r=this.getCurrentData(),{resourceStore:e}=r,t=[];if(e)for(let s in e)e[s].parentId||t.push(new q(r,e[s]));return t};ve.prototype.refetchResources=function(){this.dispatch({type:"REFETCH_RESOURCES"})};function ti(r,e){return r.resourceId?{resource:e.calendarApi.getResourceById(r.resourceId)}:{}}function ri(r,e){return r.resourceId?{resource:e.calendarApi.getResourceById(r.resourceId)}:{}}function si(r,e){let s=new fr().splitProps(Object.assign(Object.assign({},r),{resourceStore:e.getCurrentData().resourceStore}));for(let n in s){let i=s[n];if(n&&s[""]&&(i=Object.assign(Object.assign({},i),{eventStore:vs(s[""].eventStore,i.eventStore),eventUiBases:Object.assign(Object.assign({},s[""].eventUiBases),i.eventUiBases)})),!ys(i,e,{resourceId:n},ni.bind(null,n)))return!1}return!0}function ni(r,e){return Object.assign(Object.assign({},e),{constraints:ii(r,e.constraints)})}function ii(r,e){return e.map(t=>{let s=t.defs;if(s)for(let n in s){let i=s[n].resourceIds;if(i.length&&i.indexOf(r)===-1)return!1}return t})}function oi(r){return r.resourceId?{resourceId:r.resourceId}:{}}const li={resources:ai};function ai(r,e){e.getCurrentData().resourceSource._raw!==r&&e.dispatch({type:"RESET_RESOURCE_SOURCE",resourceSourceInput:r})}const di={initialResources:C,resources:C,eventResourceEditable:Boolean,refetchResourcesOnNavigate:Boolean,resourceOrder:Kt,filterResourcesWithEvents:Boolean,resourceGroupField:String,resourcesInitiallyExpanded:Boolean,datesAboveResources:Boolean,needsResourceData:Boolean},ci={resourcesSet:C,resourceAdd:C,resourceChange:C,resourceRemove:C,_resourceScrollRequest:C};st.prototype.getResources=function(){let{calendarApi:r}=this._context;return this._def.resourceIds.map(e=>r.getResourceById(e))};st.prototype.setResources=function(r){let e=[];for(let t of r){let s=null;typeof t=="string"?s=t:typeof t=="number"?s=String(t):t instanceof q?s=t.id:console.warn("unknown resource type: "+t),s&&e.push(s)}this.mutate({standardProps:{resourceIds:e}})};ft({ignoreRange:!0,parseMeta(r){return Array.isArray(r.resources)?r.resources:null},fetch(r,e){e({rawResources:r.resourceSource.meta})}});ft({parseMeta(r){return typeof r.resources=="function"?r.resources:null},fetch(r,e,t){const s=r.context.dateEnv,n=r.resourceSource.meta,i=r.range?{start:s.toDate(r.range.start),end:s.toDate(r.range.end),startStr:s.formatIso(r.range.start),endStr:s.formatIso(r.range.end),timeZone:s.timeZone}:{};Is(n.bind(null,i),o=>e({rawResources:o}),t)}});ft({parseMeta(r){return r.url?{url:r.url,method:(r.method||"GET").toUpperCase(),extraParams:r.extraParams}:null},fetch(r,e,t){const s=r.resourceSource.meta,n=ui(s,r.range,r.context);Hs(s.method,s.url,n).then(([i,o])=>{e({rawResources:i,response:o})},t)}});function ui(r,e,t){let{dateEnv:s,options:n}=t,i,o,l,d,u={};return e&&(i=r.startParam,i==null&&(i=n.startParam),o=r.endParam,o==null&&(o=n.endParam),l=r.timeZoneParam,l==null&&(l=n.timeZoneParam),u[i]=s.formatIso(e.start),u[o]=s.formatIso(e.end),s.timeZone!=="local"&&(u[l]=s.timeZone)),typeof r.extraParams=="function"?d=r.extraParams():d=r.extraParams||{},Object.assign(u,d),u}var hi=Ce({name:"@fullcalendar/resource",premiumReleaseDate:"2025-12-31",deps:[Oe],reducers:[$n],isLoadingFuncs:[r=>r.resourceSource&&r.resourceSource.isFetching],eventRefiners:Zn,eventDefMemberAdders:[Jn],isDraggableTransformers:[Wn],eventDragMutationMassagers:[yn],eventDefMutationAppliers:[wn],dateSelectionTransformers:[ei],datePointTransforms:[ti],dateSpanTransforms:[ri],viewPropsTransformers:[En,Tn],isPropsValid:si,externalDefTransforms:[oi],eventDropTransformers:[bn],optionChangeHandlers:li,optionRefiners:di,listenerRefiners:ci,propSetHandlers:{resourceStore:gn}});function Lt(r){return r*100+"%"}function br(r,e=0){if(r!=null){if(typeof r=="string"){let t=r.match(/^(.*)(%|px)$/);if(t){const s=parseFloat(t[1]);if(!isNaN(s))return t[2]==="%"?{pixels:0,frac:s/100,min:e}:{pixels:s,frac:0,min:e}}}else if(typeof r=="number"&&!isNaN(r))return{pixels:r,frac:0,min:e}}}function fi(r,e,t){const s=br(r,t);return s?Object.assign(Object.assign({},s),{grow:0}):{pixels:0,frac:0,grow:e||1,min:t}}function pi(r){for(const e of r)if(e.grow)return;for(const e of r)e.grow=1}function gi(r,e){const t=[];let s=0,n=0;for(const i of r){const o=Math.max(i.pixels+i.frac*e,i.min);t.push(o),s+=o,n+=i.grow}if(s<e){const i=e-s;for(let o=0;o<r.length;o++)t[o]+=i*(r[o].grow/n)}return[t,s]}function mi(r,e){const t=[],s=[];let n=0,i=0;for(let l=0;l<r.length;l++){const d=r[l],u=Math.max(d.pixels,d.min);t.push(u),s.push(e[l]-u),n+=d.pixels+(d.grow?d.min:0),i+=d.frac}const o=Ke({pixels:n,frac:i});return[t,s,o]}function Ke({pixels:r,frac:e}){return e?r?`calc(${Lt(e)} + ${r}px)`:Lt(e):r}function Si(r,e,t,s,n){const i=[];for(let d=0;d<s;d++)i.push($e(r[d],e[d],t));i.push($e(r[s],n,t));const o=r.length;let l=!1;for(let d=s+1;d<o;d++){const u=r[d];i.push(u),u.grow&&(l=!0)}if(!l)for(let d=s+1;d<o;d++)i[d]=Object.assign({},i[d],{grow:1});return i}function $e(r,e,t){const{min:s}=r;return e=Math.max(s,e),r.pixels?{pixels:e,frac:0,grow:0,min:s}:{pixels:0,frac:e/t,grow:0,min:s}}const se=1;function Ri(r,e,t,s){const n=new Map;let[i,o]=Er(r,e,t,n);return s!=null&&s>i&&(gt(r,e,n,(s-i)/o),i=s),[n,i]}function Er(r,e,t,s){let n=0,i=0;for(const o of r){const l=e(o.entity);let d=t(l)||0;const[u,h]=Er(o.children,e,t,s);o.pooledHeight?(d>u?gt(o.children,e,s,(d-u)/h):d=u,n+=d):n+=d+se+u,s.set(l,d),o.pooledHeight===void 0&&i++,i+=h}return[n+se*(r.length-1),i]}function gt(r,e,t,s){for(const n of r){if(n.pooledHeight===void 0){const i=e(n.entity);t.set(i,t.get(i)+s)}gt(n.children,e,t,s)}}function Ci(r,e,t){const s=new Map;return xr(r,e,t,s,0),s}function xr(r,e,t,s,n){for(let i=0;i<r.length;i++){const o=r[i],l=e(o.entity);s.set(l,n),o.pooledHeight||(n+=t.get(l)+se),n=xr(o.children,e,t,s,n)}return n}function Ne(r,e,t,s,n){for(const i of r){const o=n(i.entity),l=e.get(o),d=t.get(o);if(l+d>s)return i.pooledHeight?Ne(i.children,e,t,s,n):[i.entity,l,d];if(!i.pooledHeight){const u=Ne(i.children,e,t,s,n);if(u)return u}}}function vi(r,e,t,s){const n=[],i=[],o=[];function l(h,p,f,R,g,S,m){var y,w;const D=[];let x=0,E=0;for(const b of h)if(b.resourceFields){const U=(y=t[b.entity.id])!==null&&y!==void 0?y:s,A=p+x++,z=f+E++,B={rowIndex:A,visibleIndex:z,entity:b.entity,resourceFields:b.resourceFields,isExpanded:U,hasChildren:!!b.children.length,depth:R,rowDepth:g,indent:S,children:[]};m&&(n.push(B),D.push(B));const[N,j,G]=l(b.children,p+x,f+E,R+1,g+1,S+1,m&&U);m&&U&&(B.children=N,E+=G),x+=j}else if(b.pooledHeight){const U=p+x,A=f+E,z={rowIndex:U,visibleIndex:A,rowSpan:0,entity:b.entity,pooledHeight:!0,children:[]};m&&((o[R]||(o[R]=[])).push(z),D.push(z));const[B,N,j]=l(b.children,p+x,f+E,R+1,g,S,m);m&&(z.children=B,z.rowSpan=N,E+=j),x+=N}else{const U=(w=t[re(b.entity)])!==null&&w!==void 0?w:s,A=p+x++,z=f+E++,B={rowIndex:A,visibleIndex:z,entity:b.entity,pooledHeight:!1,isExpanded:U,hasChildren:!!b.children.length,depth:R,rowDepth:g,indent:S,children:[]};m&&(i.push(B),D.push(B));const[N,j,G]=l(b.children,p+x,f+E,R+1,g+1,S+1,m&&U);m&&U&&(B.children=N,E+=G),x+=j}return[D,x,E]}const[d,u]=l(r,0,0,0,0,e?1:0,!0);return{layouts:d,flatResourceLayouts:n,flatGroupRowLayouts:i,flatGroupColLayouts:o,totalCnt:u}}class Ir extends M{constructor(){super(...arguments),this.innerElRef=_()}render(){let{props:e,context:t}=this,{group:s}=e,n=s.spec,i={fieldValue:s.value,view:t.viewApi};return c("div",{role:e.role,"aria-rowindex":e.rowIndex,"aria-level":e.level,"aria-expanded":e.expanded,className:T(a.fillX,a.flexRow),style:{top:e.top,width:e.width}},c(Z,{tag:"div",attrs:{role:"gridcell","aria-expanded":e.expanded},className:v(a.liquid,a.tight,a.flexCol,a.contentBox,e.borderBottom?a.borderOnlyB:a.borderNone),style:{height:e.height},renderProps:i,generatorName:"resourceGroupLaneContent",customGenerator:n.laneContent,classNameGenerator:n.laneClass,didMount:n.laneDidMount,willUnmount:n.laneWillUnmount},o=>c(o,{tag:"div",elRef:this.innerElRef,className:v(L(n.laneInnerClass,i),a.noShrink,a.noMargin)})))}componentDidMount(){const e=this.innerElRef.current;this.disconnectInnerHeight=ee(e,t=>{I(this.props.innerHeightRef,t)})}componentWillUnmount(){this.disconnectInnerHeight(),I(this.props.innerHeightRef,null)}}function yi(r){return{resource:new q(r.context,r.resource),options:{eventOverlap:r.eventOverlap}}}class Hr extends M{constructor(){super(...arguments),this.refineRenderProps=Qt(yi),this.slicer=new ct,this.handleEventsHeight=e=>{this.eventsHeight=e,$(this.handleHeight)},this.handleTopEl=e=>{this.disconnectTopHeight&&(this.disconnectTopHeight(),this.disconnectTopHeight=void 0),e&&(this.disconnectTopHeight=ee(e,t=>{this.topHeight=t,$(this.handleHeight)}))},this.handleBottomEl=e=>{this.disconnectBottomHeight&&(this.disconnectBottomHeight(),this.disconnectBottomHeight=void 0),e&&(this.disconnectBottomHeight=ee(e,t=>{this.bottomHeight=t,$(this.handleHeight)}))},this.handleHeight=()=>{const{topHeight:e,bottomHeight:t,eventsHeight:s}=this;e!=null&&t!=null&&s!=null&&I(this.props.heightRef,e+t+s)}}render(){var e;let{props:t,context:s}=this,{resource:n}=t,{options:i}=s,o=this.refineRenderProps({resource:n,context:s,eventOverlap:!!i.eventOverlap}),l=this.slicer.sliceProps(t,t.dateProfile,t.tDateProfile.isTimeScale?null:i.nextDayThreshold,s,t.dateProfile,s.dateProfileGenerator,t.tDateProfile,s.dateEnv);return c("div",{role:t.role,"aria-rowindex":t.rowIndex,"aria-level":t.level,"aria-expanded":t.expanded,"data-resource-id":n.id,className:T(t.className,a.flexRow),style:{top:t.top,width:t.width,insetInlineStart:(e=t.insetInlineStart)!==null&&e!==void 0?e:t.clipStart}},c(Z,{tag:"div",attrs:{role:"gridcell","aria-expanded":t.expanded},className:v(a.liquid,a.tight,a.flexCol,a.contentBox,t.borderBottom?a.borderOnlyB:a.borderNone,a.rel),style:{height:t.height},renderProps:o,generatorName:void 0,classNameGenerator:i.resourceLaneClass,didMount:i.resourceLaneDidMount,willUnmount:i.resourceLaneWillUnmount},()=>c(Y,null,c(ze,{tDateProfile:t.tDateProfile,nowDate:t.nowDate,todayRange:t.todayRange,bgEventSegs:l.bgEventSegs,businessHourSegs:l.businessHourSegs,dateSelectionSegs:l.dateSelectionSegs,eventResizeSegs:l.eventResize?l.eventResize.segs:null,slotWidth:t.slotWidth,clipStart:t.clipStart,clipEnd:t.clipEnd}),c(Z,{tag:"div",elRef:this.handleTopEl,className:v(a.noMargin,a.noShrink),renderProps:o,generatorName:"resourceLaneTopContent",classNameGenerator:i.resourceLaneTopClass}),c(cr,{dateProfile:t.dateProfile,tDateProfile:t.tDateProfile,nowDate:t.nowDate,todayRange:t.todayRange,fgEventSegs:l.fgEventSegs,eventDrag:l.eventDrag,eventResize:l.eventResize,eventSelection:l.eventSelection,resourceId:n.id,slotWidth:t.slotWidth,clipStart:t.clipStart,clipEnd:t.clipEnd,heightRef:this.handleEventsHeight}),c(Z,{tag:"div",elRef:this.handleBottomEl,className:v(a.noMargin,a.noShrink),renderProps:o,generatorName:"resourceLaneBottomContent",classNameGenerator:i.resourceLaneBottomClass}))))}}const wi=30;class bi extends M{constructor(){super(...arguments),this.parseWidthConfig=O(br),this.rootEl=null,this.startElRef=_(),this.resizerElRef=_(),this.handleRootEl=e=>{this.rootEl=e,this.props.elRef&&I(this.props.elRef,e)}}render(){const{props:e,state:t,context:s}=this,{options:n}=s,i=this.parseWidthConfig(e.initialStartWidth,wi),o=this.widthConfig=t.widthOverride||i;return c("div",{ref:this.handleRootEl,class:v(e.className,a.flexRow)},c("div",{class:e.startClassName,style:{width:Ke(o)},ref:this.startElRef},e.startContent),c("div",{className:T(n.resourceColumnDividerClass,a.rel),style:{cursor:"col-resize"},ref:this.resizerElRef},c("div",{className:a.hitXSkinny,style:{zIndex:1}})),c("div",{class:v(e.endClassName,a.liquid)},e.endContent))}componentDidMount(){const e=this.context.pluginHooks.elementDraggingImpl;if(e){const t=this.resizerElRef.current,s=this.resizerDragging=new e(t);s.emitter.on("dragstart",()=>{const n=er(t),i=this.rootEl.getBoundingClientRect().width,o=this.startElRef.current.getBoundingClientRect().width,l=this.widthConfig;let d;s.emitter.on("dragmove",u=>{const h=Math.min(o+u.deltaX*(n?-1:1),i);d=$e(l,h,i),this.setState({widthOverride:d})}),s.emitter.on("dragend",()=>{d&&I(this.props.resizedWidthRef,Ke(d))}),s.setAutoScrollEnabled(!1)})}}componentWillUnmount(){this.resizerDragging&&this.resizerDragging.destroy()}}class Dr extends M{constructor(){super(...arguments),this.innerElRef=_()}render(){let{props:e,context:t}=this,{options:s}=t,{colSpec:n}=e,i={fieldValue:e.fieldValue,view:t.viewApi};return c("div",{role:e.role,"aria-rowindex":e.rowIndex,"aria-level":e.level,className:T(s.resourceRowClass,e.className,a.flexRow,e.borderBottom?a.borderOnlyB:a.borderNone),style:{top:e.top,height:e.height,minWidth:0,width:e.width,flexGrow:e.grow}},c(Z,{tag:"div",attrs:{role:"rowheader","aria-rowspan":e.rowSpan},className:v(a.tight,a.liquid,e.borderStart?a.borderOnlyS:a.borderNone),renderProps:i,generatorName:"resourceCellContent",customGenerator:n.cellContent,defaultGenerator:Ei,classNameGenerator:n.cellClass,didMount:n.cellDidMount,willUnmount:n.cellWillUnmount},o=>c(o,{tag:"div",className:v(L(n.cellInnerClass,i),a.rigid,a.stickyT),elRef:this.innerElRef})))}componentDidMount(){const e=this.innerElRef.current;this.disconnectInnerHeight=ee(e,t=>{I(this.props.innerHeightRef,t)})}componentWillUnmount(){this.disconnectInnerHeight(),I(this.props.innerHeightRef,null)}}function Ei(r){return r.fieldValue||c(Y,null,"")}class Be extends M{render(){const{props:e,context:t}=this;return c("div",{className:T(t.options.resourceIndentClass,a.noShrink,a.flexCol,a.alignEnd),style:Object.assign(Object.assign({},e.style),{width:e.indentWidth!=null?e.indentWidth*e.level:0})},e.children)}}class mt extends M{render(){const{props:e}=this,{options:t}=this.context,s=t.resourceExpanderClass,n=t.resourceExpanderContent,i={isExpanded:e.isExpanded};return c("span",{"aria-hidden":!0,className:v(L(s,i),a.flexRow,a.cursorPointer,a.selectNone,a.noMargin,e.className),onClick:e.onExpanderClick,ref:e.elRef},n&&c(Z,{tag:"span",style:{display:"contents"},attrs:{"aria-hidden":!0},renderProps:i,generatorName:void 0,customGenerator:n}))}}class St extends M{constructor(){super(...arguments),this.innerElRef=_(),this.onExpanderClick=()=>{let{props:e}=this;this.context.dispatch({type:"SET_RESOURCE_ENTITY_EXPANDED",id:re(e.group),isExpanded:!e.isExpanded})}}render(){let{props:e,context:t}=this,s={fieldValue:e.group.value,view:t.viewApi},n=e.group.spec;return c("div",{role:e.role,"aria-rowindex":e.rowIndex,"aria-level":e.level,"aria-expanded":e.isExpanded,className:T(e.className,a.flexRow),style:{top:e.top}},c(Z,{tag:"div",attrs:{role:"rowheader","aria-colspan":e.colSpan,"aria-expanded":e.isExpanded},className:v(a.liquid,a.tight,a.flexCol,a.alignStart,a.crop,a.contentBox,e.borderBottom?a.borderOnlyB:a.borderNone),style:{height:e.height},renderProps:s,generatorName:"resourceGroupHeaderContent",customGenerator:n.labelContent,defaultGenerator:xi,classNameGenerator:n.labelClass,didMount:n.labelDidMount,willUnmount:n.labelWillUnmount},i=>c("div",{ref:this.innerElRef,className:v(a.rigid,a.flexRow),style:{isolation:"isolate"}},c(Be,{level:1,indentWidth:e.indentWidth,style:{zIndex:2}},c(mt,{isExpanded:e.isExpanded,onExpanderClick:this.onExpanderClick})),c(i,{tag:"div",className:L(n.labelInnerClass,s),style:{zIndex:1}}))))}componentDidMount(){const e=this.innerElRef.current;this.disconnectInnerHeight=ee(e,t=>{I(this.props.innerHeightRef,t)})}componentWillUnmount(){this.disconnectInnerHeight(),I(this.props.innerHeightRef,null)}}St.addPropsEquality({group:vn});function xi(r){return r.fieldValue||c(Y,null,"")}class Ii extends M{constructor(){super(...arguments),this.innerElRef=_(),this.refineRenderProps=Qt(Di),this.onExpanderClick=e=>{let{props:t}=this;t.hasChildren&&this.context.dispatch({type:"SET_RESOURCE_ENTITY_EXPANDED",id:t.resource.id,isExpanded:!t.isExpanded})}}render(){let{props:e,context:t}=this,{colSpec:s}=e,n=this.refineRenderProps({resource:e.resource,fieldValue:e.fieldValue,context:t});return c(Z,{tag:"div",attrs:{role:s.isMain?"rowheader":"gridcell","aria-expanded":s.isMain&&e.hasChildren?e.isExpanded:void 0},className:v(a.tight,a.flexCol,a.alignStart,e.borderStart?a.borderOnlyS:a.borderNone,a.crop),style:{minWidth:0,width:e.width,flexGrow:e.grow},renderProps:n,generatorName:"resourceCellContent",customGenerator:s.cellContent,defaultGenerator:Hi,classNameGenerator:s.cellClass,didMount:s.cellDidMount,willUnmount:s.cellWillUnmount},i=>c("div",{ref:this.innerElRef,className:v(a.rigid,a.flexRow),style:{isolation:"isolate"}},s.isMain&&!!e.indent&&c(Be,{level:e.indent,indentWidth:e.indentWidth,style:{zIndex:2}},e.hasChildren&&c(mt,{isExpanded:e.isExpanded,onExpanderClick:this.onExpanderClick})),c(i,{tag:"div",className:L(s.cellInnerClass,n),style:{zIndex:1}})))}componentDidMount(){this.disconnectHeight=ee(this.innerElRef.current,e=>{I(this.props.innerHeightRef,e)})}componentWillUnmount(){this.disconnectHeight(),I(this.props.innerHeightRef,null)}}function Hi(r){return r.fieldValue||c(Y,null,"")}function Di(r){return{resource:new q(r.context,r.resource),fieldValue:r.fieldValue,view:r.context.viewApi}}class Rt extends M{constructor(){super(...arguments),this.innerHeightRefMap=new X(()=>{$(this.handleInnerHeights)}),this.currentInnerHeight=null,this.handleInnerHeights=()=>{const e=this.innerHeightRefMap.current;let t=null;for(const s of e.values())(t==null||s>t)&&(t=s);this.currentInnerHeight!==t&&(this.currentInnerHeight=t,I(this.props.innerHeightRef,t))}}render(){const{props:e,innerHeightRefMap:t}=this,{resource:s,resourceFields:n,colSpecs:i}=e,{options:o}=this.context,l=e.colWidths||[],d=e.colGrows||[];return c("div",{role:e.role,"aria-rowindex":e.rowIndex,"aria-level":e.level,"aria-expanded":e.expanded,"data-resource-id":s.id,className:T(o.resourceRowClass,e.className,a.flexRow,e.borderBottom?a.borderOnlyB:a.borderNone),style:{top:e.top,height:e.height}},Wi(e.colStartIndex,i.length,u=>{const h=i[u],p=h.field?n[h.field]:s.title||hr(s.id);return c(Ii,{key:u,colSpec:h,resource:s,fieldValue:p,indent:e.indent,hasChildren:e.hasChildren,isExpanded:e.isExpanded,innerHeightRef:t.createRef(u),width:l[u],indentWidth:e.indentWidth,grow:d[u],borderStart:e.borderStart||!!u})}))}}Rt.addPropsEquality({colWidths:Ze});function Wi(r,e,t){const s=[];for(let n=r;n<e;n++)s.push(t(n));return s}class Ti extends M{render(){const{props:e}=this,{rowInnerHeightRefMap:t,headerRowSpan:s,hasNesting:n}=e,i=e.groupRowCnt+e.resourceCnt,o=e.groupCellCnts.length,l=e.colWidths||[];return c("div",{className:a.flexRow,style:{minWidth:e.canvasWidth,minHeight:e.canvasHeight}},e.groupColPositions.map((d,u)=>c("div",{key:u,role:"rowgroup",className:a.rel,style:{height:0,minWidth:0,width:l[u]}},d.map((h,p)=>{const f=h.item,R=f.entity,g=h.key,S=p<d.length-1,m=h.size;return c(Dr,{key:g,colSpec:R.spec,rowSpan:f.rowSpan,fieldValue:R.value,className:a.fillX,borderStart:!!u,borderBottom:S,role:"row",rowIndex:1+s+f.rowIndex,level:n?1:void 0,innerHeightRef:t.createRef(g),top:h.start,height:m!=null&&S?m+se:m})}))),c("div",{role:"rowgroup",className:a.rel,style:{height:0,minWidth:0,width:Ni(l.slice(o))}},e.groupRowPositions.map(d=>{const u=d.item,h=u.entity,p=d.key,f=u.visibleIndex<i-1;return c(St,{key:p,group:h,isExpanded:u.isExpanded,innerHeightRef:t.createRef(p),role:"row",rowIndex:1+s+u.rowIndex,level:n?1+u.rowDepth:void 0,colSpan:e.colSpecs.length,borderBottom:f,top:d.start,height:d.size,indentWidth:e.indentWidth,className:a.fillX})}),e.rowPositions.map(d=>{const u=d.item,h=u.entity,p=u.visibleIndex<i-1,f=d.size;return c(Rt,{key:h.id,resource:h,resourceFields:u.resourceFields,indent:u.indent,hasChildren:u.hasChildren,isExpanded:u.isExpanded,colStartIndex:o,colSpecs:e.colSpecs,colWidths:l,innerHeightRef:t.createRef(h.id),className:a.fillX,borderStart:!!o,borderBottom:p,role:"row",rowIndex:1+s+u.rowIndex,level:n?1+u.rowDepth:void 0,expanded:u.hasChildren?u.isExpanded:void 0,top:d.start,height:f!=null&&p?f+se:f,indentWidth:e.indentWidth})})))}}function Ni(r){let e=0;for(const t of r)e+=t;return e}class Mi extends M{constructor(){super(...arguments),this.innerElRef=_()}render(){let{props:e,context:t}=this,{colSpec:s}=e,n={view:t.viewApi};return c(Z,{tag:"div",attrs:{role:"columnheader"},className:v(a.tight,a.flexCol,e.borderStart?a.borderOnlyS:a.borderNone,a.rel),style:{minWidth:0,width:e.width,flexGrow:e.grow},renderProps:n,generatorName:"resourceColumnHeaderContent",customGenerator:s.headerContent,defaultGenerator:s.headerDefault,classNameGenerator:s.headerClass,didMount:s.headerDidMount,willUnmount:s.headerWillUnmount},i=>c(Y,null,c("div",{className:v(a.crop,a.flexCol,a.alignStart)},c("div",{ref:this.innerElRef,className:v(a.rigid,a.flexRow)},this.props.indent&&c(Be,{level:1,indentWidth:e.indentWidth}),c(i,{tag:"div",className:L(s.headerInnerClass,n)}))),e.resizer&&c("div",{ref:e.resizerElRef,className:v(L(s.headerResizerClass,n),a.z1,a.cursorColResizer)})))}componentDidMount(){const e=this.innerElRef.current;this.disconnectInnerHeight=ee(e,t=>{I(this.props.innerHeightRef,t)})}componentWillUnmount(){this.disconnectInnerHeight(),I(this.props.innerHeightRef,null)}}class Wr extends M{constructor(){super(...arguments),this.resizerElRefMap=new X((e,t)=>{let{colDraggings:s}=this;if(e){let n=this.initColResizing(e,t);n&&(s[t]=n)}else{let n=s[t];n&&(n.destroy(),delete s[t])}}),this.innerHeightRefMap=new X(()=>{$(this.handleInnerHeights)}),this.colDraggings={},this.handleInnerHeights=()=>{const{innerHeightRefMap:e}=this;let t=0;for(const s of e.current.values())t=Math.max(t,s);this.currentInnerHeight!==t&&(this.currentInnerHeight=t,I(this.props.innerHeightRef,t))}}render(){const{props:e,innerHeightRefMap:t,resizerElRefMap:s}=this,{colSpecs:n}=e,{options:i}=this.context,o=e.colWidths||[],l=e.colGrows||[];return c("div",{role:"row","aria-rowindex":e.rowIndex!=null?1+e.rowIndex:void 0,className:T(i.resourceHeaderRowClass,a.flexRow,a.grow,a.borderNone)},n.map((d,u)=>c(Mi,{key:u,width:o[u],grow:l[u],colSpec:d,resizer:u<n.length-1,indent:d.isMain&&e.indent,resizerElRef:s.createRef(u),innerHeightRef:t.createRef(u),borderStart:!!u,indentWidth:e.indentWidth})))}componentWillUnmount(){I(this.props.innerHeightRef,null)}initColResizing(e,t){let{pluginHooks:s}=this.context,n=s.elementDraggingImpl;if(n){let i=new n(e);return i.emitter.on("dragstart",()=>{const o=er(e),l=this.props.colWidths[t];i.emitter.on("dragmove",d=>{this.props.onColResize&&this.props.onColResize(t,l+d.deltaX*(o?-1:1))}),i.setAutoScrollEnabled(!1)}),i}return null}}class Tr extends M{constructor(){super(...arguments),this.innerElRef=_()}render(){let{renderHooks:e}=this.props,t={view:this.context.viewApi};return c(Z,{tag:"div",attrs:{role:"columnheader","aria-colspan":this.props.colSpan},className:v(a.liquid,a.tight,a.flexCol,a.alignStart,a.borderNone,a.crop),renderProps:t,generatorName:"resourceColumnHeaderContent",customGenerator:e.headerContent,defaultGenerator:e.headerDefault,classNameGenerator:e.headerClass,didMount:e.headerDidMount,willUnmount:e.headerWillUnmount},s=>c("div",{ref:this.innerElRef,className:v(a.rigid,a.flexRow)},this.props.indent&&c(Be,{level:1,indentWidth:this.props.indentWidth}),c(s,{tag:"div",className:L(e.headerInnerClass,t)})))}componentDidMount(){const e=this.innerElRef.current;this.disconnectInnerHeight=ee(e,t=>{I(this.props.innerHeightRef,t)})}componentWillUnmount(){this.disconnectInnerHeight(),I(this.props.innerHeightRef,null)}}class pe{constructor(e,t,s,n,i=1){this.getItemKey=e,this.getItemStart=t,this.getItemSize=s,this.requestRerender=n,this.overscan=i,this.viewportSize=0,this.scroll=0,this.items=[]}computePositions(e,t,s){return t?(this.items=[],this.itemPositions=void 0,this.computeAllPositions(e)):(this.items=e,s!==void 0&&(this.scroll=s),this.viewportSize?this.itemPositions=this.computePositionsInRange(e):[])}handleViewportSize(e){e!==this.viewportSize&&(this.viewportSize=e,this._handleViewportChange())}handleScroll(e){e!==this.scroll&&(this.scroll=e,this._handleViewportChange())}_handleViewportChange(){if(this.itemPositions){const e=this.computePositionsInRange(this.items);(e.length!==this.itemPositions.length||e.length&&e[0].index!==this.itemPositions[0].index)&&this.requestRerender()}}computePositionsInRange(e){const{scroll:t,viewportSize:s,getItemKey:n,getItemStart:i,getItemSize:o,overscan:l}=this,d=e.length;let u=[],h=0,p=0;for(;h<d;){const g=e[h],S=n(g),m=i?i(S,h,g):p,y=o(S,h,g);if(m+y>t)break;h++,p+=y}const f=Math.max(h-l,0);for(;h>f;){const g=e[h-1],S=n(g),m=o(S,h-1,g);h--,p-=m}for(;h<d;){const g=e[h],S=n(g),m=i?i(S,h,g):p,y=o(S,h,g);if(m>=t+s)break;u.push({item:g,key:S,index:h,start:m,size:y}),h++,p+=y}const R=Math.min(h+l,d);for(;h<R;){const g=e[h],S=n(g),m=i?i(S,h,g):p,y=o(S,h,g);u.push({item:g,key:S,index:h,start:m,size:y}),h++,p+=y}return u}computeAllPositions(e){const{getItemKey:t,getItemStart:s,getItemSize:n}=this;let i=0;return e.map((o,l)=>{const d=t(o),u=s?s(d,l,o):i,h=n(d,l,o);return i+=h,{item:o,key:d,index:l,start:u,size:h}})}}function xe(r){const e=r.length;if(e){const t=r[0].start,s=r[e-1].start+r[e-1].size;return[t,s,r[0].index]}}const Pi=40,le=50;class Oi extends Je{constructor(){super(...arguments),this.buildResourceLayouts=O(vi),this.queuedHeightChange=!1,this.handleHeightChange=()=>{this.queuedHeightChange=!0,$(this.boundForceUpdate)},this.boundForceUpdate=()=>{this.forceUpdate()},this.spreadsheetHeaderScrollerRef=_(),this.spreadsheetBodyScrollerRef=_(),this.spreadsheetFooterScrollerRef=_(),this.timeHeaderScrollerRef=_(),this.timeBodyScrollerRef=_(),this.timeFooterScrollerRef=_(),this.headerRowInnerWidthMap=new X(()=>{$(this.handleSlotInnerWidths)}),this.timelineHeaderRowInnerHeightMap=new X(this.handleHeightChange),this.dataGridHeaderRowInnerHeightMap=new X(this.handleHeightChange),this.dataGridEntityInnerHeightMap=new X(this.handleHeightChange,!0),this.timeEntityInnerHeightMap=new X(this.handleHeightChange,!0),this.scroll={},this.getEntityTop=e=>this.bodyTops.get(e),this.getEntityHeight=e=>this.bodyHeights.get(e),this.rowVirtualizer=new pe(e=>e.entity.id,this.getEntityTop,this.getEntityHeight,this.boundForceUpdate),this.groupRowVirtualizer=new pe(e=>re(e.entity),this.getEntityTop,this.getEntityHeight,this.boundForceUpdate),this.groupColVirtualizers=[],this.slotVirtualizer=new pe(e=>e.toISOString(),(e,t)=>{var s;return t*((s=this.props.slotWidth)!==null&&s!==void 0?s:le)},()=>{var e;return(e=this.props.slotWidth)!==null&&e!==void 0?e:le},this.boundForceUpdate,3),this.timeHeaderVirtualizers=[],this.handleSpreadsheetClientWidth=e=>{I(this.props.spreadsheetClientWidthRef,e)},this.handleSpreadsheetBottomScrollbarWidth=e=>{this.setState({spreadsheetBottomScrollbarWidth:e})},this.handleTimeTotalWidth=e=>{this.setState({timeTotalWidth:e})},this.handleTimeClientWidth=e=>{I(this.props.timeClientWidthRef,e),this.setState({timeClientWidth:e}),this.slotVirtualizer.handleViewportSize(e);for(const t of this.timeHeaderVirtualizers)t.handleViewportSize(e)},this.handleTimeClientHeight=e=>{this.setState({timeClientHeight:e}),ge(this.context.options)||this.setVirtualizerViewportSize(e)},this.handleTimeBottomScrollbarWidth=e=>{this.setState({timeBottomScrollbarWidth:e})},this.handleSlotInnerWidths=()=>{const e=this.headerRowInnerWidthMap.current.get(this.props.tDateProfile.cellRows.length-1);e!=null&&e!==this.slotInnerWidth&&(this.slotInnerWidth=e,I(this.props.slotInnerWidthRef,e))},this.updateVirtualizerScroll=Ae(()=>{const e=this.currentEntityScroll;this.rowVirtualizer.handleScroll(e),this.groupRowVirtualizer.handleScroll(e);for(const t of this.groupColVirtualizers)t.handleScroll(e)},10)[0],this.isTrackingWindowScroll=!1,this.bodyOffset=0,this.lastOffsetQuery=0,this.handleWindowScroll=()=>{const e=window.scrollY,t=Date.now();t-this.lastOffsetQuery>200&&(this.lastOffsetQuery=t,this.bodyOffset=this.bodyEl.getBoundingClientRect().top+e),this.setVirtualizerScroll(e-this.bodyOffset)},this.handleTimeScrollRequest=e=>{this.scroll.time=e,this.scroll.x=void 0,this.applyTimeScroll()},this.handleTimeScrollStart=()=>{this.scroll.x=void 0,this.scroll.time=void 0},this.timeScroll=0,this.handleTimeScroll=(e,t)=>{this.timeScroll=t,this._handleTimeScroll()},this._handleTimeScroll=Ae(()=>{this.slotVirtualizer.handleScroll(this.timeScroll);for(const e of this.timeHeaderVirtualizers)e.handleScroll(this.timeScroll)},10)[0],this.handleTimeScrollEnd=e=>{e&&(this.scroll.x=this.timeScroller.x,this.scroll.time=void 0)},this.handleResourceScrollRequest=e=>{this.scroll.entityId=e,this.scroll.fromBottom=void 0,this.applyEntityScroll()},this.handleEntityScroll=(e,t)=>{ge(this.context.options)||this.setVirtualizerScroll(t)},this.handleEntityScrollStart=()=>{this.scroll.entityId=void 0,this.scroll.fromBottom=void 0},this.handleEntityScrollEnd=e=>{if(e){const{bodyLayouts:t,bodyTops:s,bodyHeights:n,scroll:i}=this,o=this.bodyScroller.y,l=Ne(t,s,n,o,fe);if(l){const[d,u,h]=l;i.entityId=fe(d),i.fromBottom=o?u+h-o:void 0}}},this.handleBodyEl=e=>{this.bodyEl=e,e?this.context.registerInteractiveComponent(this,{el:e}):this.context.unregisterInteractiveComponent(this)}}render(){var e;let{props:t,state:s,context:n}=this,{dateProfile:i,hasNesting:o}=t,{options:l,viewSpec:d}=n,{spreadsheetBottomScrollbarWidth:u,timeTotalWidth:h,timeClientWidth:p,timeClientHeight:f,timeBottomScrollbarWidth:R}=s;const{tDateProfile:g}=t;let{cellRows:S}=g,m=!ge(l),y=jt(l),w=Gt(l);const{colSpecs:D,groupColCnt:x,superHeaderRendering:E}=t,{resourceHierarchy:b}=t,U=E?1:0,A=U+1;let{layouts:z,flatResourceLayouts:B,flatGroupRowLayouts:N,flatGroupColLayouts:j,totalCnt:G}=this.buildResourceLayouts(b,o,t.resourceEntityExpansions,l.resourcesInitiallyExpanded);this.bodyLayouts=z;let k=this.groupColVirtualizers,F=k.length,V=j.length;if(V>F)for(let W=F;W<V;W++)k[W]=new pe(H=>re(H.entity),this.getEntityTop,this.getEntityHeight,this.boundForceUpdate);else V<F&&(k=k.slice(0,V));this.groupColVirtualizers=k;let J=this.timeHeaderVirtualizers;if(F=J.length,V=S.length,V>F)for(let W=F;W<V;W++)J[W]=new pe(H=>H.rowUnit+":"+H.date.toISOString(),void 0,(H,K,Q)=>{var te;return Q.colspan*((te=this.props.slotWidth)!==null&&te!==void 0?te:le)},this.boundForceUpdate),J[W].viewportSize=J[0].viewportSize,J[W].scroll=J[0].scroll;this.timeHeaderVirtualizers=J;const Or=N.length,zr=B.length,Ct=Or+zr,vt=zi(this.dataGridHeaderRowInnerHeightMap.current,this.timelineHeaderRowInnerHeightMap.current,!!E,g.cellRows.length);let yt=h!=null&&p!=null?h-p:void 0,[wt,ke]=Ri(z,fe,W=>{var H;const K=(H=this.dataGridEntityInnerHeightMap.current.get(W))!==null&&H!==void 0?H:Pi,Q=this.timeEntityInnerHeightMap.current.get(W)||0;return Math.max(K,Q)},m&&l.expandRows?f:void 0);this.bodyHeights=wt;let Br=Ci(z,fe,wt);this.bodyTops=Br;const ne=!l.virtualization,Le=this.computeEntityScroll(),_e=this.rowVirtualizer.computePositions(B,ne,Le),Ue=this.groupRowVirtualizer.computePositions(N,ne,Le),kr=this.groupColVirtualizers.map((W,H)=>W.computePositions(j[H],ne,Le)),ye=xe(_e),we=xe(Ue),bt=Math.min(...ye?[ye[0]]:[],...we?[we[0]]:[]),Lr=Math.max(...ye?[ye[1]]:[],...we?[we[1]]:[])-bt,je=this.computeTimeScroll(),Et=this.slotVirtualizer.computePositions(g.slotDates,ne,je),P=xe(Et),{timeCanvasWidth:be}=t,ie=(e=t.slotWidth)!==null&&e!==void 0?e:le,{spreadsheetColWidths:xt,spreadsheetCanvasWidth:Ge}=t,{splitProps:_r,bgSlicedProps:ue}=t,{hasResourceBusinessHours:Ur,fallbackBusinessHours:jr}=t,It=l.nowIndicator&&Qe(t.dateProfile.currentRange,t.nowDate),Ht=Math.max(0,(R||0)-(u||0)),Dt=Math.max(0,(u||0)-(R||0)),Wt=m&&!l.expandRows&&f!=null&&f>ke,Gr=Wt||!!Ht,Fr=Wt||!!Dt;return c(et,{viewSpec:d,attrs:{role:o?"treegrid":"grid","aria-rowcount":A+G,"aria-label":t.labelStr,"aria-labelledby":t.labelId},className:T(t.className,l.tableClass,a.flexCol),borderlessX:t.borderlessX,borderlessTop:t.borderlessTop,borderlessBottom:t.borderlessBottom,noEdgeEffects:t.noEdgeEffects},c(bi,{initialStartWidth:t.initialSpreadsheetWidth,resizedWidthRef:t.spreadsheetResizedWidthRef,className:m?a.liquid:"",startClassName:v(a.flexCol,a.isolate),startContent:c(Y,null,c("div",{role:"rowgroup",className:v(L(l.tableHeaderClass,{isSticky:y}),t.borderlessX&&a.borderlessX,a.flexCol,y&&a.tableHeaderSticky),style:{zIndex:1}},c("div",{className:v(a.flexCol,a.contentBox),style:{height:vt}},!!E&&c("div",{role:"row","aria-rowindex":1,className:T(l.resourceHeaderRowClass,a.flexRow,a.grow,a.borderOnlyB)},c(Tr,{renderHooks:E,indent:o&&!x,innerHeightRef:this.dataGridHeaderRowInnerHeightMap.createRef(!0),colSpan:D.length,indentWidth:t.indentWidth})),c(de,{horizontal:!0,hideScrollbars:!0,className:v(a.flexCol,a.grow),ref:this.spreadsheetHeaderScrollerRef},c("div",{className:v(a.flexCol,a.grow),style:{minWidth:Ge}},c(Wr,{colSpecs:D,colWidths:xt,indent:o,indentWidth:t.indentWidth,rowIndex:U,innerHeightRef:this.dataGridHeaderRowInnerHeightMap.createRef(!1),onColResize:t.onColResize})))),c("div",{className:L(l.slotHeaderDividerClass,{isHeader:!0,options:{dayMinWidth:l.dayMinWidth}})})),c(de,{vertical:m,horizontal:!0,hideScrollbars:!0,className:T(l.tableBodyClass,t.borderlessX&&a.borderlessX,y&&a.borderlessTop,(y||t.noEdgeEffects)&&a.noEdgeEffects,a.flexCol,a.rel,m&&a.liquid),style:{zIndex:0},ref:this.spreadsheetBodyScrollerRef,clientWidthRef:this.handleSpreadsheetClientWidth,bottomScrollbarWidthRef:this.handleSpreadsheetBottomScrollbarWidth},c(Ti,{rowPositions:_e,groupRowPositions:Ue,groupColPositions:kr,resourceCnt:B.length,groupRowCnt:N.length,groupCellCnts:j.map(W=>W.length),colWidths:xt,colSpecs:D,rowInnerHeightRefMap:this.dataGridEntityInnerHeightMap,headerRowSpan:A,hasNesting:o,indentWidth:t.indentWidth,canvasWidth:Ge,canvasHeight:ke}),Gr&&c("div",{className:T(L(l.fillerClass,{isHeader:!1}),a.borderOnlyT),style:{minHeight:Ht}})),c(qe,{isSticky:w,canvasWidth:Ge,scrollerRef:this.spreadsheetFooterScrollerRef,scrollbarWidthRef:this.handleSpreadsheetBottomScrollbarWidth})),endClassName:v(a.flexCol,a.isolate),endContent:c(Y,null,c("div",{className:v(L(l.tableHeaderClass,{isSticky:y}),t.borderlessX&&a.borderlessX,a.flexCol,y&&a.tableHeaderSticky),style:{zIndex:1}},c(de,{ref:this.timeHeaderScrollerRef,horizontal:!0,hideScrollbars:!0,className:v(a.flexRow,a.contentBox),style:{height:vt}},c("div",{role:"row","aria-rowindex":1},c("div",{role:"columnheader","aria-rowspan":A,"aria-label":l.eventsHint})),c("div",{"aria-hidden":!0,className:v(a.rel,a.flexCol,be==null&&a.liquid,t.slotLiquid&&a.crop),style:{minWidth:be}},S.map((W,H)=>{const K=S.length-H-1,Q=J[H].computePositions(W,ne,je),te=xe(Q)||[];return te.length||J[H].computePositions(W,ne,je),c(lt,{key:H,className:a.rel,dateProfile:t.dateProfile,tDateProfile:g,nowDate:t.nowDate,todayRange:t.todayRange,rowLevel:K,cells:W,slotWidth:ie,innerWidthRef:this.headerRowInnerWidthMap.createRef(H),innerHeighRef:this.timelineHeaderRowInnerHeightMap.createRef(H),insetInlineStart:te[0],cellStartIndex:te[2],cellCount:Q.length})}),It&&c(dt,{tDateProfile:g,nowDate:t.nowDate,slotWidth:ie})),!!yt&&c("div",{className:T(L(l.fillerClass,{isHeader:!0}),a.borderOnlyS),style:{minWidth:yt}})),c("div",{className:L(l.slotHeaderDividerClass,{isHeader:!1,options:{dayMinWidth:l.dayMinWidth}})})),c(de,{vertical:m,horizontal:!0,hideScrollbars:w,className:T(l.tableBodyClass,a.flexCol,a.rel,m&&a.liquid),style:{zIndex:0},ref:this.timeBodyScrollerRef,clientWidthRef:this.handleTimeClientWidth,clientHeightRef:this.handleTimeClientHeight,bottomScrollbarWidthRef:this.handleTimeBottomScrollbarWidth},c("div",{className:v(a.rel,a.grow,a.flexCol,t.slotLiquid&&a.crop),style:{minWidth:be,minHeight:ke},ref:this.handleBodyEl},c("div",{className:a.abs,style:{top:bt,height:Lr,insetInlineStart:P?.[0]}},c(ot,{dateProfile:i,tDateProfile:g,nowDate:t.nowDate,todayRange:t.todayRange,slatStartIndex:P?.[2],slatCount:Et.length,slotWidth:ie}),c(ze,{tDateProfile:g,nowDate:t.nowDate,todayRange:t.todayRange,bgEventSegs:ue.bgEventSegs,businessHourSegs:Ur?null:ue.businessHourSegs,dateSelectionSegs:ue.dateSelectionSegs,eventResizeSegs:ue.eventResize?ue.eventResize.segs:null,slotWidth:ie,clipStart:P?.[0],clipEnd:P?.[1]}),It&&c(at,{tDateProfile:g,nowDate:t.nowDate,slotWidth:ie})),c("div",{role:"rowgroup",className:a.abs,style:{top:0,insetInlineStart:P?.[0],width:P?P[1]-P[0]:void 0}},Ue.map(W=>{const H=W.item,K=H.entity,Q=W.key;return c(Ir,{key:Q,role:"row",group:K,rowIndex:1+A+H.rowIndex,level:o?1+H.rowDepth:void 0,expanded:H.isExpanded,borderBottom:H.visibleIndex<Ct-1,innerHeightRef:this.timeEntityInnerHeightMap.createRef(Q),top:W.start,height:W.size})}),_e.map(W=>{const H=W.item,K=H.entity;return c(Hr,Object.assign({},_r[K.id],{key:K.id,role:"row",className:a.fillX,resource:K,dateProfile:i,tDateProfile:g,nowDate:t.nowDate,todayRange:t.todayRange,businessHours:K.businessHours||jr,borderBottom:H.visibleIndex<Ct-1,rowIndex:1+A+H.rowIndex,level:o?1+H.rowDepth:void 0,expanded:H.hasChildren?H.isExpanded:void 0,heightRef:this.timeEntityInnerHeightMap.createRef(K.id),slotWidth:ie,top:W.start,height:W.size,clipStart:P?.[0],clipEnd:P?.[1]}))})),Fr&&c("div",{className:T(L(l.fillerClass,{isHeader:!1}),a.borderOnlyT),style:{minHeight:Dt}}))),!!w&&c(qe,{isSticky:!0,canvasWidth:be,scrollbarWidthRef:this.handleTimeBottomScrollbarWidth,scrollerRef:this.timeFooterScrollerRef}),c(Ft,{widthRef:this.handleTimeTotalWidth}))}))}componentDidMount(){const{props:e,context:t}=this;this.timeScroller=new Ie(!0),this.bodyScroller=new Ie,this.spreadsheetScroller=new Ie(!0),this.updateScrollersSyncers(),this.updateWindowScrolling(),e.initialScroll?(this.scroll=Object.assign({},e.initialScroll),this.applyEntityScroll(),this.applyTimeScroll()):this.resetTimeScroll(),I(e.scrollRef,this.scroll),this.timeScroller.addScrollStartListener(this.handleTimeScrollStart),this.timeScroller.addScrollListener(this.handleTimeScroll),this.timeScroller.addScrollEndListener(this.handleTimeScrollEnd),this.bodyScroller.addScrollStartListener(this.handleEntityScrollStart),this.bodyScroller.addScrollListener(this.handleEntityScroll),this.bodyScroller.addScrollEndListener(this.handleEntityScrollEnd),t.emitter.on("_timeScrollRequest",this.handleTimeScrollRequest),t.emitter.on("_resourceScrollRequest",this.handleResourceScrollRequest)}componentDidUpdate(e){const{props:t}=this,{options:s}=this.context;this.updateScrollersSyncers(),this.updateWindowScrolling();const n=e.dateProfile!==t.dateProfile,i=e.slotWidth!==t.slotWidth;(n||i)&&(n&&s.scrollTimeReset?this.resetTimeScroll():this.applyTimeScroll()),this.queuedHeightChange&&(this.queuedHeightChange=!1,this.applyEntityScroll())}componentWillUnmount(){this.timeScroller.destroy(),this.bodyScroller.destroy(),this.spreadsheetScroller.destroy(),this.destroyWindowScrolling(),this.timeScroller.removeScrollEndListener(this.handleTimeScrollEnd),this.bodyScroller.removeScrollEndListener(this.handleEntityScrollEnd),this.bodyScroller.removeScrollListener(this.handleEntityScroll),this.context.emitter.off("_timeScrollRequest",this.handleTimeScrollRequest),this.context.emitter.off("_resourceScrollRequest",this.handleResourceScrollRequest)}setVirtualizerViewportSize(e){this.rowVirtualizer.handleViewportSize(e),this.groupRowVirtualizer.handleViewportSize(e);for(const t of this.groupColVirtualizers)t.handleViewportSize(e)}setVirtualizerScroll(e){this.currentEntityScroll=e,this.updateVirtualizerScroll()}updateWindowScrolling(){ge(this.context.options)?this.isTrackingWindowScroll||(this.isTrackingWindowScroll=!0,this.setVirtualizerViewportSize(window.innerHeight),[this.handleWindowResize,this.cancelWindowResize]=Ae(()=>{this.setVirtualizerViewportSize(window.innerHeight)},200),window.addEventListener("resize",this.handleWindowResize),window.addEventListener("scroll",this.handleWindowScroll,{passive:!0})):this.destroyWindowScrolling()}destroyWindowScrolling(){this.isTrackingWindowScroll&&(this.isTrackingWindowScroll=!1,this.cancelWindowResize(),window.removeEventListener("resize",this.handleWindowResize),window.removeEventListener("scroll",this.handleWindowScroll,{passive:!0}))}updateScrollersSyncers(){this.timeScroller.handleChildren([this.timeHeaderScrollerRef.current,this.timeBodyScrollerRef.current,this.timeFooterScrollerRef.current]),this.bodyScroller.handleChildren([this.spreadsheetBodyScrollerRef.current,this.timeBodyScrollerRef.current]),this.spreadsheetScroller.handleChildren([this.spreadsheetHeaderScrollerRef.current,this.spreadsheetBodyScrollerRef.current,this.spreadsheetFooterScrollerRef.current])}resetTimeScroll(){this.handleTimeScrollRequest(this.context.options.scrollTime)}applyTimeScroll(){const e=this.computeTimeScroll();e!=null&&(this.scroll.x=e,this.timeScroller.scrollTo({x:e}))}computeTimeScroll(){var e;const{props:t,context:s,scroll:n}=this,{tDateProfile:i}=t,o=(e=t.slotWidth)!==null&&e!==void 0?e:le;let{x:l,time:d}=n;if(l==null&&d)return l=or(d,s.dateEnv,t.dateProfile,i,o),l&&(l+=1),l}applyEntityScroll(){const e=this.computeEntityScroll();e!==void 0&&this.bodyScroller.scrollTo({y:e})}computeEntityScroll(){const{bodyTops:e,bodyHeights:t,scroll:s}=this,{entityId:n,fromBottom:i}=s;if(n){const o=e.get(n),l=t.get(n);if(o!=null){const d=o+l;return i!=null?d-i:o+(o?1:0)}}}prepareHits(){this.scroll.entityId=void 0,this.scroll.fromBottom=void 0}queryHit(e,t,s){var n;let{props:i,context:o,bodyLayouts:l,bodyTops:d,bodyHeights:u}=this;const{dateProfile:h,tDateProfile:p,timeCanvasWidth:f}=i,R=(n=i.slotWidth)!==null&&n!==void 0?n:le,{dateEnv:g}=o;let S=Ne(l,d,u,s,fe);if(S){let[m,y,w]=S;if(!vr(m)){let D=m,x=y+w;const E=e?f-t:t,b=Math.floor(E/R),U=b*R,A=(E-U)/R,z=Math.floor(A*p.snapsPerSlot);let B=g.add(p.slotDates[b],Vt(p.snapDuration,z)),N=g.add(B,p.snapDuration),j=R/p.snapsPerSlot,G=b*R+j*z,k=G+j,F,V;return e?(F=f-k,V=f-G):(F=G,V=k),{dateProfile:h,dateSpan:{range:{start:B,end:N},allDay:!p.isTimeScale,resourceId:D.id},rect:{left:F,right:V,top:y,bottom:x},getDayEl:()=>lr(this.bodyEl,b),layer:0}}}return null}}function zi(r,e,t,s){const n=(t?[!0]:[]).concat(!1);let i=0;for(const l of n){const d=r.get(l);if(d==null)return;i+=d}let o=0;for(let l=0;l<s;l++){const d=e.get(l);if(d==null)return;o+=d}return Math.max(i+(t?se:0),o+se*(s-1))}function Bi(r,e,t,s){const n=[];function i(o,l,d){var u,h;let p=0;for(const f of o)if(f.resourceFields){const R=(u=t[f.entity.id])!==null&&u!==void 0?u:s,g=!!f.children.length;n.push({entity:f.entity,resourceFields:f.resourceFields,colGroups:d,isExpanded:R,hasChildren:g,indent:l}),p+=1,p+=i(f.children,l+1,d)}else if(f.pooledHeight)p+=i(f.children,l,d.concat(f.entity));else{const R=(h=t[re(f.entity)])!==null&&h!==void 0?h:s,g=!!f.children.length;n.push({entity:f.entity,isExpanded:R,hasChildren:g,indent:l}),p+=1,p+=i(f.children,l+1,d)}return p}return i(r,e?1:0,[]),n}class ki extends M{render(){const{props:e}=this,{colGroups:t,colGroupStats:s}=e,n=e.colWidths||[],i=e.colGrows||[];return c(Y,null,t.map((o,l)=>{const d=s[l];return d.render?c(Dr,{colSpec:o.spec,fieldValue:o.value,width:n[l],grow:i[l],borderStart:!!l,borderBottom:d.borderBottom}):c("div",{className:d.borderBottom?a.borderOnlyB:a.borderNone,style:{minWidth:0,width:n[l],flexGrow:i[l]}})}))}}const Ve=1e5;class Li extends M{constructor(){super(...arguments),this.buildPrintLayouts=O(Bi),this.compileColWidths=O(Ui)}render(){let{props:e,context:t}=this,{dateProfile:s}=e,{options:n,viewSpec:i}=t;const{tDateProfile:o,todayRange:l,nowDate:d,hasNesting:u}=e,{slotWidth:h,timeCanvasWidth:p}=e,{hasResourceBusinessHours:f,fallbackBusinessHours:R}=e,{splitProps:g,bgSlicedProps:S,timeAreaOffset:m}=e,{superHeaderRendering:y,groupColCnt:w,colSpecs:D}=e,[x,E,b]=this.compileColWidths(e.spreadsheetColWidthConfigs,e.spreadsheetColWidths),{cellRows:U}=o,{resourceHierarchy:A}=e,z=this.buildPrintLayouts(A,u,e.resourceEntityExpansions,n.resourcesInitiallyExpanded),B=n.nowIndicator&&h!=null&&Qe(e.dateProfile.currentRange,d);return c(et,{viewSpec:i,attrs:{role:u?"treegrid":"grid","aria-label":e.labelStr,"aria-labelledby":e.labelId},className:T(e.className,n.tableClass,a.printRoot),borderlessX:e.borderlessX,borderlessTop:e.borderlessTop,borderlessBottom:e.borderlessBottom,noEdgeEffects:e.noEdgeEffects},c("div",{className:v(L(n.tableHeaderClass,{isSticky:!1}),e.borderlessX&&a.borderlessX,a.printHeader)},c("div",{className:a.flexRow},c("div",{role:"rowgroup",className:a.flexCol,style:{width:e.spreadsheetWidth}},!!y&&c("div",{role:"row",className:T(n.resourceHeaderRowClass,a.flexRow,a.grow,a.borderOnlyB)},c(Tr,{renderHooks:y,indent:u&&!w,colSpan:D.length,indentWidth:e.indentWidth})),c("div",{className:v(a.flexCol,a.grow,a.crop)},c("div",{className:v(a.flexCol,a.grow),style:{minWidth:b}},c(Wr,{colSpecs:D,colWidths:x,colGrows:E,indent:u,indentWidth:e.indentWidth})))),c("div",{className:T(n.resourceColumnDividerClass)}),c("div",{className:v(a.liquid,a.flexRow,a.crop)},c("div",{className:v(a.flexCol,a.rel),style:{width:p,insetInlineStart:-m}},U.map((N,j)=>{const G=U.length-j-1;return c(lt,{key:G,dateProfile:e.dateProfile,tDateProfile:o,nowDate:d,todayRange:l,rowLevel:G,cells:N,slotWidth:h})}),B&&c(dt,{tDateProfile:o,nowDate:d,slotWidth:h})))),c("div",{className:L(n.slotHeaderDividerClass,{isHeader:!0,options:{dayMinWidth:n.dayMinWidth}})})),c("div",{role:"rowgroup",className:T(n.tableBodyClass,e.borderlessX&&a.borderlessX,e.noEdgeEffects&&a.noEdgeEffects,a.rel,a.crop)},c("div",{"aria-hidden":!0,className:v(a.fillY,a.crop),style:{height:Ve,insetInlineStart:e.spreadsheetWidth,insetInlineEnd:0}},c("div",{className:a.fillY,style:{width:p,height:Ve,insetInlineStart:-m}},c(ot,{dateProfile:s,tDateProfile:o,nowDate:d,todayRange:l,height:Ve,slotWidth:h}),c(ze,{tDateProfile:o,nowDate:d,todayRange:l,bgEventSegs:S.bgEventSegs,businessHourSegs:f?null:S.businessHourSegs,dateSelectionSegs:S.dateSelectionSegs,eventResizeSegs:S.eventResize?S.eventResize.segs:null,slotWidth:h}),B&&c(at,{tDateProfile:o,nowDate:d,slotWidth:h}))),z.map((N,j)=>{const G=j<z.length-1;if(N.colGroups){const k=N.entity,F=_i(N,z[j-1],z[j+1]);return c("div",{key:k.id,role:"row","aria-level":u?N.indent:void 0,className:v(a.flexRow,a.breakInsideAvoid)},c("div",{className:v(a.flexCol,a.crop),style:{width:e.spreadsheetWidth}},c("div",{className:v(a.flexRow,a.grow),style:{minWidth:b}},c(ki,{colGroups:N.colGroups,colGroupStats:F,colWidths:x,colGrows:E}),c(Rt,{resource:k,resourceFields:N.resourceFields,indent:N.indent,hasChildren:N.hasChildren,isExpanded:N.isExpanded,colStartIndex:w,colSpecs:D,colWidths:x,colGrows:E,borderStart:!!w,borderBottom:G,indentWidth:e.indentWidth}))),c("div",{className:T(n.resourceColumnDividerClass)}),c("div",{className:v(a.flexCol,a.crop,a.liquid)},c(Hr,Object.assign({},g[k.id],{className:a.rel,resource:k,dateProfile:s,tDateProfile:o,nowDate:d,todayRange:l,businessHours:k.businessHours||R,width:p,slotWidth:h,insetInlineStart:-m,borderBottom:G}))))}else{const k=N.entity,F=re(k);return c("div",{key:F,role:"row",className:v(a.flexRow,a.breakInsideAvoid)},c("div",{className:v(a.crop,a.flexRow),style:{width:e.spreadsheetWidth}},c(St,{group:k,isExpanded:N.isExpanded,colSpan:e.colSpecs.length,borderBottom:G,indentWidth:e.indentWidth})),c("div",{className:T(n.resourceColumnDividerClass)}),c("div",{className:v(a.crop,a.flexRow,a.liquid)},c(Ir,{group:k,borderBottom:G})))}})))}}function _i(r,e,t){return r.colGroups.map((s,n)=>({render:!e||!e.colGroups||e.colGroups[n]!==s,borderBottom:t&&(!t.colGroups||t.colGroups[n]!==s)}))}function Ui(r,e){return e!=null?mi(r,e):[void 0,void 0,void 0]}const ji=50;function Gi(r){let e=r.resourceColumns||[],t=null;e.length?r.resourceColumnHeaderContent&&(t={headerClass:r.resourceColumnHeaderClass,headerInnerClass:r.resourceColumnHeaderInnerClass,headerContent:r.resourceColumnHeaderContent,headerDidMount:r.resourceColumnHeaderDidMount,headerWillUnmount:r.resourceColumnHeaderWillUnmount}):e.push({headerDefault:()=>"Resources"});let s=[],n=[],i=[],o=0,l=!1;for(let f of e)(f.group?n:s).push(Object.assign(Object.assign({},f),{isMain:!f.group&&!l?l=!0:!1,headerClass:he(r.resourceColumnHeaderClass,f.headerClass),headerInnerClass:he(r.resourceColumnHeaderInnerClass,f.headerInnerClass),headerResizerClass:he(r.resourceColumnResizerClass,f.headerResizerClass),headerContent:Tt(r.resourceColumnHeaderContent,f.headerContent),headerDidMount:Ee(r.resourceColumnHeaderDidMount,f.headerDidMount),headerWillUnmount:Ee(r.resourceColumnHeaderWillUnmount,f.headerWillUnmount),cellClass:he(r.resourceCellClass,f.cellClass),cellInnerClass:he(r.resourceCellInnerClass,f.cellInnerClass),cellContent:Tt(r.resourceCellContent,f.cellContent),cellDidMount:Ee(r.resourceCellDidMount,f.cellDidMount),cellWillUnmount:Ee(r.resourceCellWillUnmount,f.cellWillUnmount)}));if(n.length)i=n;else{o=1;let f=r.resourceGroupField;f&&i.push({field:f,labelClass:r.resourceGroupHeaderClass,labelInnerClass:r.resourceGroupHeaderInnerClass,labelContent:r.resourceGroupHeaderContent,labelDidMount:r.resourceGroupHeaderDidMount,labelWillUnmount:r.resourceGroupHeaderWillUnmount,laneClass:r.resourceGroupLaneClass,laneInnerClass:r.resourceGroupLaneInnerClass,laneContent:r.resourceGroupLaneContent,laneDidMount:r.resourceGroupLaneDidMount,laneWillUnmount:r.resourceGroupLaneWillUnmount})}let d=r.resourceOrder||pn,u=[];for(let f of d){let R=!1;for(let g of i)if(g.field===f.field){g.order=f.order,R=!0;break}R||u.push(f)}const h=n.concat(s),p=h.map(f=>fi(f.width,void 0,ji));return pi(p),{groupSpecs:i,groupRowDepth:o,orderSpecs:u,colSpecs:h,groupColCnt:n.length,colWidthConfigs:p,superHeaderRendering:t}}class Nr extends Je{constructor(){super(...arguments),this.buildTimelineDateProfile=O(sr),this.processColOptions=O(Gi),this.buildResourceHierarchy=O(mr),this.computeSlotWidth=O(ir),this.computeHasNesting=O(Pr),this.computeHasResourceBusinessHours=O(Mr),this.scrollRef=_(),this.spreadsheetResizedWidthRef=_(),this.resourceSplitter=new fr,this.bgSlicer=new ct,this.handleColResize=(e,t)=>{const s=Si(this.spreadsheetColWidthConfigs,this.spreadsheetColWidths,this.state.spreadsheetClientWidth,e,t);this.setState({colWidthOverrides:s})},this.handleSpreadsheetClientWidth=e=>{e!=null&&this.setState({spreadsheetClientWidth:e})},this.handleTimeClientWidth=e=>{e!=null&&this.setState({timeClientWidth:e})},this.handleSlotInnerWidth=e=>{e!=null&&this.setState({slotInnerWidth:e})},this.handleExpanderEl=e=>{this.disconnectExpanderWidth&&(this.disconnectExpanderWidth(),this.disconnectExpanderWidth=void 0),e&&(this.disconnectExpanderWidth=Ds(e,t=>{this.setState({expanderWidth:t})}))}}render(){let{props:e,state:t,context:s}=this,{dateProfile:n}=e,{options:i}=s,o=this.buildTimelineDateProfile(n,s.dateEnv,i,s.dateProfileGenerator),l=Me(o.slotDuration).unit,{groupSpecs:d,groupRowDepth:u,orderSpecs:h,colSpecs:p,groupColCnt:f,colWidthConfigs:R,superHeaderRendering:g}=this.processColOptions(s.options),S=t.colWidthOverrides||R,[m,y]=t.spreadsheetClientWidth!=null?gi(S,t.spreadsheetClientWidth):[void 0,void 0];this.spreadsheetColWidthConfigs=S,this.spreadsheetColWidths=m;let w=this.buildResourceHierarchy(e.resourceStore,h,d,u),D=this.computeHasNesting(w),[x,E,b]=this.computeSlotWidth(o.slotCnt,o.slotsPerLabel,i.slotMinWidth,t.slotInnerWidth,t.timeClientWidth),U=this.resourceSplitter.splitProps(e),A=U[""],z=this.bgSlicer.sliceProps(A,n,o.isTimeScale?null:i.nextDayThreshold,s,n,s.dateProfileGenerator,o,s.dateEnv),B=this.computeHasResourceBusinessHours(w),N=B?e.businessHours:null;return c(Y,null,c(At,{unit:l},(j,G)=>{var k,F;const V={className:e.className,labelId:e.labelId,labelStr:e.labelStr,tDateProfile:o,dateProfile:n,resourceHierarchy:w,resourceEntityExpansions:e.resourceEntityExpansions,hasNesting:D,nowDate:j,todayRange:G,colSpecs:p,groupColCnt:f,superHeaderRendering:g,splitProps:U,bgSlicedProps:z,eventSelection:e.eventSelection,hasResourceBusinessHours:B,fallbackBusinessHours:N,slotWidth:E,timeCanvasWidth:x,spreadsheetColWidths:m,borderlessX:e.borderlessX,borderlessTop:e.borderlessTop,borderlessBottom:e.borderlessBottom,noEdgeEffects:e.noEdgeEffects};return e.forPrint?c(Li,Object.assign({},V,{spreadsheetWidth:(k=this.spreadsheetResizedWidthRef.current)!==null&&k!==void 0?k:i.resourceColumnsWidth,spreadsheetColWidthConfigs:S,timeAreaOffset:this.scrollRef.current.x,indentWidth:t.expanderWidth})):c(Oi,Object.assign({},V,{slotLiquid:b,timeClientWidthRef:this.handleTimeClientWidth,slotInnerWidthRef:this.handleSlotInnerWidth,initialSpreadsheetWidth:(F=this.spreadsheetResizedWidthRef.current)!==null&&F!==void 0?F:i.resourceColumnsWidth,spreadsheetCanvasWidth:y,initialScroll:this.scrollRef.current,spreadsheetResizedWidthRef:this.spreadsheetResizedWidthRef,spreadsheetClientWidthRef:this.handleSpreadsheetClientWidth,scrollRef:this.scrollRef,onColResize:this.handleColResize,indentWidth:t.expanderWidth}))}),c(mt,{isExpanded:!0,elRef:this.handleExpanderEl,className:a.offscreen}))}}Nr.addStateEquality({spreadsheetColWidthOverrides:Ze});function Mr(r){for(const e of r)if(e.resourceFields&&e.entity.businessHours||Mr(e.children))return!0;return!1}function Pr(r){for(const e of r)if(e.children.length&&!e.pooledHeight||Pr(e.children))return!0;return!1}const Fi={resourceColumnsWidth:C,resourceColumns:C,resourceColumnDividerClass:C,resourceColumnHeaderClass:C,resourceColumnHeaderInnerClass:C,resourceColumnResizerClass:C,resourceColumnHeaderContent:C,resourceColumnHeaderDidMount:C,resourceColumnHeaderWillUnmount:C,resourceHeaderRowClass:C,resourceRowClass:C,resourceCellClass:C,resourceCellInnerClass:C,resourceCellContent:C,resourceCellDidMount:C,resourceCellWillUnmount:C,resourceGroupHeaderClass:C,resourceGroupHeaderInnerClass:C,resourceGroupHeaderContent:C,resourceGroupHeaderDidMount:C,resourceGroupHeaderWillUnmount:C,resourceGroupLaneClass:C,resourceGroupLaneInnerClass:C,resourceGroupLaneContent:C,resourceGroupLaneDidMount:C,resourceGroupLaneWillUnmount:C,resourceLaneClass:C,resourceLaneDidMount:C,resourceLaneWillUnmount:C,resourceLaneTopClass:C,resourceLaneTopContent:C,resourceLaneBottomClass:C,resourceLaneBottomContent:C,resourceIndentClass:C,resourceExpanderClass:C,resourceExpanderContent:C};var Ai=Ce({name:"@fullcalendar/resource-timeline",premiumReleaseDate:"2025-12-31",deps:[Oe,hi,un],initialView:"resourceTimelineDay",views:{resourceTimeline:{type:"timeline",component:Nr,needsResourceData:!0,resourceColumnsWidth:"30%",resourcesInitiallyExpanded:!0,eventResizableFromStart:!0},resourceTimelineDay:{type:"resourceTimeline",duration:{days:1}},resourceTimelineWeek:{type:"resourceTimeline",duration:{weeks:1}},resourceTimelineMonth:{type:"resourceTimeline",duration:{months:1}},resourceTimelineYear:{type:"resourceTimeline",duration:{years:1}}},optionRefiners:Fi});const _t={dayHeaderInnerClass:"mb-1",dayHeaderDividerClass:"border-b"};function Vi({views:r,...e}){return ae.jsx(Ws,{resourceDayHeaderAlign:"center",resourceDayHeaderClass:t=>oe("border",t.isMajor&&"border-foreground/20"),resourceDayHeaderInnerClass:t=>oe("p-2 flex flex-col",t.isNarrow?"text-xs":"text-sm"),resourceColumnHeaderClass:"border justify-center",resourceColumnHeaderInnerClass:"p-2 text-sm",resourceColumnResizerClass:"absolute inset-y-0 w-[5px] end-[-3px]",resourceGroupHeaderClass:"border bg-foreground/3",resourceGroupHeaderInnerClass:"p-2 text-sm",resourceCellClass:"border",resourceCellInnerClass:"p-2 text-sm",resourceIndentClass:"ms-1 -me-1.5 justify-center",resourceExpanderClass:"group p-1 rounded-full hover:bg-foreground/5 focus-visible:outline-3 outline-ring/50",resourceHeaderRowClass:"border",resourceRowClass:"border",resourceColumnDividerClass:"border-e border-foreground/20",resourceGroupLaneClass:"border bg-foreground/3",resourceLaneClass:"border",resourceLaneBottomClass:t=>oe(t.options.eventOverlap&&"h-2"),timelineBottomClass:"h-2",views:{...r,resourceTimeGrid:{..._t,...r?.resourceTimeGrid},resourceDayGrid:{..._t,...r?.resourceDayGrid},timeline:{rowEventClass:t=>oe(t.isEnd&&"me-px"),rowEventInnerClass:t=>t.options.eventOverlap?"py-1":"py-2",rowMoreLinkClass:"me-px mb-px rounded-sm border border-transparent print:border-black bg-[color-mix(in_oklab,var(--foreground)_10%,var(--background))] hover:bg-[color-mix(in_oklab,var(--foreground)_13%,var(--background))] print:bg-white",rowMoreLinkInnerClass:"p-1 text-xs",slotHeaderSticky:"0.5rem",slotHeaderAlign:t=>t.level||t.isTime?"start":"center",slotHeaderClass:t=>oe("border",t.level?"border-transparent justify-start":t.isTime?"h-2 self-end justify-end":"justify-center"),slotHeaderInnerClass:t=>oe("text-sm",t.level?["my-0.5 px-2 py-1 rounded-full bg-foreground/10",t.hasNavLink&&"hover:bg-foreground/20 focus-visible:outline-3 outline-ring/50"]:["px-2",t.isTime?["pb-3 relative -start-3",t.isFirst&&"hidden"]:"py-2",t.hasNavLink&&"hover:underline"]),slotHeaderDividerClass:"border-b",...r?.timeline}},...e})}const qi=[qs,Ps,Ai],Xi=["resourceTimelineDay","resourceTimelineWeek"],Yi="resourceTimelineDay",Ki="resourceTimelineWeek";function oo({availableViews:r=Xi,addButton:e,className:t,height:s,contentHeight:n,direction:i,plugins:o=[],...l}){const d=Ts(),u=s==="auto"||n==="auto";return ae.jsxs(Ns,{direction:i,className:t,height:s,borderless:l.borderless,borderlessX:l.borderlessX,borderlessTop:l.borderlessTop,borderlessBottom:l.borderlessBottom,children:[ae.jsx(Ms,{controller:d,availableViews:r,addButton:e}),ae.jsx(Vi,{controller:d,liquidHeight:!u&&s!==void 0,height:u?"auto":n,initialView:r[0],navLinkDayClick:Yi,navLinkWeekClick:Ki,plugins:[...qi,...o],popoverCloseContent:()=>ae.jsx(zs,{}),resourceExpanderContent:h=>ae.jsx(Os,{isExpanded:h.isExpanded}),firstDay:1,...l})]})}export{pn as D,oo as R,Ie as S,no as V,eo as a,ro as b,to as c,q as d,so as e,io as f,hi as g,Vi as h,Oe as i,qs as j};
